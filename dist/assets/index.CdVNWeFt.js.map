{"version":3,"mappings":"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","names":["m","require$$0","client","createRoot","hydrateRoot","window","createSvgIcon","Component","SvgIcon","forwardRef","createElement","src","ref","props","displayName","React","createMuiSvgIcon","ASSETS_MAX_AGE","openDatabase","Promise","reject","indexedDB","request","open","onerror","event","target","onupgradeneeded","db","result","objectStoreNames","contains","STORE_NAME","createObjectStore","keyPath","createIndex","unique","onsuccess","isAssetUrl","url","includes","getCachedResource","async","store","transaction","objectStore","resolve","cachedItem","Date","now","timestamp","delete","cachedResponse","Response","data","status","statusText","headers","error","ProfileService","getProfile","username","axios","get","getSettings","response","success","settings","localStorage","setItem","stringify","updateSettings","post","updateName","name","formData","FormData","append","updateUsername","updateAbout","about","uploadAvatar","file","uploadBanner","updateSocial","link","deleteSocial","addSocial","followUser","userId","followed_id","unfollowUser","checkFollowing","is_following","AuthService","login","credentials","usernameOrEmail","password","withCredentials","token","user","message","register","email","userData","checkAuth","Pragma","sessionExists","hasSession","_lastAuthCheckResponse","fallbackResponse","isAuthenticated","errorResponse","logout","removeItem","registerProfile","profileData","AuthContext","createContext","loading","setUser","useAuth","useContext","children","getItem","savedUser","JSON","parse","useState","savedAuthState","lastAuthCheck","lastCheck","useNavigate","themeContext","ThemeSettingsContext","authState","useCallback","force","_authCheckInProgress","setLoading","setIsAuthenticated","needsProfileSetup","persistAuthState","location","pathname","navigate","replace","publicPages","page","loadThemeSettings","preventRedirect","href","ban_info","setError","errorMessage","banInfo","setLastAuthCheck","useEffect","setTimeout","catch","initAuth","interceptor","interceptors","use","currentPath","some","eject","contextValue","Provider","value","defaultIconDimensions","Object","freeze","left","width","height","defaultIconTransformations","rotate","vFlip","defaultIconProps","defaultExtendedIconProps","body","hidden","mergeIconData","parent","child","obj1","hFlip","obj2","key","internalGetIconData","tree","icons","aliases","create","currentProps","name2","forEach","callback","names","not_found","Array","push","resolved","keys","concat","item","provider","prop","quicklyValidateIconSet","obj","prefix","optionalPropertyDefaults","checkOptionalProps","icon","matchIconName","stringToIcon","validate","colonSeparated","split","slice","length","shift","pop","validateIconName","dashSeparated","join","allowSimpleName","dataStorage","getStorage","providerStorage","missing","Set","addIconSet","storage","parseIconSet","add","simpleNames","allowSimpleNames","allow","getIconData","iconName","has","defaultIconSizeCustomisations","defaultIconCustomisations","unitsSplit","calculateSize","size","ratio","precision","Math","oldParts","newParts","isNumber","unitsTest","test","code","num","parseFloat","isNaN","ceil","regex","toString","random","counter","replaceIDs","randomPrefix","ids","match","exec","id","RegExp","escapedID","suffix","getAPIModule","createAPIConfig","source","resources","path","maxURL","timeout","index","dataAfterTimeout","configStorage","fallBackAPI","fallBackAPISources","addAPIProvider","customConfig","config","fetchModule","fetch","detectFetch","fetchAPIModule","prepare","results","maxLength","getAPIConfig","maxHostLength","max","calculateMaxLength","type","send","host","params","getPath","iconsList","URLSearchParams","uri","defaultError","then","json","shouldAbort","removeCallback","storages","loaderCallbacks","items","filter","idCounter","defaultConfig","cfg","queries","cleanup","instance","query","doneCallback","payload","done","startIndex","floor","resourcesCount","list","nextIndex","lastError","queriesSent","doneCallbacks","resetTimer","timer","clearTimeout","queue","subscribe","overwrite","failQuery","clearQueue","execNext","resource","status2","isError","queued","indexOf","moduleResponse","startTime","queriesPending","abort","queryCallback","query2","find","setIndex","getIndex","emptyCallback$1","emptyCallback","parseLoaderResponse","pendingIcons","pending","checkMissing","iconsLoaderFlag","pendingCallbacksFlag","hasPending","oldLength","loaded","updateCallbacks","parsePossiblyAsyncResponse","iconsToLoad","sort","iconsQueueFlag","icons2","customIconLoader","loadIcon","loadIcons","valid","invalid","api","redundancy","redundancyCache","cachedReundancy","getRedundancyCache","initRedundancy","sendAPIQuery","separator","flipFromString","custom","flip","str","trim","rotateFromString","units","value2","parseInt","policy","cleanUpInnerHTML","html","trustedTypes","createPolicy","createHTML","s","defaultExtendedIconCustomisations","inline","svgDefaults","xmlnsXlink","commonProps","display","backgroundColor","coloredProps","propsToAdd","Image","Repeat","Size","propsToAddTo","WebkitMask","monotoneProps","mask","background","inlineDefaults","fixSize","document","_window","IconifyPreload","preload","added","addIconToStorage","addCollection","e","IconifyProviders","providers","setMounted","ssr","setAbort","state","setState","mounted","getInitialState","newState","updateState","_a","changeState","a","b","localeCompare","lastIcon","sortIcons","sortedIcons","callCallback","newIcons","sources","lastPrefix","lastProvider","providerNewIcons","pendingQueue","loadNewIcons","pendingSources","bind","onLoad","call","customisations","defaults","valueType","mode","style","customStyle","classNames","className","componentProps","color","defaultProps","fullIcon","fullCustomisations","box","top","transformations","tempValue","rotation","unshift","start","content","tag","defs","endEnd","end","wrapSVGContent","customisationsWidth","customisationsHeight","boxWidth","boxHeight","attributes","setAttr","viewBox","verticalAlign","assign","dangerouslySetInnerHTML","__html","localCounter","useMask","renderAttribsHTML","attr","iconToHTML","svg","svgToData","renderAttribs","render","fallback","IconComponent","_ref","defineProperty","exports","enumerable","_utils","_interopRequireDefault","Search","default","_createSvgIcon","_jsxRuntime","require$$2","jsx","d","AppBottomNavigation","useLocation","visibleInMessenger","setVisibleInMessenger","themeSettings","useTheme","isInMessenger","handleMessengerLayoutChange","isInChat","addEventListener","removeEventListener","startsWith","isAuthPage","isSettingsPage","isBadgeShopPage","borderColor","theme","palette","alpha","divider","common","white","textColor","text","primary","position","bottom","xs","md","zIndex","borderTop","backdropFilter","WebkitBackdropFilter","boxShadow","elevation","jsxs","getCurrentValue","onChange","newValue","sx","bgcolor","justifyContent","alignItems","marginTop","primaryColor","label","Icon","minWidth","fontSize","BottomNavigationAction","transform","tracks","popularTracks","likedTracks","newTracks","randomTracks","currentTrack","isPlaying","volume","isMuted","currentTime","duration","isLoading","audioRef","hasMoreTracks","hasMoreByType","currentSection","isTrackLoading","setCurrentTrack","setCurrentSection","setRandomTracks","playTrack","togglePlay","nextTrack","prevTrack","setVolume","toggleMute","seekTo","likeTrack","uploadTrack","loadMoreTracks","resetPagination","enableCrossfade","searchResults","isSearching","searchTracks","getCurrentTimeRaw","getDurationRaw","playlistTracks","setPlaylistTracks","MusicProvider","setTracks","setPopularTracks","setNewTracks","setIsPlaying","setIsMuted","setCurrentTime","setDuration","setHasMoreTracks","setHasMoreByType","setPage","setPageByType","liked","new","setEnableCrossfade","setSearchResults","setIsTrackLoading","useRef","Audio","nextAudioRef","initialMount","crossfadeTimeoutRef","setIsLoadingMore","durationRef","lastTimeUpdateRef","likedTracksLastLoadedRef","isLoadingLikedTracksRef","hasCheckedLikedTracksRef","setPlaylistTracksState","isLoadingRef","current","cacheAge","per_page","_t","Expires","receivedTracks","setLikedTracks","prev","setIsLoading","nocache","isMounted","prefetchCount","all","map","track","lyricsData","fetchLyricsForTrack","popular","shuffledTracks","fetchTracks","handleTimeUpdate","audio","currentTimeRef","navigator","mediaSession","setPositionState","playbackRate","timeRemaining","getNextTrack","nextTrackToPlay","file_path","playPromise","play","fadeInterval","setInterval","paused","pause","clearInterval","nextTrackToLoad","load","handleEnded","tempAudio","timeUpdateThrottleRef","trackId","ok","section","err","handleCanPlayThrough","track_id","artist","title","handleLoadStart","handleError","once","nextTrackItem","prevTrackItem","getPreviousTrack","tracksInPlaylist","currentIndex","findIndex","trackList","updatedTrackList","time","metadata","MediaMetadata","album","artwork","cover_path","sizes","playbackState","setActionHandler","details","seekTime","visibilityState","userAgent","MSStream","iosPlayHandler","iosPauseHandler","isLoadingMoreRef","nextPage","pageByType","endpoint","has_more","undefined","pages","prevTracks","preloadNextPage","preloadTimeRef","randomize","hasMore","Error","savedTrack","parsedTrack","inactivityTimer","clearNowPlayingStatus","lastClearTime","playlistId","prevState","musicContextValue","newVolume","trackToUpdate","t","newIsLiked","is_liked","likes_count","updateTrackInList","updatedTrack","isLiked","trackToAdd","trackInfo","extractMetadata","jsmediatags","read","onSuccess","tags","pictureData","picture","format","reduce","acc","byte","String","fromCharCode","btoa","base64String","onError","fetchResponse","blob","File","coverFile","updatedTracks","newTracksList","setIsSearching","processedTracks","isArray","Boolean","lt","MusicContext","useMusic","BASE_URL","SEO","description","image","meta","pageUrl","absoluteImageUrl","imagePath","cleanPath","parts","substring","getAbsoluteImageUrl","Helmet","prioritizeSeoTags","encodeSpecialCharacters","defer","googleVerification","yandexVerification","property","keywords","author","viewport","publishedTime","headline","datePublished","toISOString","propTypes","PropTypes","string","object","PostDetailContext","PostDetailProvider","currentPostId","setCurrentPostId","backgroundLocation","setBackgroundLocation","postId","overlayOpen","setOverlayOpen","ctrlKey","metaKey","shiftKey","altKey","preventDefault","stopPropagation","closePostDetail","search","usePostDetail","CloudUpload","styled","motion","Card","paper","borderRadius","shape","padding","spacing","maxWidth","overflow","border","right","breakpoints","down","RegisterChannel","setFormData","interests","agree_terms","agree_privacy","setAvatarPreview","checked","Container","disableGutters","minHeight","isMobile","Box","flex","flexDirection","div","initial","scale","opacity","animate","transition","delay","alt","marginBottom","y","textAlign","Typography","variant","fontWeight","gap","_","i","component","Paper","p","mt","overflowY","maxHeight","mb","Alert","severity","onSubmit","channelFormData","avatar","method","Button","startIcon","CloudUploadIcon","accept","files","setAvatar","createObjectURL","margin","required","fullWidth","autoFocus","TextField","handleChange","placeholder","multiline","rows","FormControlLabel","control","Checkbox","textTransform","textDecoration","py","disabled","ErrorBoundaryContext","didCatch","constructor","super","this","resetErrorBoundary","initialState","arguments","args","_key","onReset","_this$props$onReset","reason","componentDidCatch","_this$props$onError","_this$props2","info","componentDidUpdate","resetKeys","_this$props3","hasArrayChanged","_this$props$onReset2","next","fallbackRender","FallbackComponent","childToRender","PersonAdd","Groups","FilterAlt","TvOff","StyledPaper","EmptyChannelsPlaceholder","TvOffIcon","gutterBottom","paddingTop","paddingBottom","SearchSection","StyledTextField","themecolor","main","borderWidth","SectionHeader","ChannelCard","ChannelContent","CardContent","flexGrow","ChannelAvatar","Avatar","ChannelName","textOverflow","WebkitLineClamp","WebkitBoxOrient","ChannelUsername","StyledChip","Chip","isFollowing","marginLeft","Tab","marginRight","StyledTabs","Tabs","borderTopLeftRadius","borderTopRightRadius","LoadMoreButton","ChannelCardLoader","Skeleton","ChannelsPage","searchParams","initialQuery","initialTab","activeTab","setSearchQuery","setChannels","popularChannels","setFeaturedChannels","setLoadingMore","total","setWithDescription","followedChannels","setFollowedChannels","getFormattedUrl","tab","searchQuery","set","q","with_description","channels","fetchPopularChannels","withDescription","has_next","renderChannelCard","channel","CardActionArea","onClick","photo","is_verified","ml","followers_count","toFixed","channelId","updatedPopular","updatedFeatured","revertChannels","revertPopular","revertFeatured","personCheckIcon","personAddIcon","fetchFollowedChannels","PageContainer","PageHeader","GroupsIcon","InputProps","startAdornment","InputAdornment","endAdornment","Grid","container","sm","featuredChannels","borderBottom","handleTabChange","setActiveTab","scrollButtons","StyledTab","CircularProgress","mr","IconButton","FilterAltIcon","from","loadingMore","prevChannels","audioTiming","progress","formattedCurrentTime","formattedDuration","lastUpdate","MusicPlayerCore","memo","formatTime","Infinity","padStart","updateGlobalTiming","performance","rafId","frameLoop","requestAnimationFrame","cancelAnimationFrame","Casino","ParticleShape","RotationDirection","tweenFunctions","linear","_c","easeInQuad","easeOutQuad","easeInOutQuad","c","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","abs","easeOutElastic","asin","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","tweenFunctions_1","min","DEFAULT_FRAME_TIME","Particle","x","getOptions","colors","initialVelocityX","initialVelocityY","context","w","randomRange","radius","vy","angle","angularSpin","rotateY","rotationDirection","Positive","Negative","gravity","wind","friction","drawShape","vx","frameTimeMultiplier","rotateDelta","save","translate","beginPath","fillStyle","strokeStyle","globalAlpha","lineCap","lineWidth","Circle","arc","fill","Square","fillRect","h","Strip","closePath","restore","canvas","lastNumberOfPieces","tweenProgress","particlesGenerated","removeParticleAt","particles","splice","getParticle","newParticleX","elapsed","recycle","numberOfPieces","debug","tweenFunction","tweenDuration","nP","activeCount","tweenFrom","tweenedVal","numToAdd","round","update","ctx","getContext","confettiDefaults","innerWidth","innerHeight","tweens.easeInOutQuad","run","Confetti","opts","lastFrameTime","setOptionsWithDefaults","computedConfettiDefaults","confettiSource","_options","options","onConfettiComplete","frameRate","clearRect","generator","reset","stop","ParticleGenerator","lastRecycleState","createRef","ReactConfettiInternal","canvasRef","componentDidMount","extractCanvasProps","confetti","confettiOptions","componentWillUnmount","passedProps","canvasStyles","pointerEvents","rest","confettiOptionKeys","refProps","val","factory","__WEBPACK_EXTERNAL_MODULE_react__","ICONS","balls","noballs","keyframes","GameContainer","dark","willChange","shouldForwardProp","iscenter","bounce","animation","ITEM_WIDTH","BetAmount","PrizeDisplay","win","getLongReelData","betAmount","arr","j","renderPrize","prize","idx","isActive","textShadow","align","RouletteGame","setBetAmount","setIsSpinning","setPrize","showConfetti","setShowConfetti","setPrizeIndex","letterSpacing","my","prizes","reelData","prizeIndex","onPrizeDefined","amount","spinning","stopOnPrize","prizeSlot","easing","v","step","valueLabelDisplay","valueLabelFormat","mx","isSpinning","handleSpin","setReelData","ballsIndexes","newData","noballsIndexes","CasinoIcon","Fragment","JoinGroupChat","inviteCode","setDebugInfo","setShowConfirmation","handleReturnToMessenger","whiteSpace","debugInfo","Dialog","onClose","PaperProps","DialogContent","DialogActions","MessengerContext","buildAvatarUrl","avatarFilename","filename","finalUrl","charCode","charCodeAt","formatToLocalTime","isoDateString","date","getTime","getHours","getMinutes","MessengerProvider","authContext","isChannel","chats","messages","getCookie","cookie","sessionKey","session_key","sessionKeyCookie","jwtToken","deviceId","existingDeviceId","newDeviceId","setChats","setActiveChat","setMessages","setOnlineUsers","typingUsers","setTypingUsers","setUnreadCounts","loadingMessages","setLoadingMessages","hasMoreMessages","setHasMoreMessages","lastFetchedMessageId","setLastFetchedMessageId","reconnectTimeoutRef","isSocketConnected","pingTimeoutRef","pongTimeoutRef","forceReconnect","socket","onclose","onmessage","close","reconnectAttempts","connectWebSocket","clearAllTimers","pingIntervalRef","connectionCheckerRef","startConnectionChecker","globalLoading","setGlobalLoading","lastRequestTime","setLastRequestTime","safeRequest","fn","lastRequest","isTyping","chatId","chatTyping","userTypingStatus","newTypingUsers","newChatTyping","API_URL","Authorization","Accept","loadChats","fetchCurrentUser","activeRequestsRef","promises","origin","reconnectWebSocket","connectionEstablished","setIsSocketConnected","wsUrl","protocol","webSocket","WebSocket","connectionTimeout","onopen","device_id","pingInterval","readyState","OPEN","newMessageChatId","chat_id","newMessage","sender","sender_id","senderId","avatarCache","refreshChats","handleNewMessage","messageId","message_id","user_id","updateUserStatus","isOnline","chat","members","member","is_group","memberId","memberIdStr","currentUserIdStr","otherUserId","otherMember","getAvatarUrl","chatIndex","currentChat","newChat","newChats","handleWebSocketMessage","setErrorReportRef","setupWebSocket","errorReportRef","device","maxDelay","checkConnectionInterval","handleVisibilityChange","CLOSED","CLOSING","failedConnectionsCount","checkInterval","connectionStateHandler","created_at","message_type","messageType","photo_url","video_url","audio_url","file_url","getFileUrl","isFromCurrentUser","numChatId","chatMessages","last_message","markMessageAsRead","updateReadStatus","msg","currentReadBy","read_by","read_count","activeChat","updatedMessages","setAvatarCache","photoPath","avatarUrl","contentType","last_active","filteredChats","newLastFetchedMessageId","newHasMoreMessages","loadMessages","limit","isRetry","isGroupChat","beforeId","newMessages","hasModeratorMessages","has_moderator_messages","newMsg","mergedMessages","oldestMsgId","getUserInfo","filePath","encodeURIComponent","authParam","updateLastMessage","aTime","setUseFallbackMode","fallbackPollingRef","useFallbackMode","pingResponse","checkWebSocketAvailability","handleNetworkChange","onLine","originalFetch","onlineUsers","unreadCounts","setActiveAndLoadChat","loadMoreMessages","sendTextMessage","replyToId","messageText","encrypted","encryption_key","xorCipher","encryptionKey","reply_to_id","updatedChat","uploadFile","markAllMessagesAsRead","unreadMessages","sendTypingIndicator","searchUsers","users","createPersonalChat","userInfo","createGroupChat","memberIds","memberPromises","member_ids","getChatDetails","decryptMessage","getTotalUnreadCount","values","forceReconnectSocket","deleteMessage","entries","foundMessage","messageChatId","prevMessages","updatedChatMessages","newLastMessage","deleteChat","prevChats","enableLogging","enable","MESSENGER_DEV_MODE","useMessenger","Cookie","COOKIE_KEY","setOpen","direction","mountOnEnter","unmountOnExit","CookieIcon","lineHeight","handleAgree","agreedRef","SectionTitle","paragraph","SecurityIcon","List","ListItem","ListItemText","secondary","Divider","ListItemIcon","SettingsIcon","StorageIcon","InfoIcon","SessionContext","sessionActive","sessionExpired","lastFetchTime","broadcastUpdate","checkSessionStatus","refreshSession","RequireAuth","Navigate","lazy","import","__VITE_PRELOAD__","Register","ForgotPassword","ResetPassword","EmailConfirmation","ElementAuth","MainPage","PostDetailPage","SettingsPage","NotificationsPage","SearchPage","MusicPage","ArtistPage","MessengerPage","BugReportPage","LeaderboardPage","RulesPage","PrivacyPolicyPage","TermsOfServicePage","MorePage","AdminPage","ModeratorPage","__vitePreload","BadgeShopPage","BalancePage","UsernameAuctionPage","SubPlanes","MiniGamesPage","LuckyNumberGame","ClickerPage","BlackjackPage","AboutPage","secondaryColor","updateThemeSettings","setProfileBackground","clearProfileBackground","SuspenseFallback","thickness","PageTransition","LoadingIndicator","ErrorFallback","reload","wordBreak","fontFamily","stack","PublicPages","PublicPage","CookiePage","AppRoutes","isPending","startTransition","useTransition","hash","hasSavedLoginError","authSuccessFlag","isResetPasswordWithToken","isLoginPage","isRegisterPage","isPasswordRecoveryPage","isElementAuthPage","Suspense","Routes","Route","element","Login","to","MainLayout","RegisterProfile","ProfilePage","SubscriptionsPage","tabIndex","SharePreviewTest","SimpleApiDocsPage","UpdatesPage","TestNotifications","openBadgeId","NotFound","isOverlay","DefaultSEO","currentUrl","getPageType","SessionProvider","setSessionExpired","sessionStartTime","BroadcastChannel","setSessionActive","broadcastChannel","expirationInterval","checkSessionExpiration","postMessage","newStartTime","App","setThemeSettings","getStoredValue","defaultValue","sessionValue","sessionStorage","localValue","cookieValue","themeData","localTheme","savedThemeMode","sessionTheme","setCookie","headerColor","bottomNavColor","contentColor","recoverThemeSettings","currentMode","cookieTheme","saveThemeSettings","recoveryInterval","handleFocus","useMemo","onShareSubdomain","hostname","preloadMusicImages","basePaths","basePath","img","getContrastTextColor","hexColor","charAt","substr","forceDefault","background_color","container_color","header_color","bottom_nav_color","content_color","welcome_bubble_color","avatar_border_color","applyThemeSettings","backgroundTextColor","containerTextColor","containerColor","headerTextColor","contentTextColor","bottomNavTextColor","paperColor","documentElement","setProperty","welcomeBubbleColor","authContextValue","newSettings","updated","createTheme","light","header","contrastText","bottomNav","typography","h3","h4","h5","h6","components","MuiButton","styleOverrides","root","MuiCssBaseline","MuiCard","MuiPaper","MuiAppBar","MuiBottomNavigation","MuiBottomNavigationAction","iconOnly","MuiTextField","profileBackground","setProfileBackgroundState","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","backgroundAttachment","classList","remove","themeContextValue","onAboutSubdomain","ThemeProvider","CssBaseline","handleStorageChange","settingUpdate","stateKey","toLowerCase","handlePageFocus","modeFromLocal","applyThemeToDocument","setAttribute","querySelector","metaTheme","appendChild","themeVars","cssKey","HelmetProvider","AuthProvider","expires","setTime","days","toUTCString","ca","cssVarKey","currentThemeData","requestCache","Map","cache","expiry","ttlSeconds","generateKey","clear","clearByUrlPrefix","clearPostsCache","prefixesToClear","requests","startRequest","count","updateGlobalState","finishRequest","dispatchEvent","CustomEvent","detail","activeRequests","getActiveRequests","baseURL","STATE_CHANGING_PATTERNS","urlPattern","requestId","cacheKey","cachedData","forceRefresh","CancelToken","cancel","fromCache","cancelToken","_cacheKey","pattern","_invalidatesCache","loadingManager","isCancel","shortMessage","notificationType","animationType","retryAfter","_retryCount","attempt","helpers","CheckCircle","_Error","Warning","Info","WifiOff","Lock","Notifications","Favorite","ChatBubble","PostAdd","MonetizationOn","pillContract","pulseAnimation","bounceAnimation","dropAnimation","NotificationContainer"],"ignoreList":[0,7,8,9,14,17,18,19,20,21,22,23,27,28,29,30,34,39,40,41,42,43,44,45,46,47,48,49,50],"sources":["../../node_modules/react-dom/client.js","../../src/utils/ensure-global-functions.js","../../src/utils/createSvgIcon.js","../../src/utils/indexedDbCache.js","../../src/services/ProfileService.js","../../src/services/AuthService.js","../../src/context/AuthContext.js","../../node_modules/@iconify/react/dist/iconify.js","../../node_modules/@mui/icons-material/utils/createSvgIcon.js","../../node_modules/@mui/icons-material/Search.js","../../src/components/BottomNavigation.js","../../src/context/MusicContext.js","../../src/components/SEO/index.js","../../src/context/PostDetailContext.js","../../node_modules/@mui/icons-material/CloudUpload.js","../../src/components/AuthCard.js","../../src/pages/Auth/RegisterChannel.js","../../node_modules/react-error-boundary/dist/react-error-boundary.esm.js","../../node_modules/@iconify-icons/solar/user-plus-bold.js","../../node_modules/@iconify-icons/solar/user-check-bold.js","../../node_modules/@mui/icons-material/PersonAdd.js","../../node_modules/@mui/icons-material/Groups.js","../../node_modules/@mui/icons-material/FilterAlt.js","../../node_modules/@mui/icons-material/TvOff.js","../../src/pages/Main/EmptyChannelsPlaceholder.js","../../src/pages/Main/ChannelsPage.js","../../src/components/MusicPlayerCore.js","../../node_modules/@mui/icons-material/Casino.js","../../node_modules/react-confetti/dist/react-confetti.mjs","../../node_modules/tween-functions/index.js","../../node_modules/react-roulette-pro/dist/index.js","../../src/pages/MiniGames/RouletteGame.js","../../src/pages/Messenger/JoinGroupChat.js","../../src/contexts/MessengerContext.js","../../node_modules/@mui/icons-material/Cookie.js","../../src/components/CookieBanner.js","../../src/pages/Info/CookiesPage.js","../../src/App.js","../../src/services/axiosConfig.js","../../node_modules/@mui/icons-material/CheckCircle.js","../../node_modules/@mui/icons-material/Error.js","../../node_modules/@mui/icons-material/Warning.js","../../node_modules/@mui/icons-material/Info.js","../../node_modules/@mui/icons-material/WifiOff.js","../../node_modules/@mui/icons-material/Lock.js","../../node_modules/@mui/icons-material/Notifications.js","../../node_modules/@mui/icons-material/Favorite.js","../../node_modules/@mui/icons-material/ChatBubble.js","../../node_modules/@mui/icons-material/Repeat.js","../../node_modules/@mui/icons-material/PostAdd.js","../../node_modules/@mui/icons-material/MonetizationOn.js","../../src/components/DynamicIslandNotification.js"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React from 'react';\nfunction ensureCreateSvgIcon() {\n  if (typeof window !== 'undefined') {\n    window.createSvgIcon = function(Component, displayName) {\n      if (typeof Component === 'string') {\n        const SvgIcon = React.forwardRef((props, ref) => {\n          return React.createElement('img', {\n            src: Component,\n            alt: displayName || 'Icon',\n            ref: ref,\n            ...props\n          });\n        });\n        SvgIcon.displayName = displayName || 'SvgIcon';\n        return SvgIcon;\n      }\n      const SvgIcon = React.forwardRef((props, ref) => {\n        if (!Component) return null;\n        return React.createElement(Component, {\n          ...props,\n          ref: ref\n        });\n      });\n      SvgIcon.displayName = displayName || (Component && Component.displayName) || 'SvgIcon';\n      return SvgIcon;\n    };\n    console.log('createSvgIcon function installed (React version)');\n  }\n}\nensureCreateSvgIcon();\nexport default ensureCreateSvgIcon; ","import { createElement } from 'react';\nimport { createSvgIcon as createMuiSvgIcon } from '@mui/material/utils';\n\nexport function createSvgIcon(path, displayName) {\n  return createMuiSvgIcon(\n    createElement('path', { d: path }),\n    displayName\n  );\n}\n\n//       \nif (typeof window !== 'undefined') {\n  window.createSvgIcon = createSvgIcon;\n} ","/**\n * IndexedDB   K-Connect\n * \n *      /assets/\n *     .\n *\n * @version 2.1.0\n * @modified: 2023-11-18\n */\nconst DB_NAME = 'k-connect-assets-cache';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'assets';\nconst ASSETS_MAX_AGE = 7 * 24 * 60 * 60 * 1000; \n/**\n *    IndexedDB\n * @returns {Promise<IDBDatabase>}     \n */\nconst openDatabase = () => {\n  return new Promise((resolve, reject) => {\n    if (!window.indexedDB) {\n      reject(new Error('IndexedDB   '));\n      return;\n    }\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n    request.onerror = (event) => {\n      console.error('[IndexedDB]    :', event.target.error);\n      reject(event.target.error);\n    };\n    request.onupgradeneeded = (event) => {\n      console.debug('[IndexedDB] /  ');\n      const db = event.target.result;\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        const store = db.createObjectStore(STORE_NAME, { keyPath: 'url' });\n        store.createIndex('timestamp', 'timestamp', { unique: false });\n        console.debug('[IndexedDB]    ');\n      }\n    };\n    request.onsuccess = (event) => {\n      resolve(event.target.result);\n    };\n  });\n};\n/**\n * ,   URL \n * @param {string} url URL  \n * @returns {boolean} true   URL \n */\nconst isAssetUrl = (url) => {\n  return typeof url === 'string' && url.includes('/assets/');\n};\n/**\n *    \n * @param {string} url URL \n * @param {Response} response   \n * @returns {Promise<void>}\n */\nconst cacheResource = async (url, response) => {\n  if (!isAssetUrl(url)) {\n    return;\n  }\n  try {\n    const db = await openDatabase();\n    const clonedResponse = response.clone();\n    const headers = {};\n    clonedResponse.headers.forEach((value, key) => {\n      headers[key] = value;\n    });\n    const blob = await clonedResponse.blob();\n    if (blob.size > 5 * 1024 * 1024) { \n      console.debug(`[IndexedDB]   : ${url} (${blob.size} )`);\n      return;\n    }\n    const transaction = db.transaction(STORE_NAME, 'readwrite');\n    const store = transaction.objectStore(STORE_NAME);\n    const item = {\n      url: url,\n      data: blob,\n      timestamp: Date.now(),\n      headers: headers,\n      status: clonedResponse.status,\n      statusText: clonedResponse.statusText\n    };\n    store.put(item);\n    transaction.oncomplete = () => {\n      console.debug(`[IndexedDB]    : ${url}`);\n    };\n    transaction.onerror = (event) => {\n      console.error(`[IndexedDB]    : ${url}`, event.target.error);\n    };\n  } catch (error) {\n    console.error(`[IndexedDB]   : ${url}`, error);\n  }\n};\n/**\n *    \n * @param {string} url URL \n * @returns {Promise<Response|null>}     null\n */\nconst getCachedResource = async (url) => {\n  if (!isAssetUrl(url)) {\n    return null;\n  }\n  try {\n    const db = await openDatabase();\n    const transaction = db.transaction(STORE_NAME, 'readonly');\n    const store = transaction.objectStore(STORE_NAME);\n    return new Promise((resolve) => {\n      const request = store.get(url);\n      request.onsuccess = () => {\n        const cachedItem = request.result;\n        if (!cachedItem) {\n          resolve(null);\n          return;\n        }\n        if (Date.now() - cachedItem.timestamp > ASSETS_MAX_AGE) {\n          console.debug(`[IndexedDB]  : ${url}`);\n          const deleteTransaction = db.transaction(STORE_NAME, 'readwrite');\n          const deleteStore = deleteTransaction.objectStore(STORE_NAME);\n          deleteStore.delete(url);\n          resolve(null);\n          return;\n        }\n        const cachedResponse = new Response(cachedItem.data, {\n          status: cachedItem.status,\n          statusText: cachedItem.statusText,\n          headers: cachedItem.headers\n        });\n        console.debug(`[IndexedDB]    : ${url}`);\n        resolve(cachedResponse);\n      };\n      request.onerror = (event) => {\n        console.error(`[IndexedDB]    : ${url}`, event.target.error);\n        resolve(null);\n      };\n    });\n  } catch (error) {\n    console.error(`[IndexedDB]     : ${url}`, error);\n    return null;\n  }\n};\n/**\n *       \n */\nconst deleteAllCaches = async () => {\n  console.debug('[Cache]  ...');\n  try {\n    if ('caches' in window) {\n      const cacheNames = await caches.keys();\n      await Promise.all(\n        cacheNames.map(cacheName => {\n          console.debug('[Cache]  Cache Storage:', cacheName);\n          return caches.delete(cacheName);\n        })\n      );\n    }\n    try {\n      const db = await openDatabase();\n      const transaction = db.transaction(STORE_NAME, 'readwrite');\n      const store = transaction.objectStore(STORE_NAME);\n      const index = store.index('timestamp');\n      const cutoffTime = Date.now() - ASSETS_MAX_AGE;\n      const range = IDBKeyRange.upperBound(cutoffTime);\n      const cursorRequest = index.openCursor(range);\n      cursorRequest.onsuccess = (event) => {\n        const cursor = event.target.result;\n        if (cursor) {\n          console.debug(`[IndexedDB]   : ${cursor.value.url}`);\n          cursor.delete();\n          cursor.continue();\n        }\n      };\n    } catch (e) {\n      console.error('[IndexedDB]     :', e);\n    }\n    localStorage.clear();\n    sessionStorage.clear();\n    console.debug('[Cache]   ');\n  } catch (error) {\n    console.error('[Cache]    :', error);\n  }\n};\n/**\n *   fetch   \n */\nconst setupFetchInterceptor = () => {\n  const originalFetch = window.fetch;\n  window.fetch = async function(resource, options = {}) {\n    const url = resource instanceof Request ? resource.url : resource;\n    if ((options.method && options.method !== 'GET') || !isAssetUrl(url)) {\n      return originalFetch(resource, options);\n    }\n    try {\n      const cachedResponse = await getCachedResource(url);\n      if (cachedResponse) {\n        return cachedResponse;\n      }\n      const response = await originalFetch(resource, options);\n      if (response && response.ok) {\n        cacheResource(url, response.clone());\n      }\n      return response;\n    } catch (error) {\n      console.error(`[IndexedDB]   fetch: ${url}`, error);\n      try {\n        const cachedResponse = await getCachedResource(url);\n        if (cachedResponse) {\n          console.debug(`[IndexedDB]     : ${url}`);\n          return cachedResponse;\n        }\n      } catch (e) {\n      }\n      throw error;\n    }\n  };\n};\n/**\n *   \n */\nconst init = () => {\n  console.info(\n    '%c[K-Connect]     /assets/',\n    'background: #d0bcff; color: #1c1b1f; padding: 4px 8px; border-radius: 4px; font-weight: bold;'\n  );\n  deleteAllCaches();\n  const metaNoCache = document.createElement('meta');\n  metaNoCache.httpEquiv = 'Cache-Control';\n  metaNoCache.content = 'no-cache, no-store, must-revalidate';\n  document.head.appendChild(metaNoCache);\n  const metaPragma = document.createElement('meta');\n  metaPragma.httpEquiv = 'Pragma';\n  metaPragma.content = 'no-cache';\n  document.head.appendChild(metaPragma);\n  const metaExpires = document.createElement('meta');\n  metaExpires.httpEquiv = 'Expires';\n  metaExpires.content = '0';\n  document.head.appendChild(metaExpires);\n  setupFetchInterceptor();\n  return true;\n};\nexport default {\n  init,\n  cacheResource,\n  getCachedResource,\n  deleteAllCaches\n}; ","import axios from 'axios';\nimport { SessionContext } from '../App';\n\n\nlet sessionContext = {\n  checkSessionStatus: () => true,\n  lastFetchTime: null,\n};\n\n\nexport const setSessionContext = (context) => {\n  sessionContext = context;\n};\n\n\nconst shouldMakeRequest = () => {\n\n\n  return true;\n};\n\nconst ProfileService = {\n    getProfile: async (username) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const endpoint = username ? `/api/profile/${username}` : '/api/profile';\n      const response = await axios.get(endpoint);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n      throw error;\n    }\n  },\n\n    getSettings: async () => {\n    if (!shouldMakeRequest()) {\n\n      return { \n        success: true, \n        settings: JSON.parse(localStorage.getItem('theme_settings') || '{}')\n      };\n    }\n    \n    try {\n      const response = await axios.get('/api/profile/settings');\n\n      if (response.data.success && response.data.settings) {\n        localStorage.setItem('theme_settings', JSON.stringify(response.data.settings));\n      }\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching settings:', error);\n      throw error;\n    }\n  },\n\n    updateSettings: async (settings) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const response = await axios.post('/api/profile/settings', settings, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating settings:', error);\n      throw error;\n    }\n  },\n\n    updateName: async (name) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      const response = await axios.post('/api/profile/update-name', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating name:', error);\n      throw error;\n    }\n  },\n\n    updateUsername: async (username) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('username', username);\n      const response = await axios.post('/api/profile/update-username', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating username:', error);\n      throw error;\n    }\n  },\n\n    updateAbout: async (about) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n            const formData = new FormData();\n      formData.append('about', about);\n      const response = await axios.post('/api/profile/update-about', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating about:', error);\n      throw error;\n    }\n  },\n\n    uploadAvatar: async (file) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('avatar', file);\n      \n      const response = await axios.post('/api/profile/upload-avatar', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.error('Error uploading avatar:', error);\n      throw error;\n    }\n  },\n\n    uploadBanner: async (file) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('banner', file);\n      \n      const response = await axios.post('/api/profile/upload-banner', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.error('Error uploading banner:', error);\n      throw error;\n    }\n  },\n\n    updateSocial: async (name, link) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('link', link);\n      const response = await axios.post('/api/profile/update-social', formData);\n      return response.data;\n    } catch (error) {\n      console.error('Error updating social:', error);\n      throw error;\n    }\n  },\n\n    deleteSocial: async (name) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      const response = await axios.post('/api/profile/delete-social', formData);\n      return response.data;\n    } catch (error) {\n      console.error('Error deleting social:', error);\n      throw error;\n    }\n  },\n\n    addSocial: async (name, link) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('link', link);\n      const response = await axios.post('/api/profile/update-social', formData);\n      return response.data;\n    } catch (error) {\n      console.error('Error adding social:', error);\n      throw error;\n    }\n  },\n\n    followUser: async (userId) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const response = await axios.post('/api/profile/follow', {\n        followed_id: userId\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error following user:', error);\n      throw error;\n    }\n  },\n  \n    unfollowUser: async (userId) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n                  const response = await axios.post('/api/profile/follow', {\n        followed_id: userId\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error unfollowing user:', error);\n      throw error;\n    }\n  },\n  \n    checkFollowing: async (userId) => {\n    if (!shouldMakeRequest()) {\n      return { success: false, message: 'Session expired' };\n    }\n    \n    try {\n      const response = await axios.get(`/api/profile/${userId}`);\n      return response.data.is_following;\n    } catch (error) {\n      console.error('Error checking follow status:', error);\n      return false;\n    }\n  }\n};\n\nexport default ProfileService;\n","import axios from 'axios';\n\nconst AuthService = {\n  login: async (credentials) => {\n    try {\n      const { usernameOrEmail, password } = credentials;\n      const response = await axios.post('/api/auth/login', { \n        username: usernameOrEmail, \n        password \n      }, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (response.data && response.data.success) {\n        if (response.data.token) {\n          localStorage.setItem('token', response.data.token);\n        }\n        \n        return {\n          success: true,\n          user: response.data.user || null,\n          token: response.data.token || null\n        };\n      } else {\n        return {\n          success: false,\n          error: response.data.error || '   '\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error.response?.data?.message || error.response?.data?.error || '    '\n      };\n    }\n  },\n\n  register: async (username, email, password) => {\n    try {\n      const userData = {\n        username: username,\n        email: email,\n        password: password\n      };\n      \n      console.log('   :', {\n        ...userData,\n        password: '[HIDDEN]'\n      });\n      \n      const response = await axios.post('/api/auth/register', userData, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      console.log('   :', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('  :', error);\n      if (error.response) {\n        console.error(' :', error.response.data);\n        console.error(' :', error.response.status);\n        console.error(' :', error.response.headers);\n      }\n      throw error;\n    }\n  },\n\n  checkAuth: async () => {\n    try {\n      console.log('Checking authentication status...');\n      \n      try {\n        const response = await axios.get('/api/auth/check', {\n          withCredentials: true,\n          headers: {\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        });\n        console.log('Auth check response:', response.data);\n        \n        if (response.data && response.data.sessionExists && !response.data.user) {\n          response.data.hasSession = true;\n        }\n        \n        window._lastAuthCheckResponse = response;\n        return response;\n      } catch (error) {\n        if (error.response && error.response.status === 404) {\n          console.log('Primary auth endpoint not found, trying fallback...');\n          const fallbackResponse = await axios.get('/api/check-auth', {\n            withCredentials: true,\n            headers: {\n              'Cache-Control': 'no-cache',\n              'Pragma': 'no-cache'\n            }\n          });\n          console.log('Fallback auth check response:', fallbackResponse.data);\n          \n          if (fallbackResponse.data && fallbackResponse.data.sessionExists && !fallbackResponse.data.user) {\n            fallbackResponse.data.hasSession = true;\n          }\n          \n          window._lastAuthCheckResponse = fallbackResponse;\n          return fallbackResponse;\n        }\n        throw error;\n      }\n    } catch (error) {\n      console.error('Error checking auth status:', error);\n      const errorResponse = {\n        data: {\n          isAuthenticated: false,\n          user: null,\n          error: error.response?.data?.error || error.message\n        }\n      };\n      window._lastAuthCheckResponse = errorResponse;\n      return errorResponse;\n    }\n  },\n\n  logout: async () => {\n    try {\n      const response = await axios.post('/api/auth/logout', {}, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      localStorage.removeItem('token');\n      \n      return response.data;\n    } catch (error) {\n      localStorage.removeItem('token');\n      \n      throw error;\n    }\n  },\n\n  registerProfile: async (profileData) => {\n    try {\n      console.log('  :', profileData);\n      \n      const response = await axios.post('/api/auth/register-profile', profileData, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': profileData instanceof FormData ? 'multipart/form-data' : 'application/json'\n        }\n      });\n      \n      console.log('    :', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('   :', error);\n      if (error.response) {\n        console.error(' :', error.response.data);\n      }\n      throw error;\n    }\n  }\n};\n\nexport default AuthService;\n","import React, { createContext, useState, useEffect, useContext, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { ThemeSettingsContext } from '../App';\n\n\nimport AuthService from '../services/AuthService';\nimport ProfileService from '../services/ProfileService';\n\n\nexport const AuthContext = createContext({\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  checkAuth: () => {},\n  login: () => {},\n  logout: () => {},\n  setUser: () => {}\n});\n\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n  \n  const savedAuthState = JSON.parse(localStorage.getItem('k-connect-auth-state') || 'null');\n  const savedUser = JSON.parse(localStorage.getItem('k-connect-user') || 'null');\n  \n  const [user, setUser] = useState(savedUser);\n  const [isAuthenticated, setIsAuthenticated] = useState(!!savedAuthState);\n  const [loading, setLoading] = useState(!savedAuthState);\n  const [error, setError] = useState(null);\n  const [lastAuthCheck, setLastAuthCheck] = useState(savedAuthState?.lastCheck || 0);\n  const navigate = useNavigate();\n  const themeContext = useContext(ThemeSettingsContext) || {};\n\n  \n  const logSessionState = () => {\n    console.log('Auth state:', { isAuthenticated, user });\n    console.log('Cookies:', document.cookie);\n    const authCookies = document.cookie\n      .split(';')\n      .map(cookie => cookie.trim())\n      .filter(cookie => \n        cookie.startsWith('connect.sid=') || \n        cookie.startsWith('jwt=') || \n        cookie.startsWith('auth=')\n      );\n    console.log('Auth cookies:', authCookies);\n  };\n\n  \n  const persistAuthState = (authState, userData) => {\n    if (authState) {\n      localStorage.setItem('k-connect-auth-state', JSON.stringify({\n        isAuthenticated: authState,\n        lastCheck: Date.now()\n      }));\n      \n      if (userData) {\n        localStorage.setItem('k-connect-user', JSON.stringify(userData));\n      }\n    } else {\n      \n      localStorage.removeItem('k-connect-auth-state');\n      localStorage.removeItem('k-connect-user');\n    }\n  };\n\n  \n  const checkAuth = useCallback(async (force = false) => {\n    try {\n      \n      \n      const now = Date.now();\n      if (!force && isAuthenticated && user && now - lastAuthCheck < 30 * 60 * 1000) { \n        console.log('Using cached authentication data from localStorage');\n        return user;\n      }\n      \n      \n      if (window._authCheckInProgress) {\n        console.log('Auth check already in progress, skipping duplicate check');\n        return user;\n      }\n      \n      \n      window._authCheckInProgress = true;\n      \n      setLoading(true);\n      console.log('Checking authentication...');\n      \n      \n      const response = await AuthService.checkAuth();\n      console.log('Auth check response:', response);\n      \n      \n      if (response && response.data) {\n        if (response.data.isAuthenticated && response.data.user) {\n          const userData = response.data.user;\n          console.log('User authenticated:', userData);\n          setUser(userData);\n          setIsAuthenticated(true);\n          setLastAuthCheck(now); \n          \n          \n          persistAuthState(true, userData);\n          \n          window._authCheckInProgress = false;\n          return userData;\n        } else if (response.data.needsProfileSetup || response.data.hasSession) {\n          \n          console.log('User needs profile setup or has session but no profile');\n          setUser(null);\n          setIsAuthenticated(true); \n          persistAuthState(true, null);\n          \n          \n          if (!window.location.pathname.includes('/register/profile')) {\n            console.log('Redirecting to profile registration page');\n            navigate('/register/profile', { replace: true });\n          }\n          \n          window._authCheckInProgress = false;\n          return null;\n        } else {\n          console.log('User not authenticated');\n          setUser(null);\n          setIsAuthenticated(false);\n          persistAuthState(false);\n          window._authCheckInProgress = false;\n          \n          \n          const publicPages = [\n            '/login',\n            '/register',\n            '/auth_elem',\n            '/rules',\n            '/privacy-policy',\n            '/terms-of-service',\n            '/about',\n            '/bugs',\n            '/post',\n            '/profile'\n          ];\n          \n          \n          const isPublicPage = publicPages.some(page => \n            window.location.pathname.includes(page)\n          );\n          \n          \n          \n          if (force && !isPublicPage) {\n            console.log('Redirecting to login page');\n            navigate('/login', { replace: true });\n          }\n        }\n      } else {\n        console.warn('Invalid response from auth check:', response);\n        setUser(null);\n        setIsAuthenticated(false);\n        persistAuthState(false);\n        window._authCheckInProgress = false;\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Auth check error:', error);\n      setUser(null);\n      setIsAuthenticated(false);\n      persistAuthState(false);\n      window._authCheckInProgress = false;\n    } finally {\n      setLoading(false);\n      window._authCheckInProgress = false;\n    }\n  }, [lastAuthCheck, user, navigate, isAuthenticated]);\n\n  \n  const login = useCallback(async (credentials) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await AuthService.login(credentials);\n      \n      if (response.success) {\n        \n        setUser(response.user);\n        setIsAuthenticated(true);\n        \n        \n        persistAuthState(true, response.user);\n        \n        \n        if (themeContext && themeContext.loadThemeSettings) {\n          themeContext.loadThemeSettings();\n        }\n        \n        \n        if (!credentials.preventRedirect) {\n          console.log('    ...');\n          \n          window.location.href = '/';\n          return { success: true, user: response.user };\n        }\n        \n        return { success: true, user: response.user };\n      } else {\n        \n        if (response.ban_info) {\n          console.log('User account is banned:', response.ban_info);\n          setError({ \n            message: ' ', \n            ban_info: response.ban_info \n          });\n          return { \n            success: false, \n            error: ' ', \n            ban_info: response.ban_info \n          };\n        }\n        \n        \n        const errorMessage = response.error || '    ';\n        setError({ message: errorMessage });\n        return { success: false, error: errorMessage };\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      \n      \n      if (error.response?.data?.ban_info) {\n        const banInfo = error.response.data.ban_info;\n        setError({ \n          message: ' ', \n          ban_info: banInfo \n        });\n        return { \n          success: false, \n          error: ' ', \n          ban_info: banInfo \n        };\n      }\n      \n      const errorMessage = error.response?.data?.message || '    ';\n      setError({ message: errorMessage });\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  }, [navigate, themeContext]);\n\n  \n  const logout = useCallback(async () => {\n    try {\n      setLoading(true);\n      \n      \n      await AuthService.logout();\n      \n      \n      localStorage.removeItem('token');\n      persistAuthState(false);\n      \n      \n      setUser(null);\n      setIsAuthenticated(false);\n      setLastAuthCheck(0);\n      \n      \n      if (themeContext && themeContext.loadThemeSettings) {\n        themeContext.loadThemeSettings(true);\n      }\n      \n      \n      navigate('/login', { replace: true });\n      \n    } catch (error) {\n      console.error('Logout error:', error);\n      \n      localStorage.removeItem('token');\n      persistAuthState(false);\n      setUser(null);\n      setIsAuthenticated(false);\n    } finally {\n      setLoading(false);\n    }\n  }, [navigate, themeContext]);\n\n  \n  const registerProfile = async (profileData) => {\n    try {\n      setLoading(true);\n      const response = await AuthService.registerProfile(profileData);\n      \n      if (response.success && response.user) {\n        \n        setUser(response.user);\n        setIsAuthenticated(true);\n        \n        \n        persistAuthState(true, response.user);\n        \n        \n        navigate('/', { replace: true });\n        return { success: true };\n      } else {\n        const errorMessage = response.error || '   ';\n        setError({ message: errorMessage });\n        return { success: false, error: errorMessage };\n      }\n    } catch (error) {\n      console.error('Profile registration error:', error);\n      const errorMessage = error.response?.data?.error || '   ';\n      setError({ message: errorMessage });\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  \n  useEffect(() => {\n    const initAuth = async () => {\n      \n      if (savedAuthState && savedUser) {\n        setUser(savedUser);\n        setIsAuthenticated(true);\n        setLoading(false);\n        \n        \n        setTimeout(() => {\n          checkAuth(false).catch(console.error);\n        }, 1000);\n      } else {\n        \n        try {\n          await checkAuth(false);\n        } catch (error) {\n          console.error('Initial auth check failed:', error);\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n    \n    initAuth();\n  }, []);\n\n  \n  useEffect(() => {\n    \n    window._authCheckInProgress = false;\n    \n    \n    const interceptor = axios.interceptors.response.use(\n      response => response,\n      error => {\n        \n        if (error.response && error.response.status === 401) {\n          \n          \n          if (isAuthenticated) {\n            setUser(null);\n            setIsAuthenticated(false);\n            persistAuthState(false);\n            \n            \n            const currentPath = window.location.pathname;\n            const publicPages = ['/login', '/register', '/rules', '/about', '/privacy-policy', '/terms-of-service', '/bugs'];\n            const isPublicPage = publicPages.some(page => currentPath.includes(page));\n            \n            if (!isPublicPage) {\n              navigate('/login', { replace: true });\n            }\n          }\n        }\n        return Promise.reject(error);\n      }\n    );\n    \n    return () => {\n      \n      axios.interceptors.response.eject(interceptor);\n    };\n  }, [isAuthenticated, navigate]);\n\n  \n  useEffect(() => {\n    console.log('Auth state changed:', { isAuthenticated, loading, user });\n    \n    if (isAuthenticated && user) {\n      persistAuthState(true, user);\n    }\n  }, [isAuthenticated, loading, user]);\n\n  \n  const contextValue = {\n    user,\n    isAuthenticated,\n    loading,\n    error,\n    login,\n    logout,\n    checkAuth,\n    registerProfile,\n    setUser\n  };\n\n  return (\n    <AuthContext.Provider value={contextValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n}; ","'use client';\n\nimport { createElement, forwardRef, useState, useEffect } from 'react';\n\nconst defaultIconDimensions = Object.freeze(\n  {\n    left: 0,\n    top: 0,\n    width: 16,\n    height: 16\n  }\n);\nconst defaultIconTransformations = Object.freeze({\n  rotate: 0,\n  vFlip: false,\n  hFlip: false\n});\nconst defaultIconProps = Object.freeze({\n  ...defaultIconDimensions,\n  ...defaultIconTransformations\n});\nconst defaultExtendedIconProps = Object.freeze({\n  ...defaultIconProps,\n  body: \"\",\n  hidden: false\n});\n\nfunction mergeIconTransformations(obj1, obj2) {\n  const result = {};\n  if (!obj1.hFlip !== !obj2.hFlip) {\n    result.hFlip = true;\n  }\n  if (!obj1.vFlip !== !obj2.vFlip) {\n    result.vFlip = true;\n  }\n  const rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;\n  if (rotate) {\n    result.rotate = rotate;\n  }\n  return result;\n}\n\nfunction mergeIconData(parent, child) {\n  const result = mergeIconTransformations(parent, child);\n  for (const key in defaultExtendedIconProps) {\n    if (key in defaultIconTransformations) {\n      if (key in parent && !(key in result)) {\n        result[key] = defaultIconTransformations[key];\n      }\n    } else if (key in child) {\n      result[key] = child[key];\n    } else if (key in parent) {\n      result[key] = parent[key];\n    }\n  }\n  return result;\n}\n\nfunction getIconsTree(data, names) {\n  const icons = data.icons;\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  const resolved = /* @__PURE__ */ Object.create(null);\n  function resolve(name) {\n    if (icons[name]) {\n      return resolved[name] = [];\n    }\n    if (!(name in resolved)) {\n      resolved[name] = null;\n      const parent = aliases[name] && aliases[name].parent;\n      const value = parent && resolve(parent);\n      if (value) {\n        resolved[name] = [parent].concat(value);\n      }\n    }\n    return resolved[name];\n  }\n  (Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve);\n  return resolved;\n}\n\nfunction internalGetIconData(data, name, tree) {\n  const icons = data.icons;\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  let currentProps = {};\n  function parse(name2) {\n    currentProps = mergeIconData(\n      icons[name2] || aliases[name2],\n      currentProps\n    );\n  }\n  parse(name);\n  tree.forEach(parse);\n  return mergeIconData(data, currentProps);\n}\n\nfunction parseIconSet(data, callback) {\n  const names = [];\n  if (typeof data !== \"object\" || typeof data.icons !== \"object\") {\n    return names;\n  }\n  if (data.not_found instanceof Array) {\n    data.not_found.forEach((name) => {\n      callback(name, null);\n      names.push(name);\n    });\n  }\n  const tree = getIconsTree(data);\n  for (const name in tree) {\n    const item = tree[name];\n    if (item) {\n      callback(name, internalGetIconData(data, name, item));\n      names.push(name);\n    }\n  }\n  return names;\n}\n\nconst optionalPropertyDefaults = {\n  provider: \"\",\n  aliases: {},\n  not_found: {},\n  ...defaultIconDimensions\n};\nfunction checkOptionalProps(item, defaults) {\n  for (const prop in defaults) {\n    if (prop in item && typeof item[prop] !== typeof defaults[prop]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction quicklyValidateIconSet(obj) {\n  if (typeof obj !== \"object\" || obj === null) {\n    return null;\n  }\n  const data = obj;\n  if (typeof data.prefix !== \"string\" || !obj.icons || typeof obj.icons !== \"object\") {\n    return null;\n  }\n  if (!checkOptionalProps(obj, optionalPropertyDefaults)) {\n    return null;\n  }\n  const icons = data.icons;\n  for (const name in icons) {\n    const icon = icons[name];\n    if (\n      // Name cannot be empty\n      !name || // Must have body\n      typeof icon.body !== \"string\" || // Check other props\n      !checkOptionalProps(\n        icon,\n        defaultExtendedIconProps\n      )\n    ) {\n      return null;\n    }\n  }\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  for (const name in aliases) {\n    const icon = aliases[name];\n    const parent = icon.parent;\n    if (\n      // Name cannot be empty\n      !name || // Parent must be set and point to existing icon\n      typeof parent !== \"string\" || !icons[parent] && !aliases[parent] || // Check other props\n      !checkOptionalProps(\n        icon,\n        defaultExtendedIconProps\n      )\n    ) {\n      return null;\n    }\n  }\n  return data;\n}\n\nconst matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\nconst stringToIcon = (value, validate, allowSimpleName, provider = \"\") => {\n  const colonSeparated = value.split(\":\");\n  if (value.slice(0, 1) === \"@\") {\n    if (colonSeparated.length < 2 || colonSeparated.length > 3) {\n      return null;\n    }\n    provider = colonSeparated.shift().slice(1);\n  }\n  if (colonSeparated.length > 3 || !colonSeparated.length) {\n    return null;\n  }\n  if (colonSeparated.length > 1) {\n    const name2 = colonSeparated.pop();\n    const prefix = colonSeparated.pop();\n    const result = {\n      // Allow provider without '@': \"provider:prefix:name\"\n      provider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n      prefix,\n      name: name2\n    };\n    return validate && !validateIconName(result) ? null : result;\n  }\n  const name = colonSeparated[0];\n  const dashSeparated = name.split(\"-\");\n  if (dashSeparated.length > 1) {\n    const result = {\n      provider,\n      prefix: dashSeparated.shift(),\n      name: dashSeparated.join(\"-\")\n    };\n    return validate && !validateIconName(result) ? null : result;\n  }\n  if (allowSimpleName && provider === \"\") {\n    const result = {\n      provider,\n      prefix: \"\",\n      name\n    };\n    return validate && !validateIconName(result, allowSimpleName) ? null : result;\n  }\n  return null;\n};\nconst validateIconName = (icon, allowSimpleName) => {\n  if (!icon) {\n    return false;\n  }\n  return !!// Check prefix: cannot be empty, unless allowSimpleName is enabled\n  // Check name: cannot be empty\n  ((allowSimpleName && icon.prefix === \"\" || !!icon.prefix) && !!icon.name);\n};\n\nconst dataStorage = /* @__PURE__ */ Object.create(null);\nfunction newStorage(provider, prefix) {\n  return {\n    provider,\n    prefix,\n    icons: /* @__PURE__ */ Object.create(null),\n    missing: /* @__PURE__ */ new Set()\n  };\n}\nfunction getStorage(provider, prefix) {\n  const providerStorage = dataStorage[provider] || (dataStorage[provider] = /* @__PURE__ */ Object.create(null));\n  return providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));\n}\nfunction addIconSet(storage, data) {\n  if (!quicklyValidateIconSet(data)) {\n    return [];\n  }\n  return parseIconSet(data, (name, icon) => {\n    if (icon) {\n      storage.icons[name] = icon;\n    } else {\n      storage.missing.add(name);\n    }\n  });\n}\nfunction addIconToStorage(storage, name, icon) {\n  try {\n    if (typeof icon.body === \"string\") {\n      storage.icons[name] = { ...icon };\n      return true;\n    }\n  } catch (err) {\n  }\n  return false;\n}\nfunction listIcons(provider, prefix) {\n  let allIcons = [];\n  const providers = typeof provider === \"string\" ? [provider] : Object.keys(dataStorage);\n  providers.forEach((provider2) => {\n    const prefixes = typeof provider2 === \"string\" && typeof prefix === \"string\" ? [prefix] : Object.keys(dataStorage[provider2] || {});\n    prefixes.forEach((prefix2) => {\n      const storage = getStorage(provider2, prefix2);\n      allIcons = allIcons.concat(\n        Object.keys(storage.icons).map(\n          (name) => (provider2 !== \"\" ? \"@\" + provider2 + \":\" : \"\") + prefix2 + \":\" + name\n        )\n      );\n    });\n  });\n  return allIcons;\n}\n\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n  if (typeof allow === \"boolean\") {\n    simpleNames = allow;\n  }\n  return simpleNames;\n}\nfunction getIconData(name) {\n  const icon = typeof name === \"string\" ? stringToIcon(name, true, simpleNames) : name;\n  if (icon) {\n    const storage = getStorage(icon.provider, icon.prefix);\n    const iconName = icon.name;\n    return storage.icons[iconName] || (storage.missing.has(iconName) ? null : void 0);\n  }\n}\nfunction addIcon(name, data) {\n  const icon = stringToIcon(name, true, simpleNames);\n  if (!icon) {\n    return false;\n  }\n  const storage = getStorage(icon.provider, icon.prefix);\n  if (data) {\n    return addIconToStorage(storage, icon.name, data);\n  } else {\n    storage.missing.add(icon.name);\n    return true;\n  }\n}\nfunction addCollection(data, provider) {\n  if (typeof data !== \"object\") {\n    return false;\n  }\n  if (typeof provider !== \"string\") {\n    provider = data.provider || \"\";\n  }\n  if (simpleNames && !provider && !data.prefix) {\n    let added = false;\n    if (quicklyValidateIconSet(data)) {\n      data.prefix = \"\";\n      parseIconSet(data, (name, icon) => {\n        if (addIcon(name, icon)) {\n          added = true;\n        }\n      });\n    }\n    return added;\n  }\n  const prefix = data.prefix;\n  if (!validateIconName({\n    prefix,\n    name: \"a\"\n  })) {\n    return false;\n  }\n  const storage = getStorage(provider, prefix);\n  return !!addIconSet(storage, data);\n}\nfunction iconLoaded(name) {\n  return !!getIconData(name);\n}\nfunction getIcon(name) {\n  const result = getIconData(name);\n  return result ? {\n    ...defaultIconProps,\n    ...result\n  } : result;\n}\n\nconst defaultIconSizeCustomisations = Object.freeze({\n  width: null,\n  height: null\n});\nconst defaultIconCustomisations = Object.freeze({\n  // Dimensions\n  ...defaultIconSizeCustomisations,\n  // Transformations\n  ...defaultIconTransformations\n});\n\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\nfunction calculateSize(size, ratio, precision) {\n  if (ratio === 1) {\n    return size;\n  }\n  precision = precision || 100;\n  if (typeof size === \"number\") {\n    return Math.ceil(size * ratio * precision) / precision;\n  }\n  if (typeof size !== \"string\") {\n    return size;\n  }\n  const oldParts = size.split(unitsSplit);\n  if (oldParts === null || !oldParts.length) {\n    return size;\n  }\n  const newParts = [];\n  let code = oldParts.shift();\n  let isNumber = unitsTest.test(code);\n  while (true) {\n    if (isNumber) {\n      const num = parseFloat(code);\n      if (isNaN(num)) {\n        newParts.push(code);\n      } else {\n        newParts.push(Math.ceil(num * ratio * precision) / precision);\n      }\n    } else {\n      newParts.push(code);\n    }\n    code = oldParts.shift();\n    if (code === void 0) {\n      return newParts.join(\"\");\n    }\n    isNumber = !isNumber;\n  }\n}\n\nfunction splitSVGDefs(content, tag = \"defs\") {\n  let defs = \"\";\n  const index = content.indexOf(\"<\" + tag);\n  while (index >= 0) {\n    const start = content.indexOf(\">\", index);\n    const end = content.indexOf(\"</\" + tag);\n    if (start === -1 || end === -1) {\n      break;\n    }\n    const endEnd = content.indexOf(\">\", end);\n    if (endEnd === -1) {\n      break;\n    }\n    defs += content.slice(start + 1, end).trim();\n    content = content.slice(0, index).trim() + content.slice(endEnd + 1);\n  }\n  return {\n    defs,\n    content\n  };\n}\nfunction mergeDefsAndContent(defs, content) {\n  return defs ? \"<defs>\" + defs + \"</defs>\" + content : content;\n}\nfunction wrapSVGContent(body, start, end) {\n  const split = splitSVGDefs(body);\n  return mergeDefsAndContent(split.defs, start + split.content + end);\n}\n\nconst isUnsetKeyword = (value) => value === \"unset\" || value === \"undefined\" || value === \"none\";\nfunction iconToSVG(icon, customisations) {\n  const fullIcon = {\n    ...defaultIconProps,\n    ...icon\n  };\n  const fullCustomisations = {\n    ...defaultIconCustomisations,\n    ...customisations\n  };\n  const box = {\n    left: fullIcon.left,\n    top: fullIcon.top,\n    width: fullIcon.width,\n    height: fullIcon.height\n  };\n  let body = fullIcon.body;\n  [fullIcon, fullCustomisations].forEach((props) => {\n    const transformations = [];\n    const hFlip = props.hFlip;\n    const vFlip = props.vFlip;\n    let rotation = props.rotate;\n    if (hFlip) {\n      if (vFlip) {\n        rotation += 2;\n      } else {\n        transformations.push(\n          \"translate(\" + (box.width + box.left).toString() + \" \" + (0 - box.top).toString() + \")\"\n        );\n        transformations.push(\"scale(-1 1)\");\n        box.top = box.left = 0;\n      }\n    } else if (vFlip) {\n      transformations.push(\n        \"translate(\" + (0 - box.left).toString() + \" \" + (box.height + box.top).toString() + \")\"\n      );\n      transformations.push(\"scale(1 -1)\");\n      box.top = box.left = 0;\n    }\n    let tempValue;\n    if (rotation < 0) {\n      rotation -= Math.floor(rotation / 4) * 4;\n    }\n    rotation = rotation % 4;\n    switch (rotation) {\n      case 1:\n        tempValue = box.height / 2 + box.top;\n        transformations.unshift(\n          \"rotate(90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\"\n        );\n        break;\n      case 2:\n        transformations.unshift(\n          \"rotate(180 \" + (box.width / 2 + box.left).toString() + \" \" + (box.height / 2 + box.top).toString() + \")\"\n        );\n        break;\n      case 3:\n        tempValue = box.width / 2 + box.left;\n        transformations.unshift(\n          \"rotate(-90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\"\n        );\n        break;\n    }\n    if (rotation % 2 === 1) {\n      if (box.left !== box.top) {\n        tempValue = box.left;\n        box.left = box.top;\n        box.top = tempValue;\n      }\n      if (box.width !== box.height) {\n        tempValue = box.width;\n        box.width = box.height;\n        box.height = tempValue;\n      }\n    }\n    if (transformations.length) {\n      body = wrapSVGContent(\n        body,\n        '<g transform=\"' + transformations.join(\" \") + '\">',\n        \"</g>\"\n      );\n    }\n  });\n  const customisationsWidth = fullCustomisations.width;\n  const customisationsHeight = fullCustomisations.height;\n  const boxWidth = box.width;\n  const boxHeight = box.height;\n  let width;\n  let height;\n  if (customisationsWidth === null) {\n    height = customisationsHeight === null ? \"1em\" : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n    width = calculateSize(height, boxWidth / boxHeight);\n  } else {\n    width = customisationsWidth === \"auto\" ? boxWidth : customisationsWidth;\n    height = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n  }\n  const attributes = {};\n  const setAttr = (prop, value) => {\n    if (!isUnsetKeyword(value)) {\n      attributes[prop] = value.toString();\n    }\n  };\n  setAttr(\"width\", width);\n  setAttr(\"height\", height);\n  const viewBox = [box.left, box.top, boxWidth, boxHeight];\n  attributes.viewBox = viewBox.join(\" \");\n  return {\n    attributes,\n    viewBox,\n    body\n  };\n}\n\nconst regex = /\\sid=\"(\\S+)\"/g;\nconst randomPrefix = \"IconifyId\" + Date.now().toString(16) + (Math.random() * 16777216 | 0).toString(16);\nlet counter = 0;\nfunction replaceIDs(body, prefix = randomPrefix) {\n  const ids = [];\n  let match;\n  while (match = regex.exec(body)) {\n    ids.push(match[1]);\n  }\n  if (!ids.length) {\n    return body;\n  }\n  const suffix = \"suffix\" + (Math.random() * 16777216 | Date.now()).toString(16);\n  ids.forEach((id) => {\n    const newID = typeof prefix === \"function\" ? prefix(id) : prefix + (counter++).toString();\n    const escapedID = id.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n    body = body.replace(\n      // Allowed characters before id: [#;\"]\n      // Allowed characters after id: [)\"], .[a-z]\n      new RegExp('([#;\"])(' + escapedID + ')([\")]|\\\\.[a-z])', \"g\"),\n      \"$1\" + newID + suffix + \"$3\"\n    );\n  });\n  body = body.replace(new RegExp(suffix, \"g\"), \"\");\n  return body;\n}\n\nconst storage = /* @__PURE__ */ Object.create(null);\nfunction setAPIModule(provider, item) {\n  storage[provider] = item;\n}\nfunction getAPIModule(provider) {\n  return storage[provider] || storage[\"\"];\n}\n\nfunction createAPIConfig(source) {\n  let resources;\n  if (typeof source.resources === \"string\") {\n    resources = [source.resources];\n  } else {\n    resources = source.resources;\n    if (!(resources instanceof Array) || !resources.length) {\n      return null;\n    }\n  }\n  const result = {\n    // API hosts\n    resources,\n    // Root path\n    path: source.path || \"/\",\n    // URL length limit\n    maxURL: source.maxURL || 500,\n    // Timeout before next host is used.\n    rotate: source.rotate || 750,\n    // Timeout before failing query.\n    timeout: source.timeout || 5e3,\n    // Randomise default API end point.\n    random: source.random === true,\n    // Start index\n    index: source.index || 0,\n    // Receive data after time out (used if time out kicks in first, then API module sends data anyway).\n    dataAfterTimeout: source.dataAfterTimeout !== false\n  };\n  return result;\n}\nconst configStorage = /* @__PURE__ */ Object.create(null);\nconst fallBackAPISources = [\n  \"https://api.simplesvg.com\",\n  \"https://api.unisvg.com\"\n];\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) {\n  if (fallBackAPISources.length === 1) {\n    fallBackAPI.push(fallBackAPISources.shift());\n  } else {\n    if (Math.random() > 0.5) {\n      fallBackAPI.push(fallBackAPISources.shift());\n    } else {\n      fallBackAPI.push(fallBackAPISources.pop());\n    }\n  }\n}\nconfigStorage[\"\"] = createAPIConfig({\n  resources: [\"https://api.iconify.design\"].concat(fallBackAPI)\n});\nfunction addAPIProvider(provider, customConfig) {\n  const config = createAPIConfig(customConfig);\n  if (config === null) {\n    return false;\n  }\n  configStorage[provider] = config;\n  return true;\n}\nfunction getAPIConfig(provider) {\n  return configStorage[provider];\n}\nfunction listAPIProviders() {\n  return Object.keys(configStorage);\n}\n\nconst detectFetch = () => {\n  let callback;\n  try {\n    callback = fetch;\n    if (typeof callback === \"function\") {\n      return callback;\n    }\n  } catch (err) {\n  }\n};\nlet fetchModule = detectFetch();\nfunction setFetch(fetch2) {\n  fetchModule = fetch2;\n}\nfunction getFetch() {\n  return fetchModule;\n}\nfunction calculateMaxLength(provider, prefix) {\n  const config = getAPIConfig(provider);\n  if (!config) {\n    return 0;\n  }\n  let result;\n  if (!config.maxURL) {\n    result = 0;\n  } else {\n    let maxHostLength = 0;\n    config.resources.forEach((item) => {\n      const host = item;\n      maxHostLength = Math.max(maxHostLength, host.length);\n    });\n    const url = prefix + \".json?icons=\";\n    result = config.maxURL - maxHostLength - config.path.length - url.length;\n  }\n  return result;\n}\nfunction shouldAbort(status) {\n  return status === 404;\n}\nconst prepare = (provider, prefix, icons) => {\n  const results = [];\n  const maxLength = calculateMaxLength(provider, prefix);\n  const type = \"icons\";\n  let item = {\n    type,\n    provider,\n    prefix,\n    icons: []\n  };\n  let length = 0;\n  icons.forEach((name, index) => {\n    length += name.length + 1;\n    if (length >= maxLength && index > 0) {\n      results.push(item);\n      item = {\n        type,\n        provider,\n        prefix,\n        icons: []\n      };\n      length = name.length;\n    }\n    item.icons.push(name);\n  });\n  results.push(item);\n  return results;\n};\nfunction getPath(provider) {\n  if (typeof provider === \"string\") {\n    const config = getAPIConfig(provider);\n    if (config) {\n      return config.path;\n    }\n  }\n  return \"/\";\n}\nconst send = (host, params, callback) => {\n  if (!fetchModule) {\n    callback(\"abort\", 424);\n    return;\n  }\n  let path = getPath(params.provider);\n  switch (params.type) {\n    case \"icons\": {\n      const prefix = params.prefix;\n      const icons = params.icons;\n      const iconsList = icons.join(\",\");\n      const urlParams = new URLSearchParams({\n        icons: iconsList\n      });\n      path += prefix + \".json?\" + urlParams.toString();\n      break;\n    }\n    case \"custom\": {\n      const uri = params.uri;\n      path += uri.slice(0, 1) === \"/\" ? uri.slice(1) : uri;\n      break;\n    }\n    default:\n      callback(\"abort\", 400);\n      return;\n  }\n  let defaultError = 503;\n  fetchModule(host + path).then((response) => {\n    const status = response.status;\n    if (status !== 200) {\n      setTimeout(() => {\n        callback(shouldAbort(status) ? \"abort\" : \"next\", status);\n      });\n      return;\n    }\n    defaultError = 501;\n    return response.json();\n  }).then((data) => {\n    if (typeof data !== \"object\" || data === null) {\n      setTimeout(() => {\n        if (data === 404) {\n          callback(\"abort\", data);\n        } else {\n          callback(\"next\", defaultError);\n        }\n      });\n      return;\n    }\n    setTimeout(() => {\n      callback(\"success\", data);\n    });\n  }).catch(() => {\n    callback(\"next\", defaultError);\n  });\n};\nconst fetchAPIModule = {\n  prepare,\n  send\n};\n\nfunction sortIcons(icons) {\n  const result = {\n    loaded: [],\n    missing: [],\n    pending: []\n  };\n  const storage = /* @__PURE__ */ Object.create(null);\n  icons.sort((a, b) => {\n    if (a.provider !== b.provider) {\n      return a.provider.localeCompare(b.provider);\n    }\n    if (a.prefix !== b.prefix) {\n      return a.prefix.localeCompare(b.prefix);\n    }\n    return a.name.localeCompare(b.name);\n  });\n  let lastIcon = {\n    provider: \"\",\n    prefix: \"\",\n    name: \"\"\n  };\n  icons.forEach((icon) => {\n    if (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) {\n      return;\n    }\n    lastIcon = icon;\n    const provider = icon.provider;\n    const prefix = icon.prefix;\n    const name = icon.name;\n    const providerStorage = storage[provider] || (storage[provider] = /* @__PURE__ */ Object.create(null));\n    const localStorage = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));\n    let list;\n    if (name in localStorage.icons) {\n      list = result.loaded;\n    } else if (prefix === \"\" || localStorage.missing.has(name)) {\n      list = result.missing;\n    } else {\n      list = result.pending;\n    }\n    const item = {\n      provider,\n      prefix,\n      name\n    };\n    list.push(item);\n  });\n  return result;\n}\n\nfunction removeCallback(storages, id) {\n  storages.forEach((storage) => {\n    const items = storage.loaderCallbacks;\n    if (items) {\n      storage.loaderCallbacks = items.filter((row) => row.id !== id);\n    }\n  });\n}\nfunction updateCallbacks(storage) {\n  if (!storage.pendingCallbacksFlag) {\n    storage.pendingCallbacksFlag = true;\n    setTimeout(() => {\n      storage.pendingCallbacksFlag = false;\n      const items = storage.loaderCallbacks ? storage.loaderCallbacks.slice(0) : [];\n      if (!items.length) {\n        return;\n      }\n      let hasPending = false;\n      const provider = storage.provider;\n      const prefix = storage.prefix;\n      items.forEach((item) => {\n        const icons = item.icons;\n        const oldLength = icons.pending.length;\n        icons.pending = icons.pending.filter((icon) => {\n          if (icon.prefix !== prefix) {\n            return true;\n          }\n          const name = icon.name;\n          if (storage.icons[name]) {\n            icons.loaded.push({\n              provider,\n              prefix,\n              name\n            });\n          } else if (storage.missing.has(name)) {\n            icons.missing.push({\n              provider,\n              prefix,\n              name\n            });\n          } else {\n            hasPending = true;\n            return true;\n          }\n          return false;\n        });\n        if (icons.pending.length !== oldLength) {\n          if (!hasPending) {\n            removeCallback([storage], item.id);\n          }\n          item.callback(\n            icons.loaded.slice(0),\n            icons.missing.slice(0),\n            icons.pending.slice(0),\n            item.abort\n          );\n        }\n      });\n    });\n  }\n}\nlet idCounter = 0;\nfunction storeCallback(callback, icons, pendingSources) {\n  const id = idCounter++;\n  const abort = removeCallback.bind(null, pendingSources, id);\n  if (!icons.pending.length) {\n    return abort;\n  }\n  const item = {\n    id,\n    icons,\n    callback,\n    abort\n  };\n  pendingSources.forEach((storage) => {\n    (storage.loaderCallbacks || (storage.loaderCallbacks = [])).push(item);\n  });\n  return abort;\n}\n\nfunction listToIcons(list, validate = true, simpleNames = false) {\n  const result = [];\n  list.forEach((item) => {\n    const icon = typeof item === \"string\" ? stringToIcon(item, validate, simpleNames) : item;\n    if (icon) {\n      result.push(icon);\n    }\n  });\n  return result;\n}\n\n// src/config.ts\nvar defaultConfig = {\n  resources: [],\n  index: 0,\n  timeout: 2e3,\n  rotate: 750,\n  random: false,\n  dataAfterTimeout: false\n};\n\n// src/query.ts\nfunction sendQuery(config, payload, query, done) {\n  const resourcesCount = config.resources.length;\n  const startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;\n  let resources;\n  if (config.random) {\n    let list = config.resources.slice(0);\n    resources = [];\n    while (list.length > 1) {\n      const nextIndex = Math.floor(Math.random() * list.length);\n      resources.push(list[nextIndex]);\n      list = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n    }\n    resources = resources.concat(list);\n  } else {\n    resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n  }\n  const startTime = Date.now();\n  let status = \"pending\";\n  let queriesSent = 0;\n  let lastError;\n  let timer = null;\n  let queue = [];\n  let doneCallbacks = [];\n  if (typeof done === \"function\") {\n    doneCallbacks.push(done);\n  }\n  function resetTimer() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  }\n  function abort() {\n    if (status === \"pending\") {\n      status = \"aborted\";\n    }\n    resetTimer();\n    queue.forEach((item) => {\n      if (item.status === \"pending\") {\n        item.status = \"aborted\";\n      }\n    });\n    queue = [];\n  }\n  function subscribe(callback, overwrite) {\n    if (overwrite) {\n      doneCallbacks = [];\n    }\n    if (typeof callback === \"function\") {\n      doneCallbacks.push(callback);\n    }\n  }\n  function getQueryStatus() {\n    return {\n      startTime,\n      payload,\n      status,\n      queriesSent,\n      queriesPending: queue.length,\n      subscribe,\n      abort\n    };\n  }\n  function failQuery() {\n    status = \"failed\";\n    doneCallbacks.forEach((callback) => {\n      callback(void 0, lastError);\n    });\n  }\n  function clearQueue() {\n    queue.forEach((item) => {\n      if (item.status === \"pending\") {\n        item.status = \"aborted\";\n      }\n    });\n    queue = [];\n  }\n  function moduleResponse(item, response, data) {\n    const isError = response !== \"success\";\n    queue = queue.filter((queued) => queued !== item);\n    switch (status) {\n      case \"pending\":\n        break;\n      case \"failed\":\n        if (isError || !config.dataAfterTimeout) {\n          return;\n        }\n        break;\n      default:\n        return;\n    }\n    if (response === \"abort\") {\n      lastError = data;\n      failQuery();\n      return;\n    }\n    if (isError) {\n      lastError = data;\n      if (!queue.length) {\n        if (!resources.length) {\n          failQuery();\n        } else {\n          execNext();\n        }\n      }\n      return;\n    }\n    resetTimer();\n    clearQueue();\n    if (!config.random) {\n      const index = config.resources.indexOf(item.resource);\n      if (index !== -1 && index !== config.index) {\n        config.index = index;\n      }\n    }\n    status = \"completed\";\n    doneCallbacks.forEach((callback) => {\n      callback(data);\n    });\n  }\n  function execNext() {\n    if (status !== \"pending\") {\n      return;\n    }\n    resetTimer();\n    const resource = resources.shift();\n    if (resource === void 0) {\n      if (queue.length) {\n        timer = setTimeout(() => {\n          resetTimer();\n          if (status === \"pending\") {\n            clearQueue();\n            failQuery();\n          }\n        }, config.timeout);\n        return;\n      }\n      failQuery();\n      return;\n    }\n    const item = {\n      status: \"pending\",\n      resource,\n      callback: (status2, data) => {\n        moduleResponse(item, status2, data);\n      }\n    };\n    queue.push(item);\n    queriesSent++;\n    timer = setTimeout(execNext, config.rotate);\n    query(resource, payload, item.callback);\n  }\n  setTimeout(execNext);\n  return getQueryStatus;\n}\n\n// src/index.ts\nfunction initRedundancy(cfg) {\n  const config = {\n    ...defaultConfig,\n    ...cfg\n  };\n  let queries = [];\n  function cleanup() {\n    queries = queries.filter((item) => item().status === \"pending\");\n  }\n  function query(payload, queryCallback, doneCallback) {\n    const query2 = sendQuery(\n      config,\n      payload,\n      queryCallback,\n      (data, error) => {\n        cleanup();\n        if (doneCallback) {\n          doneCallback(data, error);\n        }\n      }\n    );\n    queries.push(query2);\n    return query2;\n  }\n  function find(callback) {\n    return queries.find((value) => {\n      return callback(value);\n    }) || null;\n  }\n  const instance = {\n    query,\n    find,\n    setIndex: (index) => {\n      config.index = index;\n    },\n    getIndex: () => config.index,\n    cleanup\n  };\n  return instance;\n}\n\nfunction emptyCallback$1() {\n}\nconst redundancyCache = /* @__PURE__ */ Object.create(null);\nfunction getRedundancyCache(provider) {\n  if (!redundancyCache[provider]) {\n    const config = getAPIConfig(provider);\n    if (!config) {\n      return;\n    }\n    const redundancy = initRedundancy(config);\n    const cachedReundancy = {\n      config,\n      redundancy\n    };\n    redundancyCache[provider] = cachedReundancy;\n  }\n  return redundancyCache[provider];\n}\nfunction sendAPIQuery(target, query, callback) {\n  let redundancy;\n  let send;\n  if (typeof target === \"string\") {\n    const api = getAPIModule(target);\n    if (!api) {\n      callback(void 0, 424);\n      return emptyCallback$1;\n    }\n    send = api.send;\n    const cached = getRedundancyCache(target);\n    if (cached) {\n      redundancy = cached.redundancy;\n    }\n  } else {\n    const config = createAPIConfig(target);\n    if (config) {\n      redundancy = initRedundancy(config);\n      const moduleKey = target.resources ? target.resources[0] : \"\";\n      const api = getAPIModule(moduleKey);\n      if (api) {\n        send = api.send;\n      }\n    }\n  }\n  if (!redundancy || !send) {\n    callback(void 0, 424);\n    return emptyCallback$1;\n  }\n  return redundancy.query(query, send, callback)().abort;\n}\n\nfunction emptyCallback() {\n}\nfunction loadedNewIcons(storage) {\n  if (!storage.iconsLoaderFlag) {\n    storage.iconsLoaderFlag = true;\n    setTimeout(() => {\n      storage.iconsLoaderFlag = false;\n      updateCallbacks(storage);\n    });\n  }\n}\nfunction checkIconNamesForAPI(icons) {\n  const valid = [];\n  const invalid = [];\n  icons.forEach((name) => {\n    (name.match(matchIconName) ? valid : invalid).push(name);\n  });\n  return {\n    valid,\n    invalid\n  };\n}\nfunction parseLoaderResponse(storage, icons, data) {\n  function checkMissing() {\n    const pending = storage.pendingIcons;\n    icons.forEach((name) => {\n      if (pending) {\n        pending.delete(name);\n      }\n      if (!storage.icons[name]) {\n        storage.missing.add(name);\n      }\n    });\n  }\n  if (data && typeof data === \"object\") {\n    try {\n      const parsed = addIconSet(storage, data);\n      if (!parsed.length) {\n        checkMissing();\n        return;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n  checkMissing();\n  loadedNewIcons(storage);\n}\nfunction parsePossiblyAsyncResponse(response, callback) {\n  if (response instanceof Promise) {\n    response.then((data) => {\n      callback(data);\n    }).catch(() => {\n      callback(null);\n    });\n  } else {\n    callback(response);\n  }\n}\nfunction loadNewIcons(storage, icons) {\n  if (!storage.iconsToLoad) {\n    storage.iconsToLoad = icons;\n  } else {\n    storage.iconsToLoad = storage.iconsToLoad.concat(icons).sort();\n  }\n  if (!storage.iconsQueueFlag) {\n    storage.iconsQueueFlag = true;\n    setTimeout(() => {\n      storage.iconsQueueFlag = false;\n      const { provider, prefix } = storage;\n      const icons2 = storage.iconsToLoad;\n      delete storage.iconsToLoad;\n      if (!icons2 || !icons2.length) {\n        return;\n      }\n      const customIconLoader = storage.loadIcon;\n      if (storage.loadIcons && (icons2.length > 1 || !customIconLoader)) {\n        parsePossiblyAsyncResponse(\n          storage.loadIcons(icons2, prefix, provider),\n          (data) => {\n            parseLoaderResponse(storage, icons2, data);\n          }\n        );\n        return;\n      }\n      if (customIconLoader) {\n        icons2.forEach((name) => {\n          const response = customIconLoader(name, prefix, provider);\n          parsePossiblyAsyncResponse(response, (data) => {\n            const iconSet = data ? {\n              prefix,\n              icons: {\n                [name]: data\n              }\n            } : null;\n            parseLoaderResponse(storage, [name], iconSet);\n          });\n        });\n        return;\n      }\n      const { valid, invalid } = checkIconNamesForAPI(icons2);\n      if (invalid.length) {\n        parseLoaderResponse(storage, invalid, null);\n      }\n      if (!valid.length) {\n        return;\n      }\n      const api = prefix.match(matchIconName) ? getAPIModule(provider) : null;\n      if (!api) {\n        parseLoaderResponse(storage, valid, null);\n        return;\n      }\n      const params = api.prepare(provider, prefix, valid);\n      params.forEach((item) => {\n        sendAPIQuery(provider, item, (data) => {\n          parseLoaderResponse(storage, item.icons, data);\n        });\n      });\n    });\n  }\n}\nconst loadIcons = (icons, callback) => {\n  const cleanedIcons = listToIcons(icons, true, allowSimpleNames());\n  const sortedIcons = sortIcons(cleanedIcons);\n  if (!sortedIcons.pending.length) {\n    let callCallback = true;\n    if (callback) {\n      setTimeout(() => {\n        if (callCallback) {\n          callback(\n            sortedIcons.loaded,\n            sortedIcons.missing,\n            sortedIcons.pending,\n            emptyCallback\n          );\n        }\n      });\n    }\n    return () => {\n      callCallback = false;\n    };\n  }\n  const newIcons = /* @__PURE__ */ Object.create(null);\n  const sources = [];\n  let lastProvider, lastPrefix;\n  sortedIcons.pending.forEach((icon) => {\n    const { provider, prefix } = icon;\n    if (prefix === lastPrefix && provider === lastProvider) {\n      return;\n    }\n    lastProvider = provider;\n    lastPrefix = prefix;\n    sources.push(getStorage(provider, prefix));\n    const providerNewIcons = newIcons[provider] || (newIcons[provider] = /* @__PURE__ */ Object.create(null));\n    if (!providerNewIcons[prefix]) {\n      providerNewIcons[prefix] = [];\n    }\n  });\n  sortedIcons.pending.forEach((icon) => {\n    const { provider, prefix, name } = icon;\n    const storage = getStorage(provider, prefix);\n    const pendingQueue = storage.pendingIcons || (storage.pendingIcons = /* @__PURE__ */ new Set());\n    if (!pendingQueue.has(name)) {\n      pendingQueue.add(name);\n      newIcons[provider][prefix].push(name);\n    }\n  });\n  sources.forEach((storage) => {\n    const list = newIcons[storage.provider][storage.prefix];\n    if (list.length) {\n      loadNewIcons(storage, list);\n    }\n  });\n  return callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;\n};\nconst loadIcon = (icon) => {\n  return new Promise((fulfill, reject) => {\n    const iconObj = typeof icon === \"string\" ? stringToIcon(icon, true) : icon;\n    if (!iconObj) {\n      reject(icon);\n      return;\n    }\n    loadIcons([iconObj || icon], (loaded) => {\n      if (loaded.length && iconObj) {\n        const data = getIconData(iconObj);\n        if (data) {\n          fulfill({\n            ...defaultIconProps,\n            ...data\n          });\n          return;\n        }\n      }\n      reject(icon);\n    });\n  });\n};\n\nfunction setCustomIconsLoader(loader, prefix, provider) {\n  getStorage(provider || \"\", prefix).loadIcons = loader;\n}\nfunction setCustomIconLoader(loader, prefix, provider) {\n  getStorage(provider || \"\", prefix).loadIcon = loader;\n}\n\nfunction mergeCustomisations(defaults, item) {\n  const result = {\n    ...defaults\n  };\n  for (const key in item) {\n    const value = item[key];\n    const valueType = typeof value;\n    if (key in defaultIconSizeCustomisations) {\n      if (value === null || value && (valueType === \"string\" || valueType === \"number\")) {\n        result[key] = value;\n      }\n    } else if (valueType === typeof result[key]) {\n      result[key] = key === \"rotate\" ? value % 4 : value;\n    }\n  }\n  return result;\n}\n\nconst separator = /[\\s,]+/;\nfunction flipFromString(custom, flip) {\n  flip.split(separator).forEach((str) => {\n    const value = str.trim();\n    switch (value) {\n      case \"horizontal\":\n        custom.hFlip = true;\n        break;\n      case \"vertical\":\n        custom.vFlip = true;\n        break;\n    }\n  });\n}\n\nfunction rotateFromString(value, defaultValue = 0) {\n  const units = value.replace(/^-?[0-9.]*/, \"\");\n  function cleanup(value2) {\n    while (value2 < 0) {\n      value2 += 4;\n    }\n    return value2 % 4;\n  }\n  if (units === \"\") {\n    const num = parseInt(value);\n    return isNaN(num) ? 0 : cleanup(num);\n  } else if (units !== value) {\n    let split = 0;\n    switch (units) {\n      case \"%\":\n        split = 25;\n        break;\n      case \"deg\":\n        split = 90;\n    }\n    if (split) {\n      let num = parseFloat(value.slice(0, value.length - units.length));\n      if (isNaN(num)) {\n        return 0;\n      }\n      num = num / split;\n      return num % 1 === 0 ? cleanup(num) : 0;\n    }\n  }\n  return defaultValue;\n}\n\nfunction iconToHTML(body, attributes) {\n  let renderAttribsHTML = body.indexOf(\"xlink:\") === -1 ? \"\" : ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"';\n  for (const attr in attributes) {\n    renderAttribsHTML += \" \" + attr + '=\"' + attributes[attr] + '\"';\n  }\n  return '<svg xmlns=\"http://www.w3.org/2000/svg\"' + renderAttribsHTML + \">\" + body + \"</svg>\";\n}\n\nfunction encodeSVGforURL(svg) {\n  return svg.replace(/\"/g, \"'\").replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/\\s+/g, \" \");\n}\nfunction svgToData(svg) {\n  return \"data:image/svg+xml,\" + encodeSVGforURL(svg);\n}\nfunction svgToURL(svg) {\n  return 'url(\"' + svgToData(svg) + '\")';\n}\n\nlet policy;\nfunction createPolicy() {\n  try {\n    policy = window.trustedTypes.createPolicy(\"iconify\", {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      createHTML: (s) => s\n    });\n  } catch (err) {\n    policy = null;\n  }\n}\nfunction cleanUpInnerHTML(html) {\n  if (policy === void 0) {\n    createPolicy();\n  }\n  return policy ? policy.createHTML(html) : html;\n}\n\nconst defaultExtendedIconCustomisations = {\n    ...defaultIconCustomisations,\n    inline: false,\n};\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlnsXlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n};\n/**\n * Style modes\n */\nconst commonProps = {\n    display: 'inline-block',\n};\nconst monotoneProps = {\n    backgroundColor: 'currentColor',\n};\nconst coloredProps = {\n    backgroundColor: 'transparent',\n};\n// Dynamically add common props to variables above\nconst propsToAdd = {\n    Image: 'var(--svg)',\n    Repeat: 'no-repeat',\n    Size: '100% 100%',\n};\nconst propsToAddTo = {\n    WebkitMask: monotoneProps,\n    mask: monotoneProps,\n    background: coloredProps,\n};\nfor (const prefix in propsToAddTo) {\n    const list = propsToAddTo[prefix];\n    for (const prop in propsToAdd) {\n        list[prefix + prop] = propsToAdd[prop];\n    }\n}\n/**\n * Default values for customisations for inline icon\n */\nconst inlineDefaults = {\n    ...defaultExtendedIconCustomisations,\n    inline: true,\n};\n/**\n * Fix size: add 'px' to numbers\n */\nfunction fixSize(value) {\n    return value + (value.match(/^[-0-9.]+$/) ? 'px' : '');\n}\n/**\n * Render icon\n */\nconst render = (\n// Icon must be validated before calling this function\nicon, \n// Partial properties\nprops, \n// Icon name\nname) => {\n    // Get default properties\n    const defaultProps = props.inline\n        ? inlineDefaults\n        : defaultExtendedIconCustomisations;\n    // Get all customisations\n    const customisations = mergeCustomisations(defaultProps, props);\n    // Check mode\n    const mode = props.mode || 'svg';\n    // Create style\n    const style = {};\n    const customStyle = props.style || {};\n    // Create SVG component properties\n    const componentProps = {\n        ...(mode === 'svg' ? svgDefaults : {}),\n    };\n    if (name) {\n        const iconName = stringToIcon(name, false, true);\n        if (iconName) {\n            const classNames = ['iconify'];\n            const props = [\n                'provider',\n                'prefix',\n            ];\n            for (const prop of props) {\n                if (iconName[prop]) {\n                    classNames.push('iconify--' + iconName[prop]);\n                }\n            }\n            componentProps.className = classNames.join(' ');\n        }\n    }\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'children':\n            case 'onLoad':\n            case 'mode':\n            case 'ssr':\n                break;\n            // Forward ref\n            case '_ref':\n                componentProps.ref = value;\n                break;\n            // Merge class names\n            case 'className':\n                componentProps[key] =\n                    (componentProps[key] ? componentProps[key] + ' ' : '') +\n                        value;\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    flipFromString(customisations, value);\n                }\n                break;\n            // Color: copy to style\n            case 'color':\n                style.color = value;\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations[key] = rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            // Copy missing property if it does not exist in customisations\n            default:\n                if (defaultProps[key] === void 0) {\n                    componentProps[key] = value;\n                }\n        }\n    }\n    // Generate icon\n    const item = iconToSVG(icon, customisations);\n    const renderAttribs = item.attributes;\n    // Inline display\n    if (customisations.inline) {\n        style.verticalAlign = '-0.125em';\n    }\n    if (mode === 'svg') {\n        // Add style\n        componentProps.style = {\n            ...style,\n            ...customStyle,\n        };\n        // Add icon stuff\n        Object.assign(componentProps, renderAttribs);\n        // Counter for ids based on \"id\" property to render icons consistently on server and client\n        let localCounter = 0;\n        let id = props.id;\n        if (typeof id === 'string') {\n            // Convert '-' to '_' to avoid errors in animations\n            id = id.replace(/-/g, '_');\n        }\n        // Add icon stuff\n        componentProps.dangerouslySetInnerHTML = {\n            __html: cleanUpInnerHTML(replaceIDs(item.body, id ? () => id + 'ID' + localCounter++ : 'iconifyReact')),\n        };\n        return createElement('svg', componentProps);\n    }\n    // Render <span> with style\n    const { body, width, height } = icon;\n    const useMask = mode === 'mask' ||\n        (mode === 'bg' ? false : body.indexOf('currentColor') !== -1);\n    // Generate SVG\n    const html = iconToHTML(body, {\n        ...renderAttribs,\n        width: width + '',\n        height: height + '',\n    });\n    // Generate style\n    componentProps.style = {\n        ...style,\n        '--svg': svgToURL(html),\n        'width': fixSize(renderAttribs.width),\n        'height': fixSize(renderAttribs.height),\n        ...commonProps,\n        ...(useMask ? monotoneProps : coloredProps),\n        ...customStyle,\n    };\n    return createElement('span', componentProps);\n};\n\n/**\n * Enable cache\n *\n * @deprecated No longer used\n */\nfunction enableCache(storage) {\n    //\n}\n/**\n * Disable cache\n *\n * @deprecated No longer used\n */\nfunction disableCache(storage) {\n    //\n}\n/**\n * Initialise stuff\n */\n// Enable short names\nallowSimpleNames(true);\n// Set API module\nsetAPIModule('', fetchAPIModule);\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!addAPIProvider(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\nfunction IconComponent(props) {\n    const [mounted, setMounted] = useState(!!props.ssr);\n    const [abort, setAbort] = useState({});\n    // Get initial state\n    function getInitialState(mounted) {\n        if (mounted) {\n            const name = props.icon;\n            if (typeof name === 'object') {\n                // Icon as object\n                return {\n                    name: '',\n                    data: name,\n                };\n            }\n            const data = getIconData(name);\n            if (data) {\n                return {\n                    name,\n                    data,\n                };\n            }\n        }\n        return {\n            name: '',\n        };\n    }\n    const [state, setState] = useState(getInitialState(!!props.ssr));\n    // Cancel loading\n    function cleanup() {\n        const callback = abort.callback;\n        if (callback) {\n            callback();\n            setAbort({});\n        }\n    }\n    // Change state if it is different\n    function changeState(newState) {\n        if (JSON.stringify(state) !== JSON.stringify(newState)) {\n            cleanup();\n            setState(newState);\n            return true;\n        }\n    }\n    // Update state\n    function updateState() {\n        var _a;\n        const name = props.icon;\n        if (typeof name === 'object') {\n            // Icon as object\n            changeState({\n                name: '',\n                data: name,\n            });\n            return;\n        }\n        // New icon or got icon data\n        const data = getIconData(name);\n        if (changeState({\n            name,\n            data,\n        })) {\n            if (data === undefined) {\n                // Load icon, update state when done\n                const callback = loadIcons([name], updateState);\n                setAbort({\n                    callback,\n                });\n            }\n            else if (data) {\n                // Icon data is available: trigger onLoad callback if present\n                (_a = props.onLoad) === null || _a === void 0 ? void 0 : _a.call(props, name);\n            }\n        }\n    }\n    // Mounted state, cleanup for loader\n    useEffect(() => {\n        setMounted(true);\n        return cleanup;\n    }, []);\n    // Icon changed or component mounted\n    useEffect(() => {\n        if (mounted) {\n            updateState();\n        }\n    }, [props.icon, mounted]);\n    // Render icon\n    const { name, data } = state;\n    if (!data) {\n        return props.children\n            ? props.children\n            : props.fallback\n                ? props.fallback\n                : createElement('span', {});\n    }\n    return render({\n        ...defaultIconProps,\n        ...data,\n    }, props, name);\n}\n/**\n * Block icon\n *\n * @param props - Component properties\n */\nconst Icon = forwardRef((props, ref) => IconComponent({\n    ...props,\n    _ref: ref,\n}));\n/**\n * Inline icon (has negative verticalAlign that makes it behave like icon font)\n *\n * @param props - Component properties\n */\nconst InlineIcon = forwardRef((props, ref) => IconComponent({\n    inline: true,\n    ...props,\n    _ref: ref,\n}));\n/**\n * Internal API\n */\nconst _api = {\n    getAPIConfig,\n    setAPIModule,\n    sendAPIQuery,\n    setFetch,\n    getFetch,\n    listAPIProviders,\n};\n\nexport { Icon, InlineIcon, _api, addAPIProvider, addCollection, addIcon, iconToSVG as buildIcon, calculateSize, disableCache, enableCache, getIcon, iconLoaded as iconExists, iconLoaded, listIcons, loadIcon, loadIcons, replaceIDs, setCustomIconLoader, setCustomIconsLoader };\n","\"use strict\";\n'use client';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14\"\n}), 'Search');","import React, { useEffect, useState, useContext } from 'react';\nimport { Paper, BottomNavigation as MuiBottomNavigation, BottomNavigationAction, alpha } from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Icon } from '@iconify/react';\nimport HomeIcon from '@mui/icons-material/Home';\nimport LibraryMusicIcon from '@mui/icons-material/LibraryMusic';\nimport PeopleIcon from '@mui/icons-material/People';\nimport PersonIcon from '@mui/icons-material/Person';\nimport AppsIcon from '@mui/icons-material/Apps';\nimport VideogameAssetRoundedIcon from '@mui/icons-material/VideogameAssetRounded';\nimport SearchIcon from '@mui/icons-material/Search';\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz';\nimport { useTheme } from '@mui/material/styles';\nimport { ThemeSettingsContext } from '../App';\n\n\nexport const BOTTOM_NAV_ID = 'app-bottom-navigation';\n\nconst AppBottomNavigation = ({ user }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [visibleInMessenger, setVisibleInMessenger] = useState(true);\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const theme = useTheme();\n  \n  \n  const isChannel = user?.account_type === 'channel';\n  \n  \n  useEffect(() => {\n    const handleMessengerLayoutChange = (event) => {\n      const { isInChat } = event.detail;\n      console.log('Bottom navigation received layout change event:', isInChat ? 'in chat' : 'not in chat');\n      setVisibleInMessenger(!isInChat);\n    };\n    \n    \n    document.addEventListener('messenger-layout-change', handleMessengerLayoutChange);\n    \n    \n    return () => {\n      document.removeEventListener('messenger-layout-change', handleMessengerLayoutChange);\n    };\n  }, []);\n  \n  \n  const isInMessenger = location.pathname.startsWith('/messenger');\n  if (isInMessenger && !visibleInMessenger) {\n    console.log('Bottom navigation hidden in messenger chat');\n    return null;\n  }\n  \n  \n  const authPages = ['/login', '/register', '/register/profile', '/confirm-email'];\n  const isAuthPage = authPages.some(path => location.pathname.startsWith(path));\n  const isSettingsPage = location.pathname.startsWith('/settings');\n  const isBadgeShopPage = location.pathname.startsWith('/badge-shop');\n  \n  \n  if (isAuthPage || isSettingsPage || isBadgeShopPage) {\n    return null;\n  }\n  \n  \n  const isClickerPage = location.pathname.startsWith('/clicker');\n  if (isClickerPage) {\n    return null;\n  }\n  \n  const getCurrentValue = () => {\n    const path = location.pathname;\n    if (path === '/' || path === '/feed' || path === '/main') return 0;\n    if (path === '/music') return 1;\n    if (path.startsWith('/messenger')) return 2;\n    if (path.startsWith('/profile')) return 3;\n    if (path === '/more') return 4;\n    return false;\n  };\n\n  console.log(\"BottomNavigation rendering, user:\", user, \"pathname:\", location.pathname);\n\n  \n  const handleNavigationChange = (event, newValue) => {\n    switch(newValue) {\n      case 0:\n        navigate('/');\n        break;\n      case 1:\n        navigate('/music');\n        break;\n      case 2:\n        navigate('/messenger');\n        break;\n      case 3:\n        navigate(user ? `/profile/${user.username}` : '/login');\n        break;\n      case 4:\n        \n        navigate('/more');\n        break;\n      default:\n        break;\n    }\n  };\n\n  // Get appropriate colors based on theme mode\n  const getBackgroundColor = () => {\n    switch (theme.palette.mode) {\n      case 'light':\n        return alpha(theme.palette.background.paper, 0.9);\n      case 'contrast':\n        return '#101010';\n      default: // dark\n        return '#121212cf';\n    }\n  };\n\n  const borderColor = theme.palette.mode === 'light' \n    ? alpha(theme.palette.divider, 0.1)\n    : theme.palette.mode === 'contrast'\n      ? alpha(theme.palette.common.white, 0.15)\n      : alpha(theme.palette.common.white, 0.1);\n\n  const textColor = theme.palette.mode === 'light'\n    ? alpha(theme.palette.text.primary, 0.7)\n    : theme.palette.mode === 'contrast'\n      ? alpha(theme.palette.common.white, 0.9)\n      : 'rgb(214 209 227 / 77%)';\n\n  return (\n    <Paper \n      id={BOTTOM_NAV_ID}\n      sx={{ \n        position: 'fixed', \n        bottom: 0, \n        left: 0, \n        right: 0,\n        display: { xs: 'block', md: 'none' },\n        zIndex: 1000,\n        borderTop: `1px solid ${borderColor}`,\n        background: 'rgba(255, 255, 255, 0.03)',\n        backdropFilter: 'blur(20px)',\n        WebkitBackdropFilter: 'blur(20px)',\n        boxShadow: '0 5px 15px rgba(0, 0, 0, 0.2)'\n      }} \n      elevation={0}\n    >\n      <MuiBottomNavigation\n        value={getCurrentValue()}\n        onChange={handleNavigationChange}\n        sx={{\n          bgcolor: 'transparent',\n          height: 75,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'flex-start',\n          marginTop: '10px',\n          '& .MuiBottomNavigationAction-root': {\n            color: textColor,\n            '&.Mui-selected': {\n              color: themeSettings.primaryColor || theme.palette.primary.main\n            }\n          }\n        }}\n      >\n        <BottomNavigationAction \n          label=\"\" \n          icon={<Icon icon=\"solar:home-bold\" width=\"28\" height=\"28\" />}\n          sx={{ \n            minWidth: 'auto',\n            '& .MuiBottomNavigationAction-label': {\n              fontSize: '0.8rem'\n            }\n          }}\n        />\n        <BottomNavigationAction \n          label=\"\" \n          icon={<Icon icon=\"solar:music-notes-bold\" width=\"28\" height=\"28\" />}\n          sx={{ \n            minWidth: 'auto',\n            '& .MuiBottomNavigationAction-label': {\n              fontSize: '0.8rem'\n            }\n          }}\n        />\n        <BottomNavigationAction \n          label=\"\" \n          icon={<Icon icon=\"solar:chat-round-dots-bold\" width=\"28\" height=\"28\" />}\n          sx={{ \n            minWidth: 'auto',\n            '& .MuiBottomNavigationAction-label': {\n              fontSize: '0.8rem'\n            }\n          }}\n        />\n        <BottomNavigationAction \n          label=\"\" \n          icon={<Icon icon=\"solar:user-bold\" width=\"28\" height=\"28\" />}\n          sx={{ \n            minWidth: 'auto',\n            '& .MuiBottomNavigationAction-label': {\n              fontSize: '0.8rem'\n            }\n          }}\n        />\n        <BottomNavigationAction \n          label=\"\" \n          icon={<Icon icon=\"solar:widget-2-bold\" width=\"28\" height=\"28\" sx={{\n            transform: 'scale(1.1)',\n            filter: 'drop-shadow(0px 1px 1px rgba(0,0,0,0.2))',\n          }} />}\n          sx={{ \n            minWidth: 'auto',\n            '& .MuiBottomNavigationAction-label': {\n              fontSize: '0.8rem'\n            }\n          }}\n        />\n      </MuiBottomNavigation>\n    </Paper>\n  );\n};\n\nexport default AppBottomNavigation; ","import React, { createContext, useState, useEffect, useRef, useContext, useCallback } from 'react';\nimport axios from 'axios';\n\n\nexport const MusicContext = createContext({\n  tracks: [],\n  popularTracks: [],\n  likedTracks: [],\n  newTracks: [],\n  randomTracks: [],\n  currentTrack: null,\n  isPlaying: false,\n  volume: 0.5,\n  isMuted: false,\n  currentTime: 0,\n  duration: 0,\n  isLoading: true,\n  audioRef: null,\n  hasMoreTracks: false,\n  hasMoreByType: {},\n  currentSection: 'all',\n  isTrackLoading: false,\n  setCurrentTrack: () => {},\n  setCurrentSection: () => {},\n  setRandomTracks: () => {},\n  playTrack: () => {},\n  togglePlay: () => {},\n  nextTrack: () => {},\n  prevTrack: () => {},\n  setVolume: () => {},\n  toggleMute: () => {},\n  seekTo: () => {},\n  likeTrack: () => {},\n  uploadTrack: () => {},\n  loadMoreTracks: () => Promise.resolve(),\n  resetPagination: () => {},\n  enableCrossfade: true,\n  searchResults: [],\n  isSearching: false,\n  searchTracks: () => Promise.resolve([]),\n  getCurrentTimeRaw: () => 0,\n  getDurationRaw: () => 0,\n  playlistTracks: {},\n  setPlaylistTracks: () => {},\n});\n\n\nexport const MusicProvider = ({ children }) => {\n  \n  const [tracks, setTracks] = useState([]);\n  const [popularTracks, setPopularTracks] = useState([]);\n  const [likedTracks, setLikedTracks] = useState([]);\n  const [newTracks, setNewTracks] = useState([]);\n  const [randomTracks, setRandomTracks] = useState([]);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [volume, setVolume] = useState(0.5); \n  const [isMuted, setIsMuted] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasMoreTracks, setHasMoreTracks] = useState(true);\n  const [hasMoreByType, setHasMoreByType] = useState({});\n  const [page, setPage] = useState(1);\n  const [pageByType, setPageByType] = useState({\n    all: 1,\n    popular: 1,\n    liked: 1,\n    new: 1,\n    random: 1\n  });\n  const [enableCrossfade, setEnableCrossfade] = useState(true); \n  const [currentSection, setCurrentSection] = useState('all'); \n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [isTrackLoading, setIsTrackLoading] = useState(false); \n  \n  \n  const audioRef = useRef(new Audio());\n  const nextAudioRef = useRef(new Audio()); \n  const initialMount = useRef(true);\n  const crossfadeTimeoutRef = useRef(null); \n  const isLoadingRef = useRef(true); \n  const isLoadingMoreRef = useRef(false); \n  const [isLoadingMore, setIsLoadingMore] = useState(false); \n  const preloadTimeRef = useRef({}); \n  \n  const currentTimeRef = useRef(0);\n  const durationRef = useRef(0);\n  const timeUpdateThrottleRef = useRef(null);\n  const lastTimeUpdateRef = useRef(0);\n\n  \n  const likedTracksLastLoadedRef = useRef(null);\n  \n  const isLoadingLikedTracksRef = useRef(false);\n  \n  const hasCheckedLikedTracksRef = useRef(false);\n\n  \n  const [playlistTracks, setPlaylistTracksState] = useState({});\n  \n  useEffect(() => {\n    let isMounted = true;\n    \n    \n    const fetchTracks = async () => {\n      \n      if (isLoadingRef.current === false && (\n        (currentSection === 'all' && tracks.length > 0) ||\n        (currentSection === 'liked' && likedTracks.length > 0) ||\n        (currentSection === 'popular' && popularTracks.length > 0) ||\n        (currentSection === 'new' && newTracks.length > 0) ||\n        (currentSection === 'random' && randomTracks.length > 0)\n      )) {\n        console.log(`     : ${currentSection},  `);\n        return;\n      }\n      \n      \n      if (currentSection === 'liked' && hasCheckedLikedTracksRef.current && likedTracksLastLoadedRef.current) {\n        const now = Date.now();\n        const cacheAge = now - likedTracksLastLoadedRef.current;\n        \n        if (likedTracks.length === 0 && cacheAge < 15 * 60 * 1000) {\n          console.log(' ,    ,   (  15 )');\n          return;\n        }\n        \n        if (likedTracks.length > 0 && cacheAge < 5 * 60 * 1000) {\n          console.log('    (  5 )');\n          return;\n        }\n      }\n      \n      console.log(` . isLoadingRef.current=${isLoadingRef.current}`);\n      isLoadingRef.current = true;\n      setIsLoading(true);\n      \n      try {\n        console.log(`   : ${currentSection}`);\n        \n        \n        let url = '/api/music';\n        let params = { page: 1, per_page: 50 };\n        \n        if (currentSection === 'liked') {\n          url = '/api/music/liked';\n          \n          \n          if (isLoadingLikedTracksRef.current) {\n            console.log('    ,   ');\n            isLoadingRef.current = false;\n            setIsLoading(false);\n            return;\n          }\n          \n          console.log('    ');\n          \n          isLoadingLikedTracksRef.current = true;\n          \n          try {\n            \n            \n            const response = await axios.get(url, {\n              params: { ...params, _t: Date.now() }, \n              headers: {\n                'Cache-Control': 'no-cache',\n                'Pragma': 'no-cache',\n                'Expires': '0'\n              },\n              withCredentials: true\n            });\n            \n            if (!isMounted) {\n              isLoadingLikedTracksRef.current = false;\n              isLoadingRef.current = false;\n              return;\n            }\n            \n            if (response.data && response.data.tracks) {\n              const receivedTracks = response.data.tracks;\n              console.log(` ${receivedTracks.length}  `);\n              setLikedTracks(receivedTracks);\n              setHasMoreTracks(receivedTracks.length >= 50);\n              setHasMoreByType(prev => ({ ...prev, liked: receivedTracks.length >= 50 }));\n              \n              \n              likedTracksLastLoadedRef.current = Date.now();\n              \n              hasCheckedLikedTracksRef.current = true;\n            } else {\n              \n              console.log('   ');\n              setLikedTracks([]);\n              setHasMoreTracks(false);\n              setHasMoreByType(prev => ({ ...prev, liked: false }));\n              \n              \n              likedTracksLastLoadedRef.current = Date.now();\n              \n              hasCheckedLikedTracksRef.current = true;\n            }\n          } catch (error) {\n            console.error('    :', error);\n          } finally {\n            \n            isLoadingLikedTracksRef.current = false;\n            isLoadingRef.current = false;\n            setIsLoading(false);\n          }\n          \n          return; \n        } else if (currentSection === 'popular') {\n          params.sort = 'popular';\n        } else if (currentSection === 'new') {\n          params.sort = 'date';\n        } else if (currentSection === 'random') {\n          params.random = true;\n          \n          params.nocache = Math.random();\n        }\n        \n        \n        const response = await axios.get(url, { params });\n        if (!isMounted) return;\n        \n        if (response.data && response.data.tracks) {\n          const receivedTracks = response.data.tracks;\n          \n\n          if (receivedTracks.length > 0) {\n            \n            // Only prefetch lyrics if user is actively playing music\n            // or has played music in this session\n            if (isPlaying || currentTrack) {\n              const prefetchCount = Math.min(3, receivedTracks.length);\n              console.log(`Pre-fetching lyrics for first ${prefetchCount} tracks...`);\n              \n              Promise.all(\n                receivedTracks.slice(0, prefetchCount).map(async (track) => {\n                  try {\n                    const lyricsData = await fetchLyricsForTrack(track.id);\n                    if (lyricsData) {\n                      track.lyricsData = lyricsData;\n                    }\n                  } catch (err) {\n                    console.error(`Error pre-fetching lyrics for track ${track.id}:`, err);\n                  }\n                })\n              ).catch(err => console.error('Error in lyrics pre-fetch batch:', err));\n            } else {\n              console.log('Skipping lyrics prefetch since no music is playing');\n            }\n          }\n          \n          if (currentSection === 'all') {\n            setTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, all: receivedTracks.length >= 50 }));\n          } else if (currentSection === 'popular') {\n            setPopularTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, popular: receivedTracks.length >= 50 }));\n          } else if (currentSection === 'new') {\n            setNewTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, new: receivedTracks.length >= 50 }));\n          } else if (currentSection === 'random') {\n            \n            const shuffledTracks = [...receivedTracks].sort(() => Math.random() - 0.5);\n            setRandomTracks(shuffledTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, random: receivedTracks.length >= 50 }));\n            console.log('    :', shuffledTracks.length);\n          }\n          \n          \n          setTimeout(() => {\n            \n            if (receivedTracks.length >= 50 && hasMoreByType[currentSection] !== false) {\n              console.log(`      ${currentSection}...`);\n              loadMoreTracks(currentSection).catch(error => \n                console.error('   :', error)\n              );\n            }\n          }, 2000);\n        }\n        \n        isLoadingRef.current = false;\n        setIsLoading(false);\n      } catch (error) {\n        console.error(`      ${currentSection}:`, error);\n        if (isMounted) {\n          setIsLoading(false);\n          isLoadingRef.current = false;\n        }\n        if (currentSection === 'liked') {\n          isLoadingLikedTracksRef.current = false;\n        }\n      }\n    };\n    \n    \n    fetchTracks();\n    \n    return () => {\n      isMounted = false;\n    };\n  }, [currentSection, hasMoreByType, tracks.length, likedTracks.length, popularTracks.length, newTracks.length, randomTracks.length]);\n  \n  \n  useEffect(() => {\n    let isMounted = true;\n    \n    \n    const handleTimeUpdate = () => {\n      if (isMounted) {\n        const audio = audioRef.current;\n        \n\n        currentTimeRef.current = audio.currentTime;\n        durationRef.current = audio.duration;\n        \n\n        if ('mediaSession' in navigator && audio.duration) {\n          navigator.mediaSession.setPositionState({\n            duration: audio.duration,\n            position: audio.currentTime,\n            playbackRate: audio.playbackRate\n          });\n        }\n        \n\n\n        const now = Date.now();\n        if (now - lastTimeUpdateRef.current > 1000) {\n          setCurrentTime(audio.currentTime);\n          setDuration(audio.duration);\n          lastTimeUpdateRef.current = now;\n        }\n        \n\n        if (enableCrossfade && isPlaying && audio.duration > 0) {\n          const timeRemaining = audio.duration - audio.currentTime;\n          \n          \n          if (timeRemaining <= 3 && timeRemaining > 0 && !crossfadeTimeoutRef.current) {\n            console.log('Starting crossfade...');\n            \n            \n            getNextTrack().then(nextTrackToPlay => {\n              if (nextTrackToPlay) {\n                \n                nextAudioRef.current.src = nextTrackToPlay.file_path;\n                nextAudioRef.current.volume = 0; \n                \n                \n                const playPromise = nextAudioRef.current.play();\n                if (playPromise !== undefined) {\n                  playPromise.catch(error => {\n                    console.error(\"Error playing next track during crossfade:\", error);\n                  });\n                }\n                \n                \n                const fadeInterval = setInterval(() => {\n                  \n                  if (audioRef.current.paused === false) {\n                    \n                    if (audioRef.current.volume > 0.1) {\n                      audioRef.current.volume -= 0.1;\n                    } else {\n                      audioRef.current.volume = 0;\n                    }\n                    \n                    \n                    if (nextAudioRef.current.volume < volume - 0.1) {\n                      nextAudioRef.current.volume += 0.1;\n                    } else {\n                      nextAudioRef.current.volume = volume;\n                      \n                      \n                      audioRef.current.pause();\n                      \n                      \n                      clearInterval(fadeInterval);\n                      \n                      \n                      [audioRef.current, nextAudioRef.current] = [nextAudioRef.current, audioRef.current];\n                      \n                      \n                      setCurrentTrack(nextTrackToPlay);\n                      \n                      \n                      crossfadeTimeoutRef.current = null;\n                    }\n                  } else {\n                    \n                    clearInterval(fadeInterval);\n                  }\n                }, 100);\n                \n                \n                crossfadeTimeoutRef.current = fadeInterval;\n              }\n            });\n          }\n          \n          \n          \n          if (timeRemaining <= 10 && timeRemaining > 3) {\n            \n            getNextTrack().then(nextTrackToLoad => {\n              if (nextTrackToLoad && nextAudioRef.current) {\n                console.log('Preloading next track:', nextTrackToLoad.title);\n                nextAudioRef.current.src = nextTrackToLoad.file_path;\n                nextAudioRef.current.load(); \n              }\n            });\n          }\n        }\n      }\n    };\n    \n    const handleEnded = () => {\n      if (isMounted) {\n        \n        if (enableCrossfade && crossfadeTimeoutRef.current) {\n          \n          clearInterval(crossfadeTimeoutRef.current);\n          crossfadeTimeoutRef.current = null;\n          \n          \n          audioRef.current.pause();\n          \n          \n          const tempAudio = audioRef.current;\n          audioRef.current = nextAudioRef.current;\n          nextAudioRef.current = tempAudio;\n          \n          \n          getNextTrack().then(nextTrackToPlay => {\n            if (nextTrackToPlay) {\n              setCurrentTrack(nextTrackToPlay);\n              localStorage.setItem('currentTrack', JSON.stringify(nextTrackToPlay));\n            }\n          }).catch(error => {\n            console.error(\"Error getting next track after track ended:\", error);\n            \n            nextTrack();\n          });\n        } else {\n          \n          nextTrack();\n        }\n      }\n    };\n    \n    const audio = audioRef.current;\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('loadedmetadata', handleTimeUpdate);\n    \n    return () => {\n      isMounted = false;\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('loadedmetadata', handleTimeUpdate);\n      \n      \n      if (timeUpdateThrottleRef.current) {\n        clearTimeout(timeUpdateThrottleRef.current);\n        timeUpdateThrottleRef.current = null;\n      }\n      \n      \n      if (crossfadeTimeoutRef.current) {\n        clearInterval(crossfadeTimeoutRef.current);\n        crossfadeTimeoutRef.current = null;\n      }\n    };\n  }, [\n    enableCrossfade, \n    isPlaying, \n    volume, \n    currentTrack,\n    tracks,\n    likedTracks,\n    popularTracks,\n    newTracks,\n    randomTracks\n  ]);\n\n  \n  const fetchLyricsForTrack = async (trackId) => {\n    try {\n      const response = await fetch(`/api/music/${trackId}/lyrics`);\n      if (!response.ok) {\n        console.error('Failed to fetch lyrics for track', trackId);\n        return null;\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Error fetching lyrics data:', error);\n      return null;\n    }\n  };\n\n  \n  const playTrack = (track, section = currentSection) => {\n    \n    if (isTrackLoading) {\n      console.log('Track is already loading, ignoring duplicate request');\n      return;\n    }\n    \n    setIsTrackLoading(true);\n    \n    try {\n      \n      if (crossfadeTimeoutRef.current) {\n        clearTimeout(crossfadeTimeoutRef.current);\n        crossfadeTimeoutRef.current = null;\n      }\n      \n      \n      if (currentTrack && track.id === currentTrack.id) {\n        togglePlay();\n        setIsTrackLoading(false);\n        return;\n      }\n      \n\n      if (!track.lyricsData) {\n        fetchLyricsForTrack(track.id)\n          .then(lyricsData => {\n            if (lyricsData) {\n              track.lyricsData = lyricsData;\n\n              if (currentTrack && track.id === currentTrack.id) {\n                setCurrentTrack({...track});\n              }\n            }\n          })\n          .catch(err => console.error('Error fetching lyrics for track:', err));\n      }\n      \n      console.log(`  : ${track.title} - ${track.artist}`);\n      \n      \n      audioRef.current.pause();\n      nextAudioRef.current.pause();\n      \n      \n      audioRef.current.src = '';\n      nextAudioRef.current.src = '';\n      \n      \n      setCurrentTrack(track);\n      setCurrentSection(section);\n      setCurrentTime(0);\n      setDuration(0);\n      \n      \n      try {\n        localStorage.setItem('currentTrack', JSON.stringify(track));\n        localStorage.setItem('currentSection', section);\n      } catch (error) {\n        console.error('     localStorage:', error);\n      }\n      \n      \n      audioRef.current = new Audio();\n      \n      \n      const handleCanPlayThrough = () => {\n        console.log('     ');\n        setIsTrackLoading(false);\n        \n        \n        audioRef.current.volume = isMuted ? 0 : volume;\n        \n        \n        const playPromise = audioRef.current.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(() => {\n              setIsPlaying(true);\n              \n              \n              try {\n                axios.post(`/api/music/${track.id}/play`, {}, { withCredentials: true })\n                  .catch(error => console.error('    :', error));\n                \n                \n                axios.post('/api/user/now-playing', { \n                  track_id: track.id,\n                  artist: track.artist,\n                  title: track.title\n                }, { withCredentials: true })\n                  .catch(error => console.error('    now playing:', error));\n              } catch (error) {\n                console.error('    :', error);\n              }\n            })\n            .catch(error => {\n              console.error('   :', error);\n              setIsPlaying(false);\n              setIsTrackLoading(false);\n            });\n        }\n      };\n      \n      const handleLoadStart = () => {\n        console.log('  ');\n      };\n      \n      const handleError = (error) => {\n        console.error('   :', error);\n        setIsTrackLoading(false);\n      };\n      \n      \n      audioRef.current.addEventListener('canplaythrough', handleCanPlayThrough, { once: true });\n      audioRef.current.addEventListener('loadstart', handleLoadStart);\n      audioRef.current.addEventListener('error', handleError);\n      \n      \n      audioRef.current.src = track.file_path;\n      audioRef.current.load(); \n      \n      \n      return () => {\n        audioRef.current.removeEventListener('canplaythrough', handleCanPlayThrough);\n        audioRef.current.removeEventListener('loadstart', handleLoadStart);\n        audioRef.current.removeEventListener('error', handleError);\n      };\n    } catch (error) {\n      console.error('   :', error);\n      setIsTrackLoading(false);\n    }\n  };\n\n  \n  const togglePlay = () => {\n    if (isTrackLoading) {\n      console.log('Track is still loading, ignoring play/pause request');\n      return;\n    }\n    \n    try {\n      const audio = audioRef.current;\n      \n      if (!audio.src) {\n        \n        if (currentTrack) {\n          audio.src = currentTrack.file_path;\n          audio.load();\n        } else {\n          console.log('No track to play');\n          return;\n        }\n      }\n      \n      if (isPlaying) {\n        audio.pause();\n        setIsPlaying(false);\n        \n      } else {\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(() => {\n              setIsPlaying(true);\n              \n              if (currentTrack) {\n                axios.post('/api/user/now-playing', { \n                  track_id: currentTrack.id,\n                  artist: currentTrack.artist,\n                  title: currentTrack.title\n                }, { withCredentials: true })\n                  .catch(error => console.error('    now playing:', error));\n              }\n            })\n            .catch(error => {\n              console.error('  :', error);\n              setIsPlaying(false);\n            });\n        }\n      }\n    } catch (error) {\n      console.error('   :', error);\n    }\n  };\n\n  \n  const nextTrack = async () => {\n    if (isTrackLoading) {\n      console.log('Track is still loading, ignoring next track request');\n      return;\n    }\n    \n    setIsTrackLoading(true);\n    \n    try {\n      const nextTrackItem = await getNextTrack();\n      if (nextTrackItem) {\n        playTrack(nextTrackItem, currentSection);\n      } else {\n        console.log('No next track available');\n        setIsTrackLoading(false);\n      }\n    } catch (error) {\n      console.error('Error playing next track:', error);\n      setIsTrackLoading(false);\n    }\n  };\n\n  \n  const prevTrack = async () => {\n    if (isTrackLoading) {\n      console.log('Track is still loading, ignoring previous track request');\n      return;\n    }\n    \n    setIsTrackLoading(true);\n    \n    try {\n      \n      \n      if (currentTime < 3) {\n        const prevTrackItem = await getPreviousTrack();\n        if (prevTrackItem) {\n          playTrack(prevTrackItem, currentSection);\n        } else {\n          \n          audioRef.current.currentTime = 0;\n          setIsTrackLoading(false);\n        }\n      } else {\n        \n        audioRef.current.currentTime = 0;\n        setIsTrackLoading(false);\n      }\n    } catch (error) {\n      console.error('Error playing previous track:', error);\n      setIsTrackLoading(false);\n    }\n  };\n\n  \n  const getNextTrack = async () => {\n    try {\n      if (!currentTrack) return null;\n      \n      if (currentSection && currentSection.startsWith('playlist_')) {\n        const playlistId = currentSection;\n        const tracksInPlaylist = playlistTracks[playlistId] || [];\n        \n        if (tracksInPlaylist.length === 0) {\n          console.log('Playlist is empty, returning null');\n          return null;\n        }\n        \n        const currentIndex = tracksInPlaylist.findIndex(track => track.id === currentTrack.id);\n        \n        if (currentIndex === -1) {\n          console.log('Current track not found in playlist, returning first track');\n          return tracksInPlaylist[0];\n        }\n        \n        if (currentIndex < tracksInPlaylist.length - 1) {\n          return tracksInPlaylist[currentIndex + 1];\n        } else {\n          console.log('Last track in playlist, returning first track (loop)');\n          return tracksInPlaylist[0];\n        }\n      }\n      \n      let trackList;\n      switch (currentSection) {\n        case 'popular':\n          trackList = popularTracks;\n          break;\n        case 'liked':\n          trackList = likedTracks;\n          break;\n        case 'new':\n          trackList = newTracks;\n          break;\n        case 'random':\n          trackList = randomTracks;\n          break;\n        case 'search':\n          trackList = searchResults;\n          break;\n        default:\n          trackList = tracks;\n      }\n      \n      if (!trackList || trackList.length === 0) {\n        return null;\n      }\n      \n      \n      const currentIndex = trackList.findIndex(track => track.id === currentTrack.id);\n      \n      if (currentIndex === -1) {\n        \n        return trackList[0];\n      }\n      \n      \n      \n      \n      const isNearingEnd = currentIndex >= trackList.length - 3;\n      const isNearing15Increment = (currentIndex + 1) % 15 >= 12 || (currentIndex + 1) % 15 === 0;\n      \n      if ((isNearingEnd || isNearing15Increment) && hasMoreByType[currentSection]) {\n        console.log(`Trigger pagination: ${isNearingEnd ? 'nearing end of list' : 'approaching track at multiple of 15'}`);\n        console.log(`Current index: ${currentIndex}, Total tracks in list: ${trackList.length}`);\n        \n        loadMoreTracks(currentSection);\n      }\n      \n      \n      if (currentIndex < trackList.length - 1) {\n        return trackList[currentIndex + 1];\n      } else {\n        \n        \n        if (hasMoreByType[currentSection]) {\n          console.log(\"Reached last track, attempting to load more before looping\");\n          const loaded = await loadMoreTracks(currentSection);\n          \n          \n          if (loaded) {\n            \n            let updatedTrackList;\n            switch (currentSection) {\n              case 'popular':\n                updatedTrackList = popularTracks;\n                break;\n              case 'liked':\n                updatedTrackList = likedTracks;\n                break;\n              case 'new':\n                updatedTrackList = newTracks;\n                break;\n              case 'random':\n                updatedTrackList = randomTracks;\n                break;\n              case 'search':\n                updatedTrackList = searchResults;\n                break;\n              default:\n                updatedTrackList = tracks;\n            }\n            \n            \n            if (updatedTrackList.length > trackList.length) {\n              console.log(\"New tracks loaded, returning the first new track\");\n              return updatedTrackList[trackList.length]; \n            }\n          }\n        }\n        \n        \n        return trackList[0];\n      }\n    } catch (error) {\n      console.error('Error getting next track:', error);\n      return null;\n    }\n  };\n\n  \n  const getPreviousTrack = async () => {\n    try {\n      if (!currentTrack) return null;\n      \n      if (currentSection && currentSection.startsWith('playlist_')) {\n        const playlistId = currentSection;\n        const tracksInPlaylist = playlistTracks[playlistId] || [];\n        \n        if (tracksInPlaylist.length === 0) {\n          console.log('Playlist is empty, returning null');\n          return null;\n        }\n        \n        const currentIndex = tracksInPlaylist.findIndex(track => track.id === currentTrack.id);\n        \n        if (currentIndex === -1) {\n          console.log('Current track not found in playlist, returning last track');\n          return tracksInPlaylist[tracksInPlaylist.length - 1];\n        }\n        \n        if (currentIndex > 0) {\n          return tracksInPlaylist[currentIndex - 1];\n        } else {\n          console.log('First track in playlist, returning last track (loop)');\n          return tracksInPlaylist[tracksInPlaylist.length - 1];\n        }\n      }\n      \n      let trackList;\n      switch (currentSection) {\n        case 'popular':\n          trackList = popularTracks;\n          break;\n        case 'liked':\n          trackList = likedTracks;\n          break;\n        case 'new':\n          trackList = newTracks;\n          break;\n        case 'random':\n          trackList = randomTracks;\n          break;\n        case 'search':\n          trackList = searchResults;\n          break;\n        default:\n          trackList = tracks;\n      }\n      \n      if (!trackList || trackList.length === 0) {\n        return null;\n      }\n      \n      \n      const currentIndex = trackList.findIndex(track => track.id === currentTrack.id);\n      \n      if (currentIndex === -1) {\n        \n        return trackList[trackList.length - 1];\n      }\n      \n      \n      \n      \n      const isNearingStart = currentIndex <= 2;\n      const isNearing15Increment = currentIndex % 15 <= 2 || currentIndex % 15 === 14;\n      \n      if ((isNearingStart || isNearing15Increment) && hasMoreByType[currentSection]) {\n        console.log(`Trigger pagination backward: ${isNearingStart ? 'nearing start of list' : 'approaching track at multiple of 15'}`);\n        console.log(`Current index: ${currentIndex}, Total tracks in list: ${trackList.length}`);\n        \n        loadMoreTracks(currentSection);\n      }\n      \n      \n      if (currentIndex > 0) {\n        return trackList[currentIndex - 1];\n      }\n      \n      \n      return trackList[trackList.length - 1];\n    } catch (error) {\n      console.error('Error getting previous track:', error);\n      return null;\n    }\n  };\n\n  \n  useEffect(() => {\n    const audio = audioRef.current;\n    \n    const handleEnded = async () => {\n      \n      if (crossfadeTimeoutRef.current) {\n        console.log('Crossfade is active, letting it handle the transition');\n        return;\n      }\n      \n      console.log('Track ended, playing next track');\n      \n      \n      try {\n        const nextTrackItem = await getNextTrack();\n        if (nextTrackItem) {\n          playTrack(nextTrackItem, currentSection);\n        } else {\n          console.log('No next track available after current track ended');\n        }\n      } catch (error) {\n        console.error('Error auto-playing next track:', error);\n      }\n    };\n    \n    \n    audio.addEventListener('ended', handleEnded);\n    \n    \n    return () => {\n      audio.removeEventListener('ended', handleEnded);\n    };\n  }, [currentTrack, currentSection]);\n\n  \n  const setVolumeHandler = (newVolume) => {\n    setVolume(newVolume);\n    audioRef.current.volume = newVolume;\n    \n    if (newVolume === 0) {\n      setIsMuted(true);\n    } else {\n      setIsMuted(false);\n    }\n  };\n\n  \n  const toggleMute = () => {\n    if (isMuted) {\n      audioRef.current.volume = volume;\n      setIsMuted(false);\n    } else {\n      audioRef.current.volume = 0;\n      setIsMuted(true);\n    }\n  };\n\n  \n  const seekTo = (time) => {\n    if (audioRef.current) {\n\n      audioRef.current.currentTime = time;\n      \n\n      setCurrentTime(time);\n      \n\n      currentTimeRef.current = time;\n    }\n  };\n\n  \n  const likeTrack = async (trackId) => {\n    try {\n      console.log(`Attempting to like/unlike track with ID: ${trackId}`);\n      \n      \n      const trackToUpdate = currentTrack && currentTrack.id === trackId \n        ? currentTrack \n        : tracks.find(t => t.id === trackId) || \n          popularTracks.find(t => t.id === trackId) || \n          newTracks.find(t => t.id === trackId) || \n          randomTracks.find(t => t.id === trackId) || \n          likedTracks.find(t => t.id === trackId);\n      \n      if (trackToUpdate) {\n        \n        const newIsLiked = !trackToUpdate.is_liked;\n        \n        \n        if (currentTrack && currentTrack.id === trackId) {\n          setCurrentTrack({\n            ...currentTrack,\n            is_liked: newIsLiked,\n            likes_count: newIsLiked \n              ? (currentTrack.likes_count || 0) + 1 \n              : Math.max(0, (currentTrack.likes_count || 0) - 1)\n          });\n        }\n        \n        \n        const updateTrackInList = (list) => {\n          return list.map(track => {\n            if (track.id === trackId) {\n              return {\n                ...track,\n                is_liked: newIsLiked,\n                likes_count: newIsLiked \n                  ? (track.likes_count || 0) + 1 \n                  : Math.max(0, (track.likes_count || 0) - 1)\n              };\n            }\n            return track;\n          });\n        };\n        \n        \n        setTracks(updateTrackInList(tracks));\n        setPopularTracks(updateTrackInList(popularTracks));\n        setNewTracks(updateTrackInList(newTracks));\n        setRandomTracks(updateTrackInList(randomTracks));\n        \n        \n        if (newIsLiked) {\n          \n          if (likedTracks.findIndex(track => track.id === trackId) === -1) {\n            const updatedTrack = { ...trackToUpdate, is_liked: true };\n            setLikedTracks([updatedTrack, ...likedTracks]);\n          }\n        } else {\n          \n          setLikedTracks(likedTracks.filter(track => track.id !== trackId));\n        }\n      }\n      \n      \n      const response = await axios.post(`/api/music/${trackId}/like`, {}, {\n        headers: { 'Content-Type': 'application/json' },\n        withCredentials: true\n      });\n      \n      console.log(`API response:`, response.data);\n      \n      if (response.data.success) {\n        const isLiked = response.data.is_liked;\n        console.log(`Track ${trackId} ${isLiked ? 'liked' : 'unliked'} successfully`);\n        \n        \n        if (trackToUpdate && trackToUpdate.is_liked !== isLiked) {\n          console.log('Server state different from local, updating again');\n          \n          \n          const updateTrackInList = (list) => {\n            return list.map(track => {\n              if (track.id === trackId) {\n                return {\n                  ...track,\n                  is_liked: isLiked,\n                  likes_count: isLiked \n                    ? (track.likes_count || 0) + 1 \n                    : Math.max(0, (track.likes_count || 0) - 1)\n                };\n              }\n              return track;\n            });\n          };\n          \n          \n          setTracks(updateTrackInList(tracks));\n          setPopularTracks(updateTrackInList(popularTracks));\n          setNewTracks(updateTrackInList(newTracks));\n          setRandomTracks(updateTrackInList(randomTracks));\n          \n          \n          if (!isLiked) {\n            setLikedTracks(likedTracks.filter(track => track.id !== trackId));\n          } else if (likedTracks.findIndex(track => track.id === trackId) === -1) {\n            const trackToAdd = \n              tracks.find(track => track.id === trackId) ||\n              popularTracks.find(track => track.id === trackId) ||\n              newTracks.find(track => track.id === trackId) ||\n              randomTracks.find(track => track.id === trackId);\n              \n            if (trackToAdd) {\n              const updatedTrack = { ...trackToAdd, is_liked: true };\n              setLikedTracks([updatedTrack, ...likedTracks]);\n            }\n          }\n        }\n        \n        \n        likedTracksLastLoadedRef.current = Date.now();\n        \n        return { success: true, is_liked: isLiked };\n      } else {\n        console.error('  / :', response.data.message);\n        \n        \n        if (trackToUpdate) {\n          const isLiked = trackToUpdate.is_liked; \n          \n          \n          const updateTrackInList = (list) => {\n            return list.map(track => {\n              if (track.id === trackId) {\n                return {\n                  ...track,\n                  is_liked: isLiked,\n                  likes_count: isLiked \n                    ? (track.likes_count || 0) \n                    : Math.max(0, (track.likes_count || 0))\n                };\n              }\n              return track;\n            });\n          };\n          \n          \n          setTracks(updateTrackInList(tracks));\n          setPopularTracks(updateTrackInList(popularTracks));\n          setNewTracks(updateTrackInList(newTracks));\n          setRandomTracks(updateTrackInList(randomTracks));\n          \n          \n          if (currentTrack && currentTrack.id === trackId) {\n            setCurrentTrack({\n              ...currentTrack,\n              is_liked: isLiked\n            });\n          }\n        }\n        \n        return { success: false, message: response.data.message };\n      }\n    } catch (error) {\n      console.error('  / :', error);\n      \n      \n      if (currentTrack && currentTrack.id === trackId) {\n        \n        setCurrentTrack({...currentTrack});\n      }\n      \n      return { success: false, message: '     ' };\n    }\n  };\n\n  \n  const uploadTrack = async (file, trackInfo) => {\n    try {\n      \n      const formData = new FormData();\n      formData.append('audio', file);\n      \n      \n      if (trackInfo) {\n        formData.append('title', trackInfo.title || '');\n        formData.append('artist', trackInfo.artist || '');\n        formData.append('album', trackInfo.album || '');\n      }\n      \n      \n      try {\n        \n        const extractMetadata = () => {\n          return new Promise((resolve, reject) => {\n            if (typeof window.jsmediatags === 'undefined') {\n              console.log('jsmediatags  ,   ');\n              resolve(null);\n              return;\n            }\n            \n            window.jsmediatags.read(file, {\n              onSuccess: function(tag) {\n                console.log(\"  :\", tag);\n                \n                \n                const tags = tag.tags || {};\n                const title = tags.title || '';\n                const artist = tags.artist || '';\n                const album = tags.album || '';\n                \n                \n                let pictureData = null;\n                if (tags.picture) {\n                  const { data, format } = tags.picture;\n                  const base64String = data.reduce((acc, byte) => acc + String.fromCharCode(byte), '');\n                  pictureData = `data:${format};base64,${window.btoa(base64String)}`;\n                }\n                \n                \n                resolve({\n                  title: title || trackInfo?.title || '',\n                  artist: artist || trackInfo?.artist || '',\n                  album: album || trackInfo?.album || '',\n                  pictureData\n                });\n              },\n              onError: function(error) {\n                console.warn(\"   :\", error);\n                resolve(null);\n              }\n            });\n          });\n        };\n        \n        \n        const metadata = await extractMetadata();\n        \n        if (metadata) {\n          \n          if (metadata.title) formData.append('title', metadata.title);\n          if (metadata.artist) formData.append('artist', metadata.artist);\n          if (metadata.album) formData.append('album', metadata.album);\n          \n          \n          if (metadata.pictureData) {\n            \n            const fetchResponse = await fetch(metadata.pictureData);\n            const blob = await fetchResponse.blob();\n            \n            \n            const coverFile = new File([blob], 'cover.jpg', { type: blob.type });\n            formData.append('cover', coverFile);\n          }\n        }\n      } catch (error) {\n        console.error('   :', error);\n      }\n      \n      \n      const response = await axios.post('/api/music/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      if (response.data.success) {\n        \n        const updatedTracks = [response.data.track, ...tracks];\n        setTracks(updatedTracks);\n        \n        \n        const newTracksList = [response.data.track, ...newTracks].slice(0, 10);\n        setNewTracks(newTracksList);\n        \n        return response.data.track;\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('   :', error);\n      return null;\n    }\n  };\n\n  \n  useEffect(() => {\n    if (!currentTrack) return;\n    \n    \n    if ('mediaSession' in navigator) {\n      \n      navigator.mediaSession.metadata = new MediaMetadata({\n        title: currentTrack.title,\n        artist: currentTrack.artist,\n        album: currentTrack.album || '',\n        artwork: [\n          {\n            src: currentTrack.cover_path || '/uploads/system/album_placeholder.jpg',\n            sizes: '512x512',\n            type: 'image/jpeg'\n          }\n        ]\n      });\n      \n      \n      navigator.mediaSession.playbackState = isPlaying ? 'playing' : 'paused';\n      \n      \n      navigator.mediaSession.setActionHandler('play', togglePlay);\n      navigator.mediaSession.setActionHandler('pause', togglePlay);\n      navigator.mediaSession.setActionHandler('nexttrack', nextTrack);\n      navigator.mediaSession.setActionHandler('previoustrack', prevTrack);\n      \n      \n      navigator.mediaSession.setActionHandler('seekto', (details) => {\n        if (details.seekTime) {\n          seekTo(details.seekTime);\n        }\n      });\n      \n      \n      document.addEventListener('visibilitychange', () => {\n        if (document.visibilityState === 'visible') {\n          \n          navigator.mediaSession.playbackState = isPlaying ? 'playing' : 'paused';\n        }\n      });\n      \n      \n      \n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n      if (isIOS) {\n        console.log(\"iOS device detected, applying special handling for media controls\");\n        \n        \n        const audioElement = audioRef.current;\n        \n        const iosPlayHandler = () => {\n          navigator.mediaSession.playbackState = 'playing';\n          navigator.mediaSession.metadata = navigator.mediaSession.metadata;\n        };\n        \n        const iosPauseHandler = () => {\n          navigator.mediaSession.playbackState = 'paused';\n          navigator.mediaSession.metadata = navigator.mediaSession.metadata;\n        };\n        \n        audioElement.addEventListener('play', iosPlayHandler);\n        audioElement.addEventListener('pause', iosPauseHandler);\n        \n        return () => {\n          audioElement.removeEventListener('play', iosPlayHandler);\n          audioElement.removeEventListener('pause', iosPauseHandler);\n        };\n      }\n    }\n  }, [currentTrack, isPlaying]);\n\n  \n  const loadMoreTracks = useCallback(async (type = 'all') => {\n    console.log(`[loadMoreTracks]   : ${type}`);\n    \n    if (isLoadingMoreRef.current) {\n      console.log(`[loadMoreTracks]    ${type}:   `);\n      return false;\n    }\n    \n    \n    const hasMoreForType = hasMoreByType[type] !== false;\n    if (!hasMoreForType) {\n      console.log(`[loadMoreTracks]    ${type}:    (hasMoreByType = ${hasMoreByType[type]})`);\n      return false;\n    }\n    \n    \n    \n    if (pageByType[type] === 1 && (\n      (type === 'all' && tracks.length === 0) ||\n      (type === 'liked' && likedTracks.length === 0) ||\n      (type === 'random' && randomTracks.length === 0) ||\n      (type === 'popular' && popularTracks.length === 0) ||\n      (type === 'new' && newTracks.length === 0)\n    )) {\n      console.log(`[loadMoreTracks]    ${type}:    `);\n      return false;\n    }\n    \n    console.log(`[loadMoreTracks]     : ${type}`);\n    isLoadingMoreRef.current = true;\n    setIsLoadingMore(true);\n    \n    try {\n      \n      let nextPage = pageByType[type] + 1;\n      console.log(`[loadMoreTracks]   ${nextPage}  : ${type}`);\n      \n      let endpoint = '/api/music';\n      let params = { page: nextPage, per_page: 50 };\n      \n      let response;\n      \n      if (type === 'liked') {\n        endpoint = '/api/music/liked';\n        params = { page: nextPage, per_page: 50 };\n        \n        console.log(`[loadMoreTracks]    : ${endpoint}`, params);\n        \n        const config = {\n          params,\n          headers: {\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache',\n            'Expires': '0'\n          },\n          withCredentials: true\n        };\n        \n        response = await axios.get(endpoint, config);\n        console.log(`[loadMoreTracks]    liked :`, {\n          status: response.status,\n          hasData: !!response.data,\n          hasTracks: !!(response.data && response.data.tracks),\n          tracksCount: response.data && response.data.tracks ? response.data.tracks.length : 0\n        });\n      } else if (type === 'popular') {\n        params.sort = 'popular';\n      } else if (type === 'new') {\n        params.sort = 'date';\n      } else if (type === 'random') {\n        params.random = true;\n        \n        params.nocache = Math.random();\n      }\n      \n      console.log(`[loadMoreTracks]     \"${type}\"   ${nextPage}`);\n      \n      \n      await new Promise(resolve => setTimeout(resolve, 300));\n      \n      \n      if (type !== 'liked') {\n        response = await axios.get(endpoint, { params });\n      }\n      \n      \n      let newTracks = [];\n      let has_more = false;\n      \n      \n      if (response && response.data && response.data.tracks) {\n        newTracks = response.data.tracks;\n        has_more = newTracks.length >= 50; \n        \n        if (response.data.has_more !== undefined) {\n          has_more = response.data.has_more;\n        } else if (response.data.pages !== undefined) {\n          has_more = nextPage < response.data.pages;\n        }\n        \n        console.log(`[loadMoreTracks]     { tracks: [...] }, : ${newTracks.length}, has_more: ${has_more}`);\n        \n\n        if (newTracks.length > 0) {\n\n          const prefetchCount = Math.min(2, newTracks.length);\n          console.log(`[loadMoreTracks] Pre-fetching lyrics for first ${prefetchCount} tracks in this batch...`);\n          \n\n          Promise.all(\n            newTracks.slice(0, prefetchCount).map(async (track) => {\n              if (!track.lyricsData) {\n                try {\n                  const lyricsData = await fetchLyricsForTrack(track.id);\n                  if (lyricsData) {\n                    track.lyricsData = lyricsData;\n                  }\n                } catch (err) {\n                  console.error(`[loadMoreTracks] Error pre-fetching lyrics for track ${track.id}:`, err);\n                }\n              }\n            })\n          ).catch(err => console.error('[loadMoreTracks] Error in lyrics pre-fetch batch:', err));\n        }\n      } else if (response && Array.isArray(response.data)) {\n        \n        newTracks = response.data;\n        has_more = newTracks.length >= 50;\n        console.log(`[loadMoreTracks]     , : ${newTracks.length}, has_more: ${has_more}`);\n      } else if (type !== 'liked') {\n        console.warn(`[loadMoreTracks]    API   ${type}:`, response ? response.data : ' ');\n      }\n      \n      \n      if (newTracks.length === 0) {\n        has_more = false;\n        console.log(`[loadMoreTracks]    ,  has_more = false`);\n      }\n      \n      console.log(`[loadMoreTracks]  ${newTracks.length}    ${type},  : ${has_more}`);\n      \n      \n      if (type === 'all') {\n        setTracks(prevTracks => [...prevTracks, ...newTracks]);\n      } else if (type === 'liked') {\n        \n        if (response && response.data && response.data.tracks) {\n          console.log(`[loadMoreTracks]  ${response.data.tracks.length}     ${likedTracks.length}`);\n          setLikedTracks(prevTracks => [...prevTracks, ...response.data.tracks]);\n        } else {\n          console.log(`[loadMoreTracks]  ${newTracks.length}     ${likedTracks.length}`);\n          setLikedTracks(prevTracks => [...prevTracks, ...newTracks]);\n        }\n      } else if (type === 'popular') {\n        setPopularTracks(prevTracks => [...prevTracks, ...newTracks]);\n      } else if (type === 'new') {\n        setNewTracks(prevTracks => [...prevTracks, ...newTracks]);\n      } else if (type === 'random') {\n        \n        const shuffledNewTracks = [...newTracks].sort(() => Math.random() - 0.5);\n        setRandomTracks(prevTracks => [...prevTracks, ...shuffledNewTracks]);\n        console.log('[loadMoreTracks]     :', shuffledNewTracks.length);\n      }\n      \n      \n      setPageByType(prev => ({\n        ...prev,\n        [type]: nextPage\n      }));\n      console.log(`[loadMoreTracks]     ${type}  ${nextPage}`);\n      \n      \n      setHasMoreByType(prev => ({\n        ...prev,\n        [type]: has_more\n      }));\n      console.log(`[loadMoreTracks]   hasMoreByType[${type}] = ${has_more}`);\n      \n      \n      if (currentSection === type) {\n        setHasMoreTracks(has_more);\n        console.log(`[loadMoreTracks]    hasMoreTracks = ${has_more}`);\n      }\n      \n      \n      if (has_more) {\n        setTimeout(() => {\n          preloadNextPage(nextPage + 1, type);\n        }, 1000);\n        console.log(`[loadMoreTracks]     ${nextPage + 1}   ${type}`);\n      }\n      \n      console.log(`[loadMoreTracks]      ${type}`);\n      return true;\n    } catch (error) {\n      console.error('[loadMoreTracks]    :', error);\n      \n      \n      if (error.response && error.response.status === 404) {\n        setHasMoreByType(prev => ({ ...prev, [type]: false }));\n        if (currentSection === type) {\n          setHasMoreTracks(false);\n        }\n        console.log(`[loadMoreTracks]  404,  hasMoreByType[${type}] = false`);\n      }\n      \n      return false;\n    } finally {\n      isLoadingMoreRef.current = false;\n      setIsLoadingMore(false);\n      console.log(`[loadMoreTracks]      ${type}`);\n    }\n  }, [pageByType, hasMoreByType, tracks.length, likedTracks.length, randomTracks.length, popularTracks.length, newTracks.length, currentSection]);\n  \n  \n  const preloadNextPage = useCallback(async (nextPage, type = 'all') => {\n    try {\n      \n      const now = Date.now();\n      const lastPreloadTime = preloadTimeRef.current?.[type] || 0;\n      \n      \n      if (now - lastPreloadTime < 30000) {\n        console.log(`   ${type}:   30    `);\n        return;\n      }\n      \n      \n      preloadTimeRef.current = {\n        ...(preloadTimeRef.current || {}),\n        [type]: now\n      };\n      \n      \n      if (type === 'liked') {\n        let endpoint = '/api/music/liked';\n        let params = { page: nextPage, per_page: 50 };\n        \n        try {\n          const response = await axios.get(endpoint, { \n            params,\n            headers: {\n              'Cache-Control': 'max-age=300'  \n            }\n          });\n          console.log(` ${response.data.tracks?.length || 0}     ${nextPage}`);\n        } catch (error) {\n          console.error('    :', error);\n        }\n        return;\n      }\n      \n      let endpoint = '/api/music';\n      let params = { page: nextPage, per_page: 50 };\n      \n      \n      if (type === 'popular') {\n        params.sort = 'popular';\n      } else if (type === 'new') {\n        params.sort = 'date';\n      } else if (type === 'random') {\n        params.random = true;\n      }\n      \n      const response = await axios.get(endpoint, { \n        params,\n        headers: {\n          'Cache-Control': 'max-age=300'  \n        }\n      });\n      console.log(` ${response.data.tracks.length}    ${nextPage} (: ${type})`);\n    } catch (error) {\n      console.error('   :', error);\n    }\n  }, []);\n\n  \n  const searchTracks = async (query) => {\n    if (!query || query.trim() === '') {\n      setSearchResults([]);\n      return [];\n    }\n    \n    try {\n      setIsSearching(true);\n      \n      const response = await axios.get('/api/music/search', {\n        params: { query: query.trim() },\n        timeout: 10000, \n        headers: {\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache',\n          'Expires': '0'\n        }\n      });\n      \n      const tracks = response.data;\n      console.log(\"Search results:\", tracks);\n      \n      \n      const processedTracks = Array.isArray(tracks) ? tracks.map(track => {\n        return {\n          ...track,\n          \n          is_liked: typeof track.is_liked === 'boolean' ? track.is_liked : \n                    Boolean(likedTracks.find(lt => lt.id === track.id)),\n          \n          file_path: track.file_path || \"/static/uploads/system/audio_placeholder.mp3\",\n          cover_path: track.cover_path || \"/static/uploads/system/album_placeholder.jpg\"\n        };\n      }) : [];\n      \n      setSearchResults(processedTracks);\n      return processedTracks;\n    } catch (error) {\n      console.error('Error searching tracks:', error);\n      \n      \n      if (error.response) {\n        \n        if (error.response.status === 401) {\n          console.error('Authentication required for music search');\n        } else {\n          console.error(`Server error: ${error.response.status} - ${error.response.data?.error || 'Unknown error'}`);\n        }\n      } else if (error.request) {\n        \n        console.error('No response received from server during search');\n      } else {\n        \n        console.error('Error setting up search request:', error.message);\n      }\n      \n      return [];\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  \n  const resetPagination = useCallback(async (type, randomize = false) => {\n    console.log(`[resetPagination]    : ${type}, randomize: ${randomize ? 'true' : 'false'}`);\n    \n    \n    setPageByType(prev => ({\n      ...prev,\n      [type]: 1\n    }));\n    \n    \n    return new Promise(async (resolve, reject) => {\n      try {\n        \n        let url = '/api/music';\n        let params = { page: 1, per_page: 50 };\n        \n        if (type === 'liked') {\n          url = '/api/music/liked';\n          \n          \n          try {\n            const config = {\n              params,\n              headers: {\n                'Cache-Control': 'no-cache',\n                'Pragma': 'no-cache',\n                'Expires': '0'\n              },\n              withCredentials: true\n            };\n            \n            console.log('[resetPagination]   ', config);\n            const response = await axios.get(url, config);\n            \n            if (response.data && response.data.tracks) {\n              const receivedTracks = response.data.tracks;\n              console.log(`[resetPagination]  ${receivedTracks.length}  `);\n              \n              \n              const hasMore = receivedTracks.length >= params.per_page;\n              console.log(`[resetPagination]  hasMoreByType[liked] = ${hasMore}`);\n              \n              setLikedTracks(receivedTracks);\n              setHasMoreByType(prev => ({ ...prev, liked: hasMore }));\n              \n              if (currentSection === 'liked') {\n                setHasMoreTracks(hasMore);\n              }\n              \n              resolve(true);\n              return;\n            } else {\n              console.log('[resetPagination]     ');\n              setLikedTracks([]);\n              setHasMoreByType(prev => ({ ...prev, liked: false }));\n              \n              if (currentSection === 'liked') {\n                setHasMoreTracks(false);\n              }\n              \n              resolve(false);\n              return;\n            }\n          } catch (error) {\n            console.error('[resetPagination]     :', error);\n            setHasMoreByType(prev => ({ ...prev, liked: false }));\n            \n            if (currentSection === 'liked') {\n              setHasMoreTracks(false);\n            }\n            \n            reject(error);\n            return;\n          }\n        } else if (type === 'popular') {\n          params.sort = 'popular';\n        } else if (type === 'new') {\n          params.sort = 'date';\n        }\n        \n        \n        if (randomize) {\n          params.random = true;\n          \n          params.nocache = Math.random();\n        }\n        \n        \n        const response = await axios.get(url, { params });\n        \n        if (response.data && response.data.tracks) {\n          const receivedTracks = response.data.tracks;\n          \n          \n          if (type === 'all') {\n            setTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, all: receivedTracks.length >= 50 }));\n          } else if (type === 'liked') {\n            setLikedTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, liked: receivedTracks.length >= 50 }));\n          } else if (type === 'popular') {\n            setPopularTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, popular: receivedTracks.length >= 50 }));\n          } else if (type === 'new') {\n            setNewTracks(receivedTracks);\n            setHasMoreTracks(receivedTracks.length >= 50);\n            setHasMoreByType(prev => ({ ...prev, new: receivedTracks.length >= 50 }));\n          }\n          \n          \n          resolve(true);\n        } else {\n          \n          reject(new Error('   '));\n        }\n      } catch (error) {\n        console.error(`      ${type}:`, error);\n        reject(error);\n      }\n    });\n  }, []);\n\n  \n  useEffect(() => {\n    \n    if (initialMount.current) {\n      try {\n        const savedTrack = localStorage.getItem('currentTrack');\n        const savedSection = localStorage.getItem('currentSection') || 'all';\n        \n        if (savedTrack) {\n          const parsedTrack = JSON.parse(savedTrack);\n          setCurrentTrack(parsedTrack);\n          \n          setCurrentSection(savedSection);\n          \n          audioRef.current.src = parsedTrack.file_path;\n          audioRef.current.volume = volume;\n          setIsPlaying(false);\n          \n          console.log('    localStorage:', parsedTrack.title);\n        }\n      } catch (error) {\n        console.error('   :', error);\n      }\n      \n      initialMount.current = false;\n    }\n  }, [volume]);\n\n  \n  \n  useEffect(() => {\n    let inactivityTimer = null;\n    let lastClearTime = Date.now();\n    const throttleTime = 15000; \n    \n    \n    const clearNowPlayingStatus = () => {\n      const now = Date.now();\n      \n      if (now - lastClearTime > throttleTime) {\n        lastClearTime = now;\n        axios.post('/api/user/clear-now-playing', {}, { withCredentials: true })\n          .then(response => {\n            console.log(' now playing ', response.data);\n          })\n          .catch(error => {\n            console.error('    now playing:', error);\n          });\n      }\n    };\n    \n    \n    if (isPlaying && currentTrack) {\n      \n      if (inactivityTimer) {\n        clearTimeout(inactivityTimer);\n      }\n      \n      \n      inactivityTimer = setTimeout(() => {\n        \n        clearNowPlayingStatus();\n      }, 5 * 60 * 1000); \n    } else if (!isPlaying && currentTrack) {\n      \n      if (inactivityTimer) {\n        clearTimeout(inactivityTimer);\n      }\n      \n      inactivityTimer = setTimeout(() => {\n        clearNowPlayingStatus();\n      }, 5 * 60 * 1000); \n    }\n    \n    \n    return () => {\n      if (inactivityTimer) {\n        clearTimeout(inactivityTimer);\n      }\n      \n      clearNowPlayingStatus();\n    };\n  }, [isPlaying, currentTrack]);\n\n  \n  const getCurrentTimeRaw = useCallback(() => {\n    const audio = audioRef.current;\n\n    if (audio && !isNaN(audio.currentTime)) {\n      return audio.currentTime;\n    }\n    return currentTimeRef.current || 0;\n  }, []);\n\n  \n  const getDurationRaw = useCallback(() => {\n    const audio = audioRef.current;\n\n    if (audio && !isNaN(audio.duration)) {\n      return audio.duration;\n    }\n    return durationRef.current || 0;\n  }, []);\n\n  \n  const setPlaylistTracks = useCallback((tracks, playlistId) => {\n    console.log(`Setting ${tracks.length} tracks for playlist ${playlistId}`);\n    setPlaylistTracksState(prevState => ({\n      ...prevState,\n      [playlistId]: tracks\n    }));\n  }, []);\n\n  \n  const musicContextValue = {\n    tracks,\n    popularTracks,\n    likedTracks,\n    newTracks,\n    randomTracks,\n    currentTrack,\n    isPlaying,\n    volume,\n    isMuted,\n    currentTime,\n    duration,\n    isLoading,\n    audioRef,\n    hasMoreTracks,\n    hasMoreByType,\n    currentSection,\n    isTrackLoading,\n    setCurrentTrack,\n    setCurrentSection,\n    setRandomTracks,\n    playTrack,\n    togglePlay,\n    nextTrack,\n    prevTrack,\n    setVolume: setVolumeHandler,\n    toggleMute,\n    seekTo,\n    likeTrack,\n    uploadTrack,\n    loadMoreTracks,\n    resetPagination,\n    enableCrossfade,\n    setEnableCrossfade,\n    searchResults,\n    isSearching,\n    searchTracks,\n    getCurrentTimeRaw,\n    getDurationRaw,\n    playlistTracks,\n    setPlaylistTracks,\n  };\n\n  return (\n    <MusicContext.Provider value={musicContextValue}>\n      {children}\n    </MusicContext.Provider>\n  );\n};\n\n\nexport const useMusic = () => useContext(MusicContext); ","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport PropTypes from 'prop-types';\n\n//  URL    (     URL)\nconst BASE_URL = 'https://k-connect.ru';\n\n/**\n * SEO       \n *          \n * \n * @param {Object} props -  \n * @param {string} props.title -  \n * @param {string} props.description -  \n * @param {string} props.image - URL   \n * @param {string} props.url - URL \n * @param {string} props.type -   (article, profile, website  ..)\n * @param {Object} props.meta -  -\n */\nconst SEO = ({\n  title = '-',\n  description = '- -     ',\n  image = '/icon-512.png',\n  url = typeof window !== 'undefined' ? window.location.href : 'https://k-connect.ru',\n  type = 'website',\n  meta = {},\n}) => {\n  \n  //   URL   \n  const pageUrl = url.startsWith('http') \n    ? url \n    : `${BASE_URL}${url.startsWith('/') ? url : `/${url}`}`;\n  \n  //   URL  \n  const getAbsoluteImageUrl = (imagePath) => {\n    if (!imagePath) return `${BASE_URL}/icon-512.png`;\n    if (imagePath.startsWith('http') || imagePath.startsWith('//')) return imagePath;\n    \n    //    \n    let cleanPath = imagePath;\n    \n    if (imagePath.includes('//')) {\n      const parts = imagePath.split('//');\n      cleanPath = parts[parts.length - 1];\n      if (cleanPath.startsWith('/')) cleanPath = cleanPath.substring(1);\n    }\n    \n    //   \n    return `${BASE_URL}${cleanPath.startsWith('/') ? '' : '/'}${cleanPath}`;\n  };\n\n  const absoluteImageUrl = getAbsoluteImageUrl(image);\n\n  return (\n    <Helmet \n      prioritizeSeoTags \n      encodeSpecialCharacters={false}\n      //   defer={false}    \n      defer={false}\n    >\n      {/*   */}\n      <title>{title}</title>\n      <meta name=\"description\" content={description} />\n      <link rel=\"canonical\" href={pageUrl} />\n      \n      {/*   */}\n      <meta name=\"robots\" content=\"index, follow\" />\n      <meta name=\"googlebot\" content=\"index, follow\" />\n      <meta name=\"google\" content=\"notranslate\" />\n      {meta.googleVerification && <meta name=\"google-site-verification\" content={meta.googleVerification} />}\n      {meta.yandexVerification && <meta name=\"yandex-verification\" content={meta.yandexVerification} />}\n      \n      {/* OpenGraph  -  Facebook, VK  Telegram */}\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:image\" content={absoluteImageUrl} />\n      <meta property=\"og:url\" content={pageUrl} />\n      <meta property=\"og:type\" content={type} />\n      <meta property=\"og:site_name\" content=\"-\" />\n      <meta property=\"og:locale\" content=\"ru_RU\" />\n      \n      {/*     */}\n      <meta property=\"og:image:width\" content=\"1200\" />\n      <meta property=\"og:image:height\" content=\"630\" />\n      <meta property=\"og:image:alt\" content={title} />\n      \n      {/* Twitter Card  */}\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={title} />\n      <meta name=\"twitter:description\" content={description} />\n      <meta name=\"twitter:image\" content={absoluteImageUrl} />\n      \n      {/*   */}\n      {meta.keywords && <meta name=\"keywords\" content={meta.keywords} />}\n      {meta.author && <meta name=\"author\" content={meta.author} />}\n      {meta.viewport && <meta name=\"viewport\" content={meta.viewport || \"width=device-width, initial-scale=1, maximum-scale=5\"} />}\n      \n      {/*     */}\n      {type === 'article' && meta.publishedTime && (\n        <meta property=\"article:published_time\" content={meta.publishedTime} />\n      )}\n      {type === 'article' && meta.author && (\n        <meta property=\"article:author\" content={meta.author} />\n      )}\n      \n      {/* Schema.org JSON-LD -    Google */}\n      {type === 'article' && (\n        <script type=\"application/ld+json\">\n          {JSON.stringify({\n            \"@context\": \"https://schema.org\",\n            \"@type\": \"Article\",\n            \"headline\": title,\n            \"description\": description,\n            \"image\": absoluteImageUrl,\n            \"author\": meta.author || \"-\",\n            \"datePublished\": meta.publishedTime || new Date().toISOString(),\n            \"url\": pageUrl\n          })}\n        </script>\n      )}\n    </Helmet>\n  );\n};\n\nSEO.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string,\n  image: PropTypes.string,\n  url: PropTypes.string,\n  type: PropTypes.string,\n  meta: PropTypes.object,\n};\n\nexport default SEO; ","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst PostDetailContext = createContext();\n\nexport const PostDetailProvider = ({ children }) => {\n  const [overlayOpen, setOverlayOpen] = useState(false);\n  const [currentPostId, setCurrentPostId] = useState(null);\n  const [backgroundLocation, setBackgroundLocation] = useState(null);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  \n  useEffect(() => {\n    const match = location.pathname.match(/\\/post\\/(\\d+)/);\n    if (match && match[1]) {\n      const postId = match[1];\n      setCurrentPostId(postId);\n      \n      \n      if (!overlayOpen && location.state?.background) {\n        setOverlayOpen(true);\n      }\n    } else if (overlayOpen) {\n      \n      setOverlayOpen(false);\n      setCurrentPostId(null);\n    }\n  }, [location, overlayOpen]);\n\n  const openPostDetail = (postId, event) => {\n    \n    if (event && (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey)) {\n      return true; \n    }\n    \n    if (event) {\n      event.preventDefault(); \n      event.stopPropagation(); \n    }\n    \n    console.log(\"Opening post detail for post ID:\", postId);\n    setCurrentPostId(postId);\n    setBackgroundLocation(location);\n    setOverlayOpen(true);\n    \n    \n    navigate(`/post/${postId}`, { \n      state: { background: location },\n      replace: false\n    });\n    \n    return false; \n  };\n\n  const closePostDetail = () => {\n    setOverlayOpen(false);\n    \n    \n    if (backgroundLocation) {\n      navigate(backgroundLocation.pathname + backgroundLocation.search, { replace: true });\n    } else {\n      \n      navigate('/');\n    }\n    \n    setCurrentPostId(null);\n    setBackgroundLocation(null);\n  };\n\n  return (\n    <PostDetailContext.Provider value={{ \n      overlayOpen, \n      currentPostId,\n      backgroundLocation,\n      openPostDetail,\n      closePostDetail\n    }}>\n      {children}\n    </PostDetailContext.Provider>\n  );\n};\n\nexport const usePostDetail = () => useContext(PostDetailContext);\n\nexport default PostDetailContext; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z\"\n}), 'CloudUpload');","import React from 'react';\nimport { Card, Typography, Box, Container } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { motion } from 'framer-motion';\n\n\nconst StyledCard = styled(motion.create(Card))(({ theme }) => ({\n  backgroundColor: theme.palette.background.paper,\n  borderRadius: theme.shape.borderRadius * 2,\n  padding: theme.spacing(4),\n  width: '100%',\n  maxWidth: 450,\n  boxShadow: '0 10px 30px rgba(0, 0, 0, 0.25)',\n  position: 'relative',\n  overflow: 'hidden',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: '4px',\n    background: 'linear-gradient(90deg, var(--primary-dark) 0%, var(--primary) 100%)',\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(3),\n    maxWidth: '100%',\n  }\n}));\n\n\nconst Logo = () => (\n  <svg width=\"40\" height=\"40\" viewBox=\"0 0 269 275\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\"\n          d=\"M220.614 15.4742C218.098 4.71887 207.34 -1.9603 196.584 0.555831L163.663 8.25758C163.989 6.08586 164.328 3.8414 164.68 1.52132C164.328 3.84215 163.989 6.08731 163.657 8.25889L15.4743 42.9253C4.71895 45.4414 -1.96021 56.2 0.555918 66.9553L45.5619 259.335C48.078 270.091 58.8367 276.77 69.592 274.254L250.702 231.884C261.457 229.368 268.136 218.609 265.62 207.854L250.015 141.151C254.72 141.776 259.944 142.569 265.759 143.452L265.76 143.453L266.639 143.586C267.061 143.65 267.486 143.715 267.914 143.78C268.257 143.832 268.602 143.884 268.949 143.936C261.788 142.852 255.479 141.871 249.944 140.845L220.614 15.4742ZM217.343 82.3256C211.16 126.53 215.939 134.541 249.944 140.845L250.015 141.151C230.992 138.622 220.454 138.843 213.622 146.992C209.674 140.07 205.239 133.536 200.372 127.425C201.41 126.975 202.368 126.436 203.257 125.8C210.935 120.307 213.432 107.573 217.301 82.3196L217.343 82.3256ZM217.347 82.2964L217.343 82.3256C221.322 82.9129 225.548 83.5524 230.039 84.2321C225.548 83.5524 221.322 82.9128 217.347 82.2964ZM217.306 82.29L217.301 82.3196C186.826 77.823 170.854 76.4019 161.359 83.5659C159.258 85.1515 157.474 87.1576 155.92 89.6441C152.55 87.7585 149.106 86.0015 145.596 84.3772C145.027 83.1231 144.356 81.9592 143.575 80.8746C135.715 69.9579 116.692 67.079 77.7732 61.1894C116.692 67.079 135.715 69.9579 146.453 61.8556C156.037 54.6247 159.021 38.6477 163.657 8.25889L163.663 8.25758C159.1 38.6589 157.223 54.804 164.237 64.5469C171.187 74.1995 186.865 77.568 217.306 82.29ZM146.168 123.196C118.021 104.889 82.3156 98.3741 46.2417 108.08L43.1316 93.0097C41.1425 83.372 47.9436 73.6366 57.6217 72.1587C88.7506 67.4171 119.081 72.1092 145.596 84.3772C149.292 92.5229 148.701 104.473 146.168 123.196ZM146.168 123.196C146.227 123.235 146.287 123.273 146.346 123.312C145.328 129.4 144.293 136.238 143.133 143.9C144.298 136.201 145.337 129.335 146.168 123.196ZM146.346 123.312C172.748 140.551 192.472 168.18 199.562 202.532L214.42 198.532C223.923 195.973 229.572 185.529 226.539 176.22C223.159 165.858 218.811 156.089 213.622 146.992C207.469 154.332 204.324 168.104 200.694 192.092C205.245 162.018 207.456 147.409 201.228 139.207C195.345 131.46 181.933 129.43 155.85 125.483C179.002 128.987 192.171 130.98 200.372 127.425C188.032 111.932 172.916 99.1538 155.92 89.6441C151.553 96.6316 149.006 107.412 146.346 123.312ZM217.306 82.29L217.347 82.2964C217.667 80.0049 218.018 77.6162 218.394 75.1255C218.017 77.6187 217.656 80.0055 217.306 82.29ZM69.4629 220.596L66.1465 204.526C83.6499 199.813 100.806 210.382 104.47 228.134L88.6246 232.4C79.8753 234.768 71.2973 229.484 69.4629 220.596ZM59.5133 172.384L52.8801 140.243C105.399 126.091 156.881 157.806 167.863 211.078L136.173 219.61C128.855 184.151 94.4615 162.963 59.5133 172.384Z\"\n          fill=\"#D0BCFF\"/>\n  </svg>\n);\n\nconst AuthCardContent = ({ title, subtitle, children }) => (\n  <Box sx={{ width: '100%' }}>\n    <Box sx={{ \n      display: 'flex', \n      flexDirection: 'column', \n      alignItems: 'center', \n      marginBottom: 4 \n    }}>\n      <Logo />\n      <Typography variant=\"h4\" component=\"h1\" sx={{ mt: 2, fontWeight: 'bold' }}>\n        <span style={{ color: '#D0BCFF' }}>K</span>-CONNECT\n      </Typography>\n      {title && (\n        <Typography variant=\"h5\" component=\"h2\" sx={{ mt: 3, textAlign: 'center' }}>\n          {title}\n        </Typography>\n      )}\n      {subtitle && (\n        <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mt: 1, textAlign: 'center' }}>\n          {subtitle}\n        </Typography>\n      )}\n    </Box>\n    {children}\n  </Box>\n);\n\nconst AuthCard = ({ title, subtitle, children }) => {\n  return (\n    <Container maxWidth=\"sm\" sx={{ \n      display: 'flex', \n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n      py: 4\n    }}>\n      <StyledCard\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n      >\n        <AuthCardContent title={title} subtitle={subtitle}>\n          {children}\n        </AuthCardContent>\n      </StyledCard>\n    </Container>\n  );\n};\n\nexport default AuthCard; ","import React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { \n  TextField, \n  Button, \n  Alert,\n  CircularProgress,\n  Box,\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Avatar,\n  useMediaQuery,\n  Container,\n  Paper\n} from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport { motion } from 'framer-motion';\nimport AuthCard from '../../components/AuthCard';\nimport AuthService from '../../services/AuthService';\nimport { AuthContext } from '../../context/AuthContext';\nconst RegisterChannel = () => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, setUser } = useContext(AuthContext);\n  const [formData, setFormData] = useState({\n    name: '',\n    interests: '',\n    about: '',\n    agree_terms: false,\n    agree_privacy: false\n  });\n  const [avatar, setAvatar] = useState(null);\n  const [avatarPreview, setAvatarPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (!user) {\n      navigate('/login', { replace: true });\n    }\n  }, [user, navigate]);\n  const handleChange = (e) => {\n    const { name, value, checked } = e.target;\n    const newValue = name === 'agree_terms' || name === 'agree_privacy' ? checked : value;\n    setFormData(prev => ({ ...prev, [name]: newValue }));\n    setError('');\n  };\n  const handleAvatarUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (file.size > 5 * 1024 * 1024) {\n      setError('     5MB');\n      return;\n    }\n    if (!file.type.startsWith('image/')) {\n      setError(',  ');\n      return;\n    }\n    setAvatar(file);\n    setAvatarPreview(URL.createObjectURL(file));\n    setError(null);\n  };\n  const validateForm = () => {\n    if (!formData.name) {\n      setError('     ');\n      return false;\n    }\n    if (!formData.agree_terms || !formData.agree_privacy) {\n      setError('      ');\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setLoading(true);\n    setError('');\n    try {\n      const channelFormData = new FormData();\n      Object.keys(formData).forEach(key => {\n        channelFormData.append(key, formData[key]);\n      });\n      channelFormData.append('account_type', 'channel');\n      channelFormData.append('main_account_id', user.id);\n      if (avatar) {\n        channelFormData.append('photo', avatar);\n      }\n      const response = await fetch('/api/users/create-channel', {\n        method: 'POST',\n        body: channelFormData,\n        credentials: 'include'\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        navigate('/channel-dashboard', { replace: true });\n      } else {\n        setError(data.error || '    ');\n      }\n    } catch (err) {\n      console.error(\"Error:\", err);\n      setError('   . ,  .');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return (\n    <Container \n      disableGutters\n      maxWidth={false} \n      sx={{ \n        display: 'flex',\n        minHeight: '100vh',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n      }}\n    >\n      {!isMobile && (\n        <Box \n          sx={{ \n            flex: '0 0 45%',\n            background: 'linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            position: 'relative',\n            overflow: 'hidden',\n            p: 6\n          }}\n        >\n          <Box sx={{ \n            position: 'absolute',\n            width: '200%',\n            height: '200%',\n            top: '-50%',\n            left: '-50%',\n            background: 'radial-gradient(circle, rgba(208, 188, 255, 0.05) 0%, rgba(208, 188, 255, 0) 70%)',\n            zIndex: 0\n          }} />\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ duration: 0.7, delay: 0.2 }}\n            style={{ position: 'relative', zIndex: 1 }}\n          >\n            <img \n              src=\"/static/icons/clear-logonew.svg\" \n              alt=\"- \" \n              style={{ width: 180, marginBottom: 40 }} \n            />\n          </motion.div>\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ duration: 0.5, delay: 0.5 }}\n            style={{ position: 'relative', zIndex: 1, textAlign: 'center' }}\n          >\n            <Typography variant=\"h3\" sx={{ fontWeight: 700, mb: 2 }}>\n              <span style={{ color: '#D0BCFF' }}></span>-\n            </Typography>\n            <Typography variant=\"h6\" color=\"text.secondary\" sx={{ maxWidth: 400 }}>\n                     \n            </Typography>\n          </motion.div>\n          <Box sx={{ \n            position: 'absolute', \n            bottom: 40, \n            left: 0, \n            right: 0, \n            display: 'flex',\n            justifyContent: 'center',\n            gap: 2\n          }}>\n            {[...Array(3)].map((_, i) => (\n              <motion.div\n                key={i}\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ duration: 0.4, delay: 0.8 + (i * 0.2) }}\n              >\n                <Box sx={{ \n                  width: 12 + (i * 4), \n                  height: 12 + (i * 4), \n                  borderRadius: '50%', \n                  background: `rgba(208, 188, 255, ${0.6 - (i * 0.15)})` \n                }} />\n              </motion.div>\n            ))}\n          </Box>\n        </Box>\n      )}\n      \n      <Box \n        sx={{ \n          flex: isMobile ? 1 : '0 0 55%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          p: 0,\n          background: isMobile ? 'linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)' : 'transparent'\n        }}\n      >\n        <motion.div\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.5 }}\n          style={{ \n            width: '100%', \n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: isMobile ? '16px' : '40px'\n          }}\n        >\n          {isMobile && (\n            <Box sx={{ \n              position: 'absolute',\n              top: '24px',\n              left: 0,\n              width: '100%',\n              textAlign: 'center'\n            }}>\n              <img \n                src=\"/static/icons/clear-logonew.svg\" \n                alt=\"- \" \n                style={{ width: 80, marginBottom: 12 }} \n              />\n              <Typography variant=\"h5\" component=\"h1\" sx={{ fontWeight: 700 }}>\n                <span style={{ color: '#D0BCFF' }}></span>-\n              </Typography>\n            </Box>\n          )}\n          <Paper \n            elevation={isMobile ? 0 : 6}\n            sx={{ \n              p: isMobile ? 3 : 4,\n              width: '100%',\n              maxWidth: '480px',\n              borderRadius: 4,\n              background: isMobile ? 'transparent' : 'rgba(30, 30, 40, 0.85)',\n              backdropFilter: 'blur(10px)',\n              border: isMobile ? 'none' : '1px solid rgba(255, 255, 255, 0.1)',\n              mt: isMobile ? '140px' : 0,\n              overflowY: 'auto',\n              maxHeight: isMobile ? 'calc(100vh - 200px)' : 'fit-content',\n              minHeight: isMobile ? 'auto' : '0',\n              display: 'flex',\n              flexDirection: 'column'\n            }}\n          >\n            <Typography variant=\"h5\" component=\"h2\" sx={{ mb: 1, fontWeight: 600 }}>\n               \n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                   \n            </Typography>\n            {error && (\n              <Alert \n                severity=\"error\" \n                sx={{ \n                  mb: 3,\n                  borderRadius: 2,\n                  '& .MuiAlert-icon': { alignItems: 'center' }\n                }}\n              >\n                {error}\n              </Alert>\n            )}\n            <form onSubmit={handleSubmit} style={{ width: '100%' }}>\n              <Box sx={{ \n                display: 'flex', \n                flexDirection: 'column', \n                alignItems: 'center', \n                mb: 3 \n              }}>\n                <Avatar\n                  src={avatarPreview}\n                  sx={{ \n                    width: 100, \n                    height: 100, \n                    mb: 2,\n                    border: '2px solid #D0BCFF'\n                  }}\n                />\n                <Button\n                  variant=\"outlined\"\n                  component=\"label\"\n                  startIcon={<CloudUploadIcon />}\n                  sx={{ \n                    borderColor: '#D0BCFF', \n                    color: '#D0BCFF',\n                    borderRadius: 2,\n                    '&:hover': {\n                      borderColor: '#B69DF8',\n                      backgroundColor: 'rgba(208, 188, 255, 0.04)'\n                    }\n                  }}\n                >\n                    \n                  <input\n                    type=\"file\"\n                    hidden\n                    accept=\"image/*\"\n                    onChange={handleAvatarUpload}\n                  />\n                </Button>\n              </Box>\n              <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"name\"\n                label=\" \"\n                name=\"name\"\n                autoFocus\n                value={formData.name}\n                onChange={handleChange}\n                variant=\"outlined\"\n                sx={{ \n                  mb: 2.5,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              <TextField\n                margin=\"normal\"\n                fullWidth\n                id=\"interests\"\n                label=\" \"\n                name=\"interests\"\n                value={formData.interests}\n                onChange={handleChange}\n                variant=\"outlined\"\n                placeholder=\", , ...\"\n                sx={{ \n                  mb: 2.5,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              <TextField\n                margin=\"normal\"\n                fullWidth\n                id=\"about\"\n                label=\" \"\n                name=\"about\"\n                value={formData.about}\n                onChange={handleChange}\n                variant=\"outlined\"\n                multiline\n                rows={3}\n                placeholder=\"   ...\"\n                sx={{ \n                  mb: 3,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 600 }}>\n                 \n              </Typography>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    name=\"agree_terms\"\n                    checked={formData.agree_terms}\n                    onChange={handleChange}\n                    color=\"primary\"\n                    required\n                    sx={{\n                      color: '#D0BCFF',\n                      '&.Mui-checked': {\n                        color: '#D0BCFF',\n                      },\n                    }}\n                  />\n                }\n                label={\n                  <Typography variant=\"body2\">\n                     {' '}\n                    <Button \n                      href=\"/terms-of-service\" \n                      target=\"_blank\" \n                      sx={{ \n                        color: '#D0BCFF',\n                        p: 0,\n                        minWidth: 'auto',\n                        fontWeight: 'normal',\n                        textTransform: 'none',\n                        fontSize: 'inherit',\n                        '&:hover': {\n                          background: 'transparent',\n                          textDecoration: 'underline'\n                        }\n                      }}\n                    >\n                       \n                    </Button>\n                  </Typography>\n                }\n                sx={{ mb: 1 }}\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    name=\"agree_privacy\"\n                    checked={formData.agree_privacy}\n                    onChange={handleChange}\n                    color=\"primary\"\n                    required\n                    sx={{\n                      color: '#D0BCFF',\n                      '&.Mui-checked': {\n                        color: '#D0BCFF',\n                      },\n                    }}\n                  />\n                }\n                label={\n                  <Typography variant=\"body2\">\n                      {' '}\n                    <Button \n                      href=\"/privacy\" \n                      target=\"_blank\" \n                      sx={{ \n                        color: '#D0BCFF',\n                        p: 0,\n                        minWidth: 'auto',\n                        fontWeight: 'normal',\n                        textTransform: 'none',\n                        fontSize: 'inherit',\n                        '&:hover': {\n                          background: 'transparent',\n                          textDecoration: 'underline'\n                        }\n                      }}\n                    >\n                       \n                    </Button>\n                  </Typography>\n                }\n                sx={{ mb: 3 }}\n              />\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                size=\"large\"\n                sx={{ \n                  py: 1.5,\n                  borderRadius: 2,\n                  fontSize: '1rem',\n                  textTransform: 'none',\n                  background: 'linear-gradient(90deg, #B69DF8 0%, #D0BCFF 100%)',\n                  boxShadow: '0 4px 12px rgba(182, 157, 248, 0.3)',\n                  '&:hover': {\n                    background: 'linear-gradient(90deg, #D0BCFF 0%, #E9DDFF 100%)',\n                    boxShadow: '0 6px 16px rgba(182, 157, 248, 0.4)',\n                  },\n                  mb: 2\n                }}\n                disabled={loading}\n              >\n                {loading ? <CircularProgress size={24} color=\"inherit\" /> : ' '}\n              </Button>\n            </form>\n          </Paper>\n        </motion.div>\n      </Box>\n    </Container>\n  );\n};\nexport default RegisterChannel; ","'use client';\nimport { createContext, Component, createElement, useContext, useState, useMemo, forwardRef } from 'react';\n\nconst ErrorBoundaryContext = createContext(null);\n\nconst initialState = {\n  didCatch: false,\n  error: null\n};\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      didCatch: true,\n      error\n    };\n  }\n  resetErrorBoundary() {\n    const {\n      error\n    } = this.state;\n    if (error !== null) {\n      var _this$props$onReset, _this$props;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_this$props$onReset = (_this$props = this.props).onReset) === null || _this$props$onReset === void 0 ? void 0 : _this$props$onReset.call(_this$props, {\n        args,\n        reason: \"imperative-api\"\n      });\n      this.setState(initialState);\n    }\n  }\n  componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n    (_this$props$onError = (_this$props2 = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      didCatch\n    } = this.state;\n    const {\n      resetKeys\n    } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (didCatch && prevState.error !== null && hasArrayChanged(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onReset2, _this$props3;\n      (_this$props$onReset2 = (_this$props3 = this.props).onReset) === null || _this$props$onReset2 === void 0 ? void 0 : _this$props$onReset2.call(_this$props3, {\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\"\n      });\n      this.setState(initialState);\n    }\n  }\n  render() {\n    const {\n      children,\n      fallbackRender,\n      FallbackComponent,\n      fallback\n    } = this.props;\n    const {\n      didCatch,\n      error\n    } = this.state;\n    let childToRender = children;\n    if (didCatch) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback !== undefined) {\n        childToRender = fallback;\n      } else {\n        throw error;\n      }\n    }\n    return createElement(ErrorBoundaryContext.Provider, {\n      value: {\n        didCatch,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      }\n    }, childToRender);\n  }\n}\nfunction hasArrayChanged() {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n}\n\nfunction assertErrorBoundaryContext(value) {\n  if (value == null || typeof value.didCatch !== \"boolean\" || typeof value.resetErrorBoundary !== \"function\") {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n\nfunction useErrorBoundary() {\n  const context = useContext(ErrorBoundaryContext);\n  assertErrorBoundaryContext(context);\n  const [state, setState] = useState({\n    error: null,\n    hasError: false\n  });\n  const memoized = useMemo(() => ({\n    resetBoundary: () => {\n      context.resetErrorBoundary();\n      setState({\n        error: null,\n        hasError: false\n      });\n    },\n    showBoundary: error => setState({\n      error,\n      hasError: true\n    })\n  }), [context.resetErrorBoundary]);\n  if (state.hasError) {\n    throw state.error;\n  }\n  return memoized;\n}\n\nfunction withErrorBoundary(component, errorBoundaryProps) {\n  const Wrapped = forwardRef((props, ref) => createElement(ErrorBoundary, errorBoundaryProps, createElement(component, {\n    ...props,\n    ref\n  })));\n\n  // Format for display in DevTools\n  const name = component.displayName || component.name || \"Unknown\";\n  Wrapped.displayName = \"withErrorBoundary(\".concat(name, \")\");\n  return Wrapped;\n}\n\nexport { ErrorBoundary, ErrorBoundaryContext, useErrorBoundary, withErrorBoundary };\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<g fill=\\\"currentColor\\\"><circle cx=\\\"12\\\" cy=\\\"6\\\" r=\\\"4\\\"/><path fill-rule=\\\"evenodd\\\" d=\\\"M16.5 22c-1.65 0-2.475 0-2.987-.513C13 20.975 13 20.15 13 18.5c0-1.65 0-2.475.513-2.987C14.025 15 14.85 15 16.5 15c1.65 0 2.475 0 2.987.513C20 16.025 20 16.85 20 18.5c0 1.65 0 2.475-.513 2.987C18.975 22 18.15 22 16.5 22Zm.583-5.056a.583.583 0 1 0-1.166 0v.973h-.973a.583.583 0 1 0 0 1.166h.973v.973a.583.583 0 1 0 1.166 0v-.973h.973a.583.583 0 1 0 0-1.166h-.973v-.973Z\\\" clip-rule=\\\"evenodd\\\"/><path d=\\\"M15.678 13.503c-.473.005-.914.023-1.298.074c-.643.087-1.347.293-1.928.875c-.582.581-.788 1.285-.874 1.928c-.078.578-.078 1.284-.078 2.034v.172c0 .75 0 1.456.078 2.034c.06.451.18.932.447 1.38H12c-8 0-8-2.015-8-4.5S7.582 13 12 13c1.326 0 2.577.181 3.678.503Z\\\"/></g>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<g fill=\\\"currentColor\\\"><path d=\\\"M16 6a4 4 0 1 1-8 0a4 4 0 0 1 8 0Zm-.322 7.503c-.473.005-.914.023-1.298.074c-.643.087-1.347.293-1.928.875c-.582.581-.788 1.285-.874 1.928c-.078.578-.078 1.284-.078 2.034v.172c0 .75 0 1.456.078 2.034c.06.451.18.932.447 1.38H12c-8 0-8-2.015-8-4.5S7.582 13 12 13c1.326 0 2.577.181 3.678.503Z\\\"/><path fill-rule=\\\"evenodd\\\" d=\\\"M16.5 22c-1.65 0-2.475 0-2.987-.513C13 20.975 13 20.15 13 18.5c0-1.65 0-2.475.513-2.987C14.025 15 14.85 15 16.5 15c1.65 0 2.475 0 2.987.513C20 16.025 20 16.85 20 18.5c0 1.65 0 2.475-.513 2.987C18.975 22 18.15 22 16.5 22Zm1.968-4.254a.583.583 0 1 0-.825-.825l-1.92 1.92l-.366-.365a.583.583 0 1 0-.825.825l.778.778a.583.583 0 0 0 .825 0l2.333-2.333Z\\\" clip-rule=\\\"evenodd\\\"/></g>\"\n};\nexport default data;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4\"\n}), 'PersonAdd');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3\"\n}), 'Groups');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61\"\n}), 'FilterAlt');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m1 3.54 1.53 1.53C1.65 5.28 1 6.06 1 7v12c0 1.1.9 2 2 2h15.46l2 2 1.26-1.27L2.27 2.27zM3 19V7h1.46l12 12zM21 5h-7.58l3.29-3.3L16 1l-4 4-4-4-.7.7L10.58 5H7.52l2 2H21v11.48l1.65 1.65c.22-.32.35-.71.35-1.13V7c0-1.11-.89-2-2-2\"\n}), 'TvOff');","import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport TvOffIcon from '@mui/icons-material/TvOff';\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(4),\n  textAlign: 'center',\n  borderRadius: 16,\n  background: 'linear-gradient(145deg, #222222, #1c1c1c)',\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n}));\n\nconst EmptyChannelsPlaceholder = ({ message = \"  \" }) => {\n  return (\n    <StyledPaper>\n      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', py: 4 }}>\n        <TvOffIcon sx={{ fontSize: 70, color: 'rgba(255, 255, 255, 0.2)', mb: 2 }} />\n        <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n          {message}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.disabled\" sx={{ maxWidth: 400 }}>\n                ,    \n        </Typography>\n      </Box>\n    </StyledPaper>\n  );\n};\n\nexport default EmptyChannelsPlaceholder; ","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { \n  Box, \n  Container, \n  Grid, \n  Typography, \n  Paper, \n  Card, \n  CardContent, \n  CardMedia, \n  CardActionArea, \n  Button, \n  Avatar, \n  TextField, \n  InputAdornment, \n  CircularProgress, \n  Tabs, \n  Tab, \n  Divider, \n  Chip, \n  IconButton, \n  useTheme, \n  alpha,\n  useMediaQuery,\n  Skeleton\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { ThemeSettingsContext } from '../../App';\nimport { AuthContext } from '../../context/AuthContext';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { Icon } from '@iconify/react';\nimport personAddIcon from '@iconify-icons/solar/user-plus-bold';\nimport personCheckIcon from '@iconify-icons/solar/user-check-bold';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport TvIcon from '@mui/icons-material/Tv';\nimport GroupsIcon from '@mui/icons-material/Groups';\nimport PersonIcon from '@mui/icons-material/Person';\nimport SortIcon from '@mui/icons-material/Sort';\nimport FilterAltIcon from '@mui/icons-material/FilterAlt';\nimport EmptyChannelsPlaceholder from './EmptyChannelsPlaceholder';\n\n\nconst PageContainer = styled(Container)(({ theme }) => ({\n  paddingTop: theme.spacing(2),\n  paddingBottom: theme.spacing(10),\n  [theme.breakpoints.down('sm')]: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(8),\n  }\n}));\n\nconst PageHeader = styled(Box)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n  display: 'flex',\n  flexDirection: 'column',\n  [theme.breakpoints.down('sm')]: {\n    marginBottom: theme.spacing(2),\n  }\n}));\n\nconst SearchSection = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(2, 2.5),\n  marginBottom: theme.spacing(3),\n  borderRadius: 16,\n  background: 'linear-gradient(145deg, #222222, #1c1c1c)',\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(1.5, 2),\n    marginBottom: theme.spacing(2),\n  }\n}));\n\nconst StyledTextField = styled(TextField)(({ theme, themecolor }) => ({\n  '& .MuiOutlinedInput-root': {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    borderRadius: '12px',\n    '& fieldset': {\n      borderColor: 'rgba(255, 255, 255, 0.1)',\n    },\n    '&:hover fieldset': {\n      borderColor: alpha(themecolor || theme.palette.primary.main, 0.5),\n    },\n    '&.Mui-focused fieldset': {\n      borderColor: themecolor || theme.palette.primary.main,\n      borderWidth: '2px',\n    },\n  },\n  '& .MuiInputBase-input': {\n    padding: theme.spacing(1.5, 2),\n  }\n}));\n\nconst SectionHeader = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(2),\n  [theme.breakpoints.down('sm')]: {\n    marginBottom: theme.spacing(1.5),\n  }\n}));\n\nconst ChannelCard = styled(Card)(({ theme }) => ({\n  borderRadius: 16,\n  overflow: 'hidden',\n  background: 'linear-gradient(145deg, #222222, #1c1c1c)',\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n  transition: 'all 0.3s ease',\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  '&:hover': {\n    transform: 'translateY(-5px)',\n    boxShadow: '0 6px 25px rgba(0, 0, 0, 0.18)',\n  }\n}));\n\nconst ChannelContent = styled(CardContent)(({ theme }) => ({\n  padding: theme.spacing(2),\n  flexGrow: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'space-between',\n  '&:last-child': {\n    paddingBottom: theme.spacing(2),\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(1.5),\n  }\n}));\n\nconst ChannelAvatar = styled(Avatar)(({ theme }) => ({\n  width: 80,\n  height: 80,\n  margin: '0 auto',\n  marginTop: theme.spacing(2),\n  marginBottom: theme.spacing(1),\n  border: '2px solid rgba(255, 255, 255, 0.1)',\n  boxShadow: '0 4px 10px rgba(0, 0, 0, 0.2)',\n  [theme.breakpoints.down('sm')]: {\n    width: 50,\n    height: 50,\n  }\n}));\n\nconst ChannelName = styled(Typography)(({ theme }) => ({\n  fontWeight: 600,\n  marginBottom: theme.spacing(0.5),\n  textAlign: 'center',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: 1,\n  WebkitBoxOrient: 'vertical',\n}));\n\nconst ChannelUsername = styled(Typography)(({ theme }) => ({\n  color: 'rgba(255, 255, 255, 0.6)',\n  marginBottom: theme.spacing(1.5),\n  textAlign: 'center',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: 1,\n  WebkitBoxOrient: 'vertical',\n}));\n\nconst ChannelDescription = styled(Typography)(({ theme }) => ({\n  color: 'rgba(255, 255, 255, 0.8)',\n  marginBottom: theme.spacing(1.5),\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  minHeight: '2.5rem',\n  maxHeight: '2.5rem',\n  flexGrow: 0,\n}));\n\nconst StyledChip = styled(Chip)(({ theme, isFollowing, themecolor }) => ({\n  borderRadius: '8px',\n  fontWeight: 500,\n  background: isFollowing ? \n    'rgba(255, 255, 255, 0.1)' : \n    `linear-gradient(135deg, ${themecolor || theme.palette.primary.main}, ${alpha(themecolor || theme.palette.primary.main, 0.7)})`,\n  color: isFollowing ? 'rgba(255, 255, 255, 0.9)' : '#fff',\n  border: isFollowing ? '1px solid rgba(255, 255, 255, 0.15)' : 'none',\n  '&:hover': {\n    background: isFollowing ? \n      'rgba(255, 255, 255, 0.15)' : \n      `linear-gradient(135deg, ${themecolor || theme.palette.primary.main}, ${alpha(themecolor || theme.palette.primary.main, 0.8)})`,\n  },\n  [theme.breakpoints.down('sm')]: {\n    '& .MuiChip-label': {\n      padding: '0 6px',\n      fontSize: '0.65rem',\n    },\n    '& .MuiChip-icon': {\n      marginLeft: 4,\n    }\n  }\n}));\n\nconst StyledTab = styled(Tab)(({ theme }) => ({\n  borderRadius: '8px',\n  minHeight: '38px',\n  padding: '6px 12px',\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.9rem',\n  minWidth: 0,\n  marginRight: theme.spacing(1),\n  color: 'rgba(255, 255, 255, 0.7)',\n  '&.Mui-selected': {\n    color: '#fff',\n    fontWeight: 600,\n  },\n  [theme.breakpoints.down('sm')]: {\n    fontSize: '0.8rem',\n    padding: '5px 10px',\n  }\n}));\n\nconst StyledTabs = styled(Tabs)(({ theme, themecolor }) => ({\n  minHeight: '38px',\n  '& .MuiTabs-indicator': {\n    height: 3,\n    borderTopLeftRadius: 3,\n    borderTopRightRadius: 3,\n    backgroundColor: themecolor || theme.palette.primary.main,\n  },\n  '& .MuiTabs-flexContainer': {\n    gap: theme.spacing(1),\n  }\n}));\n\nconst LoadMoreButton = styled(Button)(({ theme, themecolor }) => ({\n  borderRadius: '12px',\n  padding: theme.spacing(1, 3),\n  marginTop: theme.spacing(2),\n  textTransform: 'none',\n  fontWeight: 600,\n  background: `linear-gradient(135deg, ${themecolor || theme.palette.primary.main}, ${alpha(themecolor || theme.palette.primary.main, 0.8)})`,\n  color: '#fff',\n  '&:hover': {\n    background: `linear-gradient(135deg, ${themecolor || theme.palette.primary.main}, ${alpha(themecolor || theme.palette.primary.main, 0.9)})`,\n  }\n}));\n\n\nconst ChannelCardLoader = () => {\n  const theme = useTheme();\n  return (\n    <Card sx={{ \n      borderRadius: 4, \n      overflow: 'hidden',\n      background: 'linear-gradient(145deg, #222222, #1c1c1c)',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n      border: '1px solid rgba(255, 255, 255, 0.05)',\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      p: 2\n    }}>\n      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', height: '100%', justifyContent: 'space-between' }}>\n        <Skeleton variant=\"circular\" width={80} height={80} sx={{ \n          mb: 2, \n          bgcolor: 'rgba(255, 255, 255, 0.1)',\n          [theme => theme.breakpoints.down('sm')]: {\n            width: 50,\n            height: 50,\n          }\n        }} />\n        <Skeleton variant=\"text\" width=\"80%\" height={24} sx={{ mb: 1, bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n        <Skeleton variant=\"text\" width=\"60%\" height={20} sx={{ mb: 2, bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n        \n        <Skeleton variant=\"rectangular\" width=\"100%\" height={40} sx={{ mb: 2, bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n        \n        <Box sx={{ display: 'flex', justifyContent: 'space-between', width: '100%', mt: 'auto' }}>\n          <Skeleton variant=\"rectangular\" width=\"30%\" height={22} sx={{ borderRadius: '6px', bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n          <Skeleton variant=\"rectangular\" width=\"40%\" height={32} sx={{ borderRadius: '8px', bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n        </Box>\n      </Box>\n    </Card>\n  );\n};\n\n\nconst formatNumber = (num) => {\n  if (num >= 1000000) {\n    return (num / 1000000).toFixed(1).replace(/\\.0$/, '') + 'M';\n  }\n  if (num >= 1000) {\n    return (num / 1000).toFixed(1).replace(/\\.0$/, '') + 'K';\n  }\n  return num.toString();\n};\n\nconst ChannelsPage = () => {\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const { user } = useContext(AuthContext);\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  \n  \n  const searchParams = new URLSearchParams(location.search);\n  const initialQuery = searchParams.get('q') || '';\n  const initialTab = searchParams.get('tab') || 'recent';\n  \n  \n  const [activeTab, setActiveTab] = useState(initialTab);\n  const [searchQuery, setSearchQuery] = useState(initialQuery);\n  const [isSearching, setIsSearching] = useState(false);\n  const [channels, setChannels] = useState([]);\n  const [popularChannels, setPopularChannels] = useState([]);\n  const [featuredChannels, setFeaturedChannels] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [withDescription, setWithDescription] = useState(true);\n  const [followedChannels, setFollowedChannels] = useState([]);\n  const [loadingFollowed, setLoadingFollowed] = useState(true);\n  \n  const primaryColor = themeSettings?.primaryColor || theme.palette.primary.main;\n  \n  \n  const getFormattedUrl = (tab, q = searchQuery) => {\n    const params = new URLSearchParams();\n    if (tab) params.set('tab', tab);\n    if (q) params.set('q', q);\n    return `/channels?${params.toString()}`;\n  };\n  \n  \n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n    setPage(1);\n    setChannels([]);\n    setLoading(true);\n    navigate(getFormattedUrl(newValue), { replace: true });\n  };\n  \n  \n  const handleSearch = (e) => {\n    e.preventDefault();\n    setPage(1);\n    setChannels([]);\n    setIsSearching(true);\n    setLoading(true);\n    navigate(getFormattedUrl(activeTab, searchQuery), { replace: true });\n  };\n  \n  \n  useEffect(() => {\n    const fetchPopularChannels = async () => {\n      try {\n        const response = await axios.get('/api/search/channels', {\n          params: {\n            sort: 'popular',\n            with_description: 'true',\n            per_page: 4\n          }\n        });\n        \n        if (response.data && Array.isArray(response.data.channels)) {\n          setPopularChannels(response.data.channels);\n        }\n      } catch (err) {\n        console.error('Error fetching popular channels:', err);\n      }\n    };\n    \n    fetchPopularChannels();\n  }, []);\n  \n  \n  useEffect(() => {\n    const fetchFeaturedChannels = async () => {\n      try {\n        const response = await axios.get('/api/search/channels', {\n          params: {\n            with_description: 'true',\n            per_page: 4\n          }\n        });\n        \n        if (response.data && Array.isArray(response.data.channels)) {\n          setFeaturedChannels(response.data.channels);\n        }\n      } catch (err) {\n        console.error('Error fetching featured channels:', err);\n      }\n    };\n    \n    fetchFeaturedChannels();\n  }, []);\n  \n  \n  useEffect(() => {\n    const fetchChannels = async () => {\n      setLoading(true);\n      \n      try {\n        const response = await axios.get('/api/search/channels', {\n          params: {\n            q: searchQuery,\n            sort: activeTab,\n            page: 1,\n            per_page: 12,\n            with_description: withDescription ? 'true' : 'false'\n          }\n        });\n        \n        if (response.data) {\n          setChannels(response.data.channels || []);\n          setHasMore(response.data.has_next || false);\n          setTotal(response.data.total || 0);\n        }\n      } catch (err) {\n        console.error('Error fetching channels:', err);\n      } finally {\n        setLoading(false);\n        setIsSearching(false);\n      }\n    };\n    \n    fetchChannels();\n    \n  }, [activeTab, searchQuery, withDescription]);\n  \n  \n  const loadMoreChannels = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    const nextPage = page + 1;\n    \n    try {\n      const response = await axios.get('/api/search/channels', {\n        params: {\n          q: searchQuery,\n          sort: activeTab,\n          page: nextPage,\n          per_page: 12,\n          with_description: withDescription ? 'true' : 'false'\n        }\n      });\n      \n      if (response.data) {\n        setChannels(prevChannels => [...prevChannels, ...(response.data.channels || [])]);\n        setHasMore(response.data.has_next || false);\n        setPage(nextPage);\n      }\n    } catch (err) {\n      console.error('Error loading more channels:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n  \n  \n  const handleFollowToggle = async (channelId, isFollowing) => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    \n    try {\n      \n      const updatedChannels = channels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: !isFollowing }\n          : channel\n      );\n      setChannels(updatedChannels);\n      \n      \n      const updatedPopular = popularChannels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: !isFollowing }\n          : channel\n      );\n      setPopularChannels(updatedPopular);\n      \n      \n      const updatedFeatured = featuredChannels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: !isFollowing }\n          : channel\n      );\n      setFeaturedChannels(updatedFeatured);\n      \n      \n      if (isFollowing) {\n        await axios.post(`/api/profile/unfollow`, { followed_id: channelId });\n      } else {\n        await axios.post(`/api/profile/follow`, { followed_id: channelId });\n      }\n    } catch (err) {\n      console.error('Error toggling follow:', err);\n      \n      \n      const revertChannels = channels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: isFollowing }\n          : channel\n      );\n      setChannels(revertChannels);\n      \n      const revertPopular = popularChannels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: isFollowing }\n          : channel\n      );\n      setPopularChannels(revertPopular);\n      \n      const revertFeatured = featuredChannels.map(channel => \n        channel.id === channelId\n          ? { ...channel, is_following: isFollowing }\n          : channel\n      );\n      setFeaturedChannels(revertFeatured);\n    }\n  };\n  \n  \n  const handleChannelClick = (username) => {\n    navigate(`/profile/${username}`);\n  };\n  \n  \n  const renderChannelCard = (channel) => (\n    <ChannelCard key={channel.id}>\n      <CardActionArea onClick={() => handleChannelClick(channel.username)}>\n        <Box sx={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n          <ChannelAvatar \n            src={channel.photo}\n            alt={channel.name}\n            onError={(e) => {\n              e.target.onerror = null;\n              e.target.src = '/static/uploads/avatar/system/avatar.png';\n            }}\n          />\n          <ChannelContent>\n            <Box>\n              <ChannelName variant=\"h6\">\n                {channel.name}\n                {channel.is_verified && (\n                  <Box component=\"span\" sx={{ ml: 0.5, color: 'primary.main', display: 'inline-flex', alignItems: 'center' }}>\n                    <Icon icon=\"solar:verified-check-bold\" width=\"16\" height=\"16\" />\n                  </Box>\n                )}\n              </ChannelName>\n              <ChannelUsername variant=\"body2\">\n                @{channel.username}\n              </ChannelUsername>\n              \n              <ChannelDescription variant=\"body2\">\n                {channel.about || ' '}\n              </ChannelDescription>\n            </Box>\n            \n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mt: 'auto' }}>\n              <Chip\n                size=\"small\"\n                icon={<Icon icon=\"solar:users-group-rounded-bold\" width={14} height={14} />}\n                label={formatNumber(channel.followers_count || 0)}\n                sx={{\n                  bgcolor: 'rgba(255, 255, 255, 0.08)',\n                  color: 'rgba(255, 255, 255, 0.9)',\n                  border: '1px solid rgba(255, 255, 255, 0.1)',\n                  borderRadius: '6px',\n                  height: '22px',\n                  '& .MuiChip-label': {\n                    px: 1,\n                    fontSize: '0.7rem',\n                    fontWeight: 500,\n                  }\n                }}\n              />\n              \n              <StyledChip\n                size=\"small\"\n                label={channel.is_following ? \" \" : \"\"}\n                isFollowing={channel.is_following}\n                themecolor={primaryColor}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleFollowToggle(channel.id, channel.is_following);\n                }}\n                icon={channel.is_following ? \n                  <Icon icon={personCheckIcon} width=\"16\" height=\"16\" /> : \n                  <Icon icon={personAddIcon} width=\"16\" height=\"16\" />\n                }\n              />\n            </Box>\n          </ChannelContent>\n        </Box>\n      </CardActionArea>\n    </ChannelCard>\n  );\n  \n  \n  useEffect(() => {\n    const fetchFollowedChannels = async () => {\n      if (!user) {\n        setLoadingFollowed(false);\n        return;\n      }\n      \n      setLoadingFollowed(true);\n      try {\n        const response = await axios.get('/api/users/my-channels');\n        if (response.data && Array.isArray(response.data.channels)) {\n          setFollowedChannels(response.data.channels);\n        }\n      } catch (err) {\n        console.error('Error fetching followed channels:', err);\n      } finally {\n        setLoadingFollowed(false);\n      }\n    };\n    \n    fetchFollowedChannels();\n  }, [user]);\n  \n  return (\n    <PageContainer maxWidth=\"lg\">\n      <PageHeader>\n        <Typography \n          variant=\"h4\" \n          sx={{ \n            mb: 0.5, \n            fontWeight: 700,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          }}\n        >\n          <GroupsIcon sx={{ fontSize: 28 }} />\n          \n        </Typography>\n        <Typography \n          variant=\"body1\" \n          sx={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            maxWidth: 600\n          }}\n        >\n                   \n        </Typography>\n      </PageHeader>\n      \n      \n      <SearchSection>\n        <form onSubmit={handleSearch}>\n          <StyledTextField\n            fullWidth\n            variant=\"outlined\"\n            placeholder=\" ...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            themecolor={primaryColor}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon sx={{ color: 'rgba(255, 255, 255, 0.7)' }} />\n                </InputAdornment>\n              ),\n              endAdornment: isSearching && (\n                <InputAdornment position=\"end\">\n                  <CircularProgress size={20} />\n                </InputAdornment>\n              )\n            }}\n          />\n        </form>\n      </SearchSection>\n      \n      \n      {!searchQuery && popularChannels.length > 0 && (\n        <Box sx={{ mb: 4 }}>\n          <SectionHeader>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700 }}>\n               \n            </Typography>\n          </SectionHeader>\n          \n          <Grid container spacing={2}>\n            {popularChannels.map(channel => (\n              <Grid item xs={6} sm={4} md={3} key={channel.id}>\n                {renderChannelCard(channel)}\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n      )}\n      \n      \n      {!searchQuery && featuredChannels.length > 0 && (\n        <Box sx={{ mb: 4 }}>\n          <SectionHeader>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700 }}>\n               \n            </Typography>\n          </SectionHeader>\n          \n          <Grid container spacing={2}>\n            {featuredChannels.map(channel => (\n              <Grid item xs={6} sm={4} md={3} key={channel.id}>\n                {renderChannelCard(channel)}\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n      )}\n      \n      \n      <Box sx={{ mb: 3 }}>\n        <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 2 }}>\n          <StyledTabs\n            value={activeTab}\n            onChange={handleTabChange}\n            aria-label=\"channel tabs\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            themecolor={primaryColor}\n          >\n            <StyledTab label=\"\" value=\"recent\" />\n            <StyledTab label=\"\" value=\"popular\" />\n            {searchQuery && <StyledTab label={`: ${searchQuery}`} value=\"search\" disabled />}\n          </StyledTabs>\n        </Box>\n        \n        \n        <Box \n          sx={{ \n            display: 'flex', \n            justifyContent: 'space-between',\n            alignItems: 'center',\n            mb: 2\n          }}\n        >\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {isSearching ? (\n              <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                <CircularProgress size={16} sx={{ mr: 1 }} />\n                ...\n              </Box>\n            ) : total > 0 ? (\n              ` ${total} `\n            ) : (\n              !loading && \" \"\n            )}\n          </Typography>\n          \n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n            <IconButton\n              size=\"small\"\n              onClick={() => setWithDescription(!withDescription)}\n              sx={{ \n                color: withDescription ? 'primary.main' : 'text.secondary',\n                ml: 1 \n              }}\n              aria-label=\"Toggle filtering\"\n              title={withDescription ? \"  \" : \"  \"}\n            >\n              <FilterAltIcon fontSize=\"small\" />\n            </IconButton>\n          </Box>\n        </Box>\n        \n        \n        <Grid container spacing={2}>\n          {loading ? (\n            \n            Array.from(new Array(12)).map((_, index) => (\n              <Grid item xs={6} sm={4} md={3} key={index}>\n                <ChannelCardLoader />\n              </Grid>\n            ))\n          ) : (\n            channels.length > 0 ? (\n              channels.map(channel => (\n                <Grid item xs={6} sm={4} md={3} key={channel.id}>\n                  {renderChannelCard(channel)}\n                </Grid>\n              ))\n            ) : (\n              !loading && (\n                <Grid item xs={12}>\n                  <EmptyChannelsPlaceholder \n                    message={searchQuery ? `   \"${searchQuery}\"  ` : \"  \"} \n                  />\n                </Grid>\n              )\n            )\n          )}\n        </Grid>\n        \n        \n        {!loading && channels.length > 0 && hasMore && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\n            <LoadMoreButton\n              variant=\"contained\"\n              onClick={loadMoreChannels}\n              disabled={loadingMore}\n              themecolor={primaryColor}\n              startIcon={loadingMore && <CircularProgress size={20} color=\"inherit\" />}\n            >\n              {loadingMore ? '...' : ' '}\n            </LoadMoreButton>\n          </Box>\n        )}\n      </Box>\n      \n      \n      <Box sx={{ height: '60px', width: '100%' }} />\n    </PageContainer>\n  );\n};\n\nexport default ChannelsPage; ","import React, { memo, useRef, useEffect } from 'react';\nimport { useMusic } from '../context/MusicContext';\n\n\nwindow.audioTiming = {\n  currentTime: 0,\n  duration: 0,\n  progress: 0,\n  formattedCurrentTime: '0:00',\n  formattedDuration: '0:00',\n  audioRef: null,\n  lastUpdate: 0\n};\n\nconst MusicPlayerCore = memo(() => {\n  const { \n    audioRef, \n    currentTrack, \n    getCurrentTimeRaw, \n    getDurationRaw,\n    isPlaying,\n    setCurrentTime,\n    setDuration \n  } = useMusic();\n  \n  const formatTime = (time) => {\n    if (isNaN(time) || time === Infinity) return '0:00';\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60).toString().padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  };\n\n  const currentTimeDisplayRef = useRef(null);\n  const durationDisplayRef = useRef(null);\n  const progressBarRef = useRef(null);\n  \n  \n  useEffect(() => {\n    \n    window.audioTiming.audioRef = audioRef.current;\n    \n    // Update global timing with high precision and performance\n    const updateGlobalTiming = () => {\n      if (!audioRef.current) return;\n      \n      const now = performance.now();\n      const currentTime = audioRef.current.currentTime || 0;\n      const duration = audioRef.current.duration || 0;\n      \n      // Update more frequently when playing to ensure accurate lyrics sync\n      if (isPlaying || now - window.audioTiming.lastUpdate > 200) {\n        window.audioTiming.currentTime = currentTime;\n        window.audioTiming.duration = duration;\n        window.audioTiming.progress = duration > 0 ? (currentTime / duration) * 100 : 0;\n        window.audioTiming.formattedCurrentTime = formatTime(currentTime);\n        window.audioTiming.formattedDuration = formatTime(duration);\n        window.audioTiming.lastUpdate = now;\n        \n        if (typeof setCurrentTime === 'function') {\n          setCurrentTime(currentTime);\n        }\n        \n        if (typeof setDuration === 'function') {\n          setDuration(duration);\n        }\n      }\n    };\n    \n    let rafId;\n    const frameLoop = () => {\n      updateGlobalTiming();\n      rafId = requestAnimationFrame(frameLoop);\n    };\n    \n    if (audioRef.current) {\n      // Start high-performance animation frame loop for smooth timing\n      rafId = requestAnimationFrame(frameLoop);\n      \n      // Also listen to timeupdate for backup\n      audioRef.current.addEventListener('timeupdate', updateGlobalTiming);\n      \n      // Add additional event listeners for more accurate timing\n      audioRef.current.addEventListener('seeking', updateGlobalTiming);\n      audioRef.current.addEventListener('seeked', updateGlobalTiming);\n      audioRef.current.addEventListener('play', updateGlobalTiming);\n      audioRef.current.addEventListener('pause', updateGlobalTiming);\n    }\n    \n    return () => {\n      if (rafId) {\n        cancelAnimationFrame(rafId);\n      }\n      \n      if (audioRef.current) {\n        audioRef.current.removeEventListener('timeupdate', updateGlobalTiming);\n        audioRef.current.removeEventListener('seeking', updateGlobalTiming);\n        audioRef.current.removeEventListener('seeked', updateGlobalTiming);\n        audioRef.current.removeEventListener('play', updateGlobalTiming);\n        audioRef.current.removeEventListener('pause', updateGlobalTiming);\n      }\n    };\n  }, [audioRef, setCurrentTime, setDuration, isPlaying]);\n  \n  return null; \n});\n\nexport default MusicPlayerCore; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18m0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9\"\n}), 'Casino');","import { jsx } from 'react/jsx-runtime';\nimport React from 'react';\nimport * as tweens from 'tween-functions';\n\nfunction degreesToRads(degrees) {\n    return (degrees * Math.PI) / 180;\n}\nfunction randomRange(min, max) {\n    return min + Math.random() * (max - min);\n}\nfunction randomInt(min, max) {\n    return Math.floor(min + Math.random() * (max - min + 1));\n}\n\nvar ParticleShape;\n(function (ParticleShape) {\n    ParticleShape[ParticleShape[\"Circle\"] = 0] = \"Circle\";\n    ParticleShape[ParticleShape[\"Square\"] = 1] = \"Square\";\n    ParticleShape[ParticleShape[\"Strip\"] = 2] = \"Strip\";\n})(ParticleShape || (ParticleShape = {}));\nvar RotationDirection;\n(function (RotationDirection) {\n    RotationDirection[RotationDirection[\"Positive\"] = 1] = \"Positive\";\n    RotationDirection[RotationDirection[\"Negative\"] = -1] = \"Negative\";\n})(RotationDirection || (RotationDirection = {}));\nconst DEFAULT_FRAME_TIME = 1000 / 60;\nclass Particle {\n    constructor(context, getOptions, x, y) {\n        this.getOptions = getOptions;\n        const { colors, initialVelocityX, initialVelocityY } = this.getOptions();\n        this.context = context;\n        this.x = x;\n        this.y = y;\n        this.w = randomRange(5, 20);\n        this.h = randomRange(5, 20);\n        this.radius = randomRange(5, 10);\n        this.vx =\n            typeof initialVelocityX === 'number'\n                ? randomRange(-initialVelocityX, initialVelocityX)\n                : randomRange(initialVelocityX.min, initialVelocityX.max);\n        this.vy =\n            typeof initialVelocityY === 'number'\n                ? randomRange(-initialVelocityY, 0)\n                : randomRange(initialVelocityY.min, initialVelocityY.max);\n        this.shape = randomInt(0, 2);\n        this.angle = degreesToRads(randomRange(0, 360));\n        this.angularSpin = randomRange(-0.2, 0.2);\n        this.color = colors[Math.floor(Math.random() * colors.length)];\n        this.rotateY = randomRange(0, 1);\n        this.rotationDirection = randomRange(0, 1)\n            ? RotationDirection.Positive\n            : RotationDirection.Negative;\n    }\n    update(elapsed) {\n        const { gravity, wind, friction, opacity, drawShape } = this.getOptions();\n        const frameTimeMultiplier = elapsed / DEFAULT_FRAME_TIME;\n        this.x += this.vx * frameTimeMultiplier;\n        this.y += this.vy * frameTimeMultiplier;\n        this.vy += gravity * frameTimeMultiplier;\n        this.vx += wind * frameTimeMultiplier;\n        this.vx *= friction ** frameTimeMultiplier;\n        this.vy *= friction ** frameTimeMultiplier;\n        if (this.rotateY >= 1 &&\n            this.rotationDirection === RotationDirection.Positive) {\n            this.rotationDirection = RotationDirection.Negative;\n        }\n        else if (this.rotateY <= -1 &&\n            this.rotationDirection === RotationDirection.Negative) {\n            this.rotationDirection = RotationDirection.Positive;\n        }\n        const rotateDelta = 0.1 * this.rotationDirection * frameTimeMultiplier;\n        this.rotateY += rotateDelta;\n        this.angle += this.angularSpin;\n        this.context.save();\n        this.context.translate(this.x, this.y);\n        this.context.rotate(this.angle);\n        this.context.scale(1, this.rotateY);\n        this.context.rotate(this.angle);\n        this.context.beginPath();\n        this.context.fillStyle = this.color;\n        this.context.strokeStyle = this.color;\n        this.context.globalAlpha = opacity;\n        this.context.lineCap = 'round';\n        this.context.lineWidth = 2;\n        if (drawShape && typeof drawShape === 'function') {\n            drawShape.call(this, this.context);\n        }\n        else {\n            switch (this.shape) {\n                case ParticleShape.Circle: {\n                    this.context.beginPath();\n                    this.context.arc(0, 0, this.radius, 0, 2 * Math.PI);\n                    this.context.fill();\n                    break;\n                }\n                case ParticleShape.Square: {\n                    this.context.fillRect(-this.w / 2, -this.h / 2, this.w, this.h);\n                    break;\n                }\n                case ParticleShape.Strip: {\n                    this.context.fillRect(-this.w / 6, -this.h / 2, this.w / 3, this.h);\n                    break;\n                }\n            }\n        }\n        this.context.closePath();\n        this.context.restore();\n    }\n}\n\nclass ParticleGenerator {\n    constructor(canvas, getOptions) {\n        this.x = 0;\n        this.y = 0;\n        this.w = 0;\n        this.h = 0;\n        this.lastNumberOfPieces = 0;\n        this.tweenProgress = 0;\n        this.tweenFrom = 0;\n        this.particles = [];\n        this.particlesGenerated = 0;\n        this.removeParticleAt = (i) => {\n            this.particles.splice(i, 1);\n        };\n        this.getParticle = () => {\n            const newParticleX = randomRange(this.x, this.w + this.x);\n            const newParticleY = randomRange(this.y, this.h + this.y);\n            return new Particle(this.context, this.getOptions, newParticleX, newParticleY);\n        };\n        this.animate = (elapsed) => {\n            const { canvas, context, particlesGenerated, lastNumberOfPieces } = this;\n            const { run, recycle, numberOfPieces, debug, tweenFunction, tweenDuration, } = this.getOptions();\n            if (!run) {\n                return false;\n            }\n            const nP = this.particles.length;\n            const activeCount = recycle ? nP : particlesGenerated;\n            // Initial population\n            if (activeCount < numberOfPieces) {\n                // Use the numberOfPieces prop as a key to reset the easing timing\n                if (lastNumberOfPieces !== numberOfPieces) {\n                    this.tweenProgress = 0;\n                    this.tweenFrom = activeCount;\n                    this.lastNumberOfPieces = numberOfPieces;\n                }\n                // Clamp tweenProgress between 0 and tweenDuration\n                this.tweenProgress = Math.min(tweenDuration, Math.max(0, this.tweenProgress + elapsed));\n                const tweenedVal = tweenFunction(this.tweenProgress, this.tweenFrom, numberOfPieces, tweenDuration);\n                const numToAdd = Math.round(tweenedVal - activeCount);\n                for (let i = 0; i < numToAdd; i++) {\n                    this.particles.push(this.getParticle());\n                }\n                this.particlesGenerated += numToAdd;\n            }\n            if (debug) {\n                // Draw debug text\n                context.font = '12px sans-serif';\n                context.fillStyle = '#333';\n                context.textAlign = 'right';\n                context.fillText(`Particles: ${nP}`, canvas.width - 10, canvas.height - 20);\n            }\n            // Maintain the population, iterating backwards to prevent issues when removing particles\n            for (let i = this.particles.length - 1; i >= 0; i--) {\n                const p = this.particles[i];\n                // Update each particle's position\n                p.update(elapsed);\n                // Prune the off-canvas particles\n                if (p.y > canvas.height ||\n                    p.y < -100 ||\n                    p.x > canvas.width + 100 ||\n                    p.x < -100) {\n                    if (recycle && activeCount <= numberOfPieces) {\n                        // Replace the particle with a brand new one\n                        this.particles[i] = this.getParticle();\n                    }\n                    else {\n                        this.removeParticleAt(i);\n                    }\n                }\n            }\n            return nP > 0 || activeCount < numberOfPieces;\n        };\n        this.canvas = canvas;\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get canvas context');\n        }\n        this.context = ctx;\n        this.getOptions = getOptions;\n    }\n}\n\nconst confettiDefaults = {\n    width: typeof window !== 'undefined' ? window.innerWidth : 300,\n    height: typeof window !== 'undefined' ? window.innerHeight : 200,\n    numberOfPieces: 200,\n    friction: 0.99,\n    wind: 0,\n    gravity: 0.1,\n    initialVelocityX: 4,\n    initialVelocityY: 10,\n    colors: [\n        '#f44336',\n        '#e91e63',\n        '#9c27b0',\n        '#673ab7',\n        '#3f51b5',\n        '#2196f3',\n        '#03a9f4',\n        '#00bcd4',\n        '#009688',\n        '#4CAF50',\n        '#8BC34A',\n        '#CDDC39',\n        '#FFEB3B',\n        '#FFC107',\n        '#FF9800',\n        '#FF5722',\n        '#795548',\n    ],\n    opacity: 1.0,\n    debug: false,\n    tweenFunction: tweens.easeInOutQuad,\n    tweenDuration: 5000,\n    recycle: true,\n    run: true,\n};\nclass Confetti {\n    constructor(canvas, opts) {\n        this.lastFrameTime = 0;\n        this.setOptionsWithDefaults = (opts) => {\n            const computedConfettiDefaults = {\n                confettiSource: {\n                    x: 0,\n                    y: 0,\n                    w: this.canvas.width,\n                    h: 0,\n                },\n            };\n            this._options = {\n                ...computedConfettiDefaults,\n                ...confettiDefaults,\n                ...opts,\n            };\n            Object.assign(this, opts.confettiSource);\n        };\n        this.update = (timestamp = 0) => {\n            const { options: { run, onConfettiComplete, frameRate }, canvas, context, } = this;\n            // Cap elapsed time to 50ms to prevent large time steps\n            const elapsed = Math.min(timestamp - this.lastFrameTime, 50);\n            // Throttle the frame rate if set\n            if (frameRate && elapsed < 1000 / frameRate) {\n                this.rafId = requestAnimationFrame(this.update);\n                return;\n            }\n            this.lastFrameTime = timestamp - (frameRate ? elapsed % frameRate : 0);\n            if (run) {\n                context.fillStyle = 'white';\n                context.clearRect(0, 0, canvas.width, canvas.height);\n            }\n            if (this.generator.animate(elapsed)) {\n                this.rafId = requestAnimationFrame(this.update);\n            }\n            else {\n                if (onConfettiComplete &&\n                    typeof onConfettiComplete === 'function' &&\n                    this.generator.particlesGenerated > 0) {\n                    onConfettiComplete.call(this, this);\n                }\n                this._options.run = false;\n            }\n        };\n        this.reset = () => {\n            if (this.generator && this.generator.particlesGenerated > 0) {\n                this.generator.particlesGenerated = 0;\n                this.generator.particles = [];\n                this.generator.lastNumberOfPieces = 0;\n            }\n        };\n        this.stop = () => {\n            this.options = { run: false };\n            if (this.rafId) {\n                cancelAnimationFrame(this.rafId);\n                this.rafId = undefined;\n            }\n        };\n        this.canvas = canvas;\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get canvas context');\n        }\n        this.context = ctx;\n        this.generator = new ParticleGenerator(this.canvas, () => this.options);\n        this.options = opts;\n        this.update();\n    }\n    get options() {\n        return this._options;\n    }\n    set options(opts) {\n        const lastRunState = this._options?.run;\n        const lastRecycleState = this._options?.recycle;\n        this.setOptionsWithDefaults(opts);\n        if (this.generator) {\n            Object.assign(this.generator, this.options.confettiSource);\n            if (typeof opts.recycle === 'boolean' &&\n                opts.recycle &&\n                lastRecycleState === false) {\n                this.generator.lastNumberOfPieces = this.generator.particles.length;\n            }\n        }\n        if (typeof opts.run === 'boolean' && opts.run && lastRunState === false) {\n            this.update();\n        }\n    }\n}\n\nconst ref = React.createRef();\nclass ReactConfettiInternal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        this.canvas = props.canvasRef || ref;\n    }\n    componentDidMount() {\n        if (this.canvas.current) {\n            const opts = extractCanvasProps(this.props)[0];\n            this.confetti = new Confetti(this.canvas.current, opts);\n        }\n    }\n    componentDidUpdate() {\n        const confettiOptions = extractCanvasProps(this.props)[0];\n        if (this.confetti) {\n            this.confetti.options = confettiOptions;\n        }\n    }\n    componentWillUnmount() {\n        if (this.confetti) {\n            this.confetti.stop();\n        }\n        this.confetti = undefined;\n    }\n    render() {\n        const [confettiOptions, passedProps] = extractCanvasProps(this.props);\n        const canvasStyles = {\n            zIndex: 2,\n            position: 'absolute',\n            pointerEvents: 'none',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            ...passedProps.style,\n        };\n        return (jsx(\"canvas\", { width: confettiOptions.width, height: confettiOptions.height, ref: this.canvas, ...passedProps, style: canvasStyles }));\n    }\n}\nReactConfettiInternal.defaultProps = {\n    ...confettiDefaults,\n};\nReactConfettiInternal.displayName = 'ReactConfetti';\nfunction extractCanvasProps(props) {\n    const confettiOptions = {};\n    const refs = {};\n    const rest = {};\n    const confettiOptionKeys = [\n        ...Object.keys(confettiDefaults),\n        'confettiSource',\n        'drawShape',\n        'onConfettiComplete',\n        'frameRate',\n    ];\n    const refProps = ['canvasRef'];\n    for (const prop in props) {\n        const val = props[prop];\n        if (confettiOptionKeys.includes(prop)) {\n            confettiOptions[prop] = val;\n        }\n        else if (refProps.includes(prop)) {\n            refProps[prop] = val;\n        }\n        else {\n            rest[prop] = val;\n        }\n    }\n    return [confettiOptions, rest, refs];\n}\nconst ReactConfetti = React.forwardRef((props, ref) => jsx(ReactConfettiInternal, { canvasRef: ref, ...props }));\n\nexport { ReactConfetti as default };\n//# sourceMappingURL=react-confetti.mjs.map\n","'use strict';\n\n// t: current time, b: beginning value, _c: final value, d: total duration\nvar tweenFunctions = {\n  linear: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * t / d + b;\n  },\n  easeInQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t + b;\n  },\n  easeOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  easeInOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    } else {\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    }\n  },\n  easeInCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t + b;\n  },\n  easeOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  },\n  easeInOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  easeInQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t + b;\n  },\n  easeOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  },\n  easeInOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t + b;\n    } else {\n      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  easeInQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  easeOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  easeInOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  easeInSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  easeOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  },\n  easeInOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  },\n  easeInExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n  },\n  easeOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n  },\n  easeInOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    } else {\n      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  easeInCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  easeOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  },\n  easeInOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    } else {\n      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  easeInElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  easeOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  easeInOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    } else {\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    }\n  },\n  easeInBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  easeOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  easeInOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    }\n  },\n  easeInBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    v = tweenFunctions.easeOutBounce(d - t, 0, c, d);\n    return c - v + b;\n  },\n  easeOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  easeInOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    if (t < d / 2) {\n      v = tweenFunctions.easeInBounce(t * 2, 0, c, d);\n      return v * 0.5 + b;\n    } else {\n      v = tweenFunctions.easeOutBounce(t * 2 - d, 0, c, d);\n      return v * 0.5 + c * 0.5 + b;\n    }\n  }\n};\n\nmodule.exports = tweenFunctions;\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactRoulettePro\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactRoulettePro\"] = factory(root[\"React\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE_react__) => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/components/PrizesWrapper/PrizesWrapper.css\":\n/*!********************************************************!*\\\n  !*** ./src/components/PrizesWrapper/PrizesWrapper.css ***!\n  \\********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n/***/ }),\n\n/***/ \"./src/components/Wrapper/Wrapper.css\":\n/*!********************************************!*\\\n  !*** ./src/components/Wrapper/Wrapper.css ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n/***/ }),\n\n/***/ \"./src/designs/Regular/Regular.css\":\n/*!*****************************************!*\\\n  !*** ./src/designs/Regular/Regular.css ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n/***/ }),\n\n/***/ \"./src/components/PrizesWrapper/PrizesWrapper.tsx\":\n/*!********************************************************!*\\\n  !*** ./src/components/PrizesWrapper/PrizesWrapper.tsx ***!\n  \\********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_RouletteContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../context/RouletteContext */ \"./src/context/RouletteContext.tsx\");\n/* harmony import */ var _utills__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utills */ \"./src/utills/index.ts\");\n/* harmony import */ var _PrizesWrapper_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PrizesWrapper.css */ \"./src/components/PrizesWrapper/PrizesWrapper.css\");\n\n\n\n\nvar PrizesWrapper = function (_a) {\n    var children = _a.children, className = _a.className, _b = _a.tagName, Tag = _b === void 0 ? 'div' : _b, style = _a.style;\n    var _c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_RouletteContext__WEBPACK_IMPORTED_MODULE_1__[\"default\"]), type = _c.type, options = _c.options, start = _c.start, prizeListClassName = _c.prizeListClassName;\n    var isWithAnimation = options.withoutAnimation !== true && start !== true;\n    var wrapperClassName = (0,_utills__WEBPACK_IMPORTED_MODULE_2__.classNames)('roulette-pro-prize-list', {\n        'with-animation': isWithAnimation,\n    }, [type], prizeListClassName, className);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tag, { className: wrapperClassName, style: style }, children));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PrizesWrapper);\n\n\n/***/ }),\n\n/***/ \"./src/components/PrizesWrapper/index.ts\":\n/*!***********************************************!*\\\n  !*** ./src/components/PrizesWrapper/index.ts ***!\n  \\***********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PrizesWrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PrizesWrapper */ \"./src/components/PrizesWrapper/PrizesWrapper.tsx\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_PrizesWrapper__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/components/Roulette/Roulette.tsx\":\n/*!**********************************************!*\\\n  !*** ./src/components/Roulette/Roulette.tsx ***!\n  \\**********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _designs_Regular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../designs/Regular */ \"./src/designs/Regular/index.ts\");\n/* harmony import */ var _context_RouletteContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/RouletteContext */ \"./src/context/RouletteContext.tsx\");\n/* harmony import */ var _Wrapper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Wrapper */ \"./src/components/Wrapper/index.ts\");\n/* harmony import */ var _PrizesWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../PrizesWrapper */ \"./src/components/PrizesWrapper/index.ts\");\n/* harmony import */ var _utills__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utills */ \"./src/utills/index.ts\");\n/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hooks */ \"./src/hooks/index.ts\");\n\n// Default design\n\n\n\n\n\n\nvar Roulette = function (_a) {\n    var _b, _c, _d;\n    var topChildren = _a.topChildren, bottomChildren = _a.bottomChildren, designPlugin = _a.designPlugin, prizeItemRenderFunction = _a.prizeItemRenderFunction, prizes = _a.prizes, _e = _a.defaultDesignOptions, defaultDesignOptions = _e === void 0 ? {} : _e, start = _a.start, prizeIndex = _a.prizeIndex, _f = _a.spinningTime, spinningTime = _f === void 0 ? 10 : _f, _g = _a.transitionFunction, transitionFunction = _g === void 0 ? 'cubic-bezier(0.0125, 0.1, 0.1, 1)' : _g, _h = _a.onPrizeDefined, onPrizeDefined = _h === void 0 ? function () { } : _h, classes = _a.classes, soundWhileSpinning = _a.soundWhileSpinning, _j = _a.options, options = _j === void 0 ? {} : _j, _k = _a.type, type = _k === void 0 ? 'horizontal' : _k;\n    var _l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0), wrapperSize = _l[0], setWrapperSize = _l[1];\n    var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n    var _m = (0,_hooks__WEBPACK_IMPORTED_MODULE_6__.useAudio)(soundWhileSpinning !== null && soundWhileSpinning !== void 0 ? soundWhileSpinning : ''), startSound = _m.start, stopSound = _m.stop;\n    var stopInCenter = options.stopInCenter;\n    var defaultDesign = (0,_designs_Regular__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(defaultDesignOptions)({ type: type });\n    var design = typeof designPlugin !== 'function' ? defaultDesign : designPlugin({ type: type });\n    var prizeItemWidth = design.prizeItemWidth, prizeItemHeight = design.prizeItemHeight;\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        if (!wrapperRef) {\n            return;\n        }\n        var setCurrentWrapperWidth = function () {\n            var _a = wrapperRef.current.getBoundingClientRect(), width = _a.width, height = _a.height;\n            switch (type) {\n                case 'horizontal':\n                    return setWrapperSize(width);\n                case 'vertical':\n                    return setWrapperSize(height);\n                default:\n                    console.error(\"Unknown roulette type \".concat(type));\n            }\n        };\n        setCurrentWrapperWidth();\n        window.addEventListener('resize', setCurrentWrapperWidth);\n        return function () {\n            window.removeEventListener('resize', setCurrentWrapperWidth);\n        };\n    }, [wrapperRef, type]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        if (!start) {\n            return;\n        }\n        if (soundWhileSpinning) {\n            startSound();\n        }\n        var timeout = setTimeout(function () {\n            onPrizeDefined();\n            if (soundWhileSpinning) {\n                stopSound();\n            }\n        }, spinningTime * 1000);\n        return function () {\n            clearTimeout(timeout);\n            if (soundWhileSpinning) {\n                stopSound();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [start, spinningTime]);\n    var prizeIndexOffset = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n        var prizeItemSize = type === 'horizontal' ? prizeItemWidth : prizeItemHeight;\n        var prizeOffset = (0,_utills__WEBPACK_IMPORTED_MODULE_5__.getPrizeOffset)(prizeItemSize, prizeIndex, wrapperSize / 2);\n        var additionalOffset = stopInCenter === true ? 0 : (0,_utills__WEBPACK_IMPORTED_MODULE_5__.getPrizeAdditionalOffset)(prizeItemSize);\n        return prizeOffset + additionalOffset;\n    }, [\n        type,\n        prizeIndex,\n        prizeItemWidth,\n        prizeItemHeight,\n        wrapperSize,\n        stopInCenter,\n    ]);\n    var getInlineStyles = function () {\n        var _a, _b;\n        var getAnimationProperty = function () {\n            switch (type) {\n                case 'horizontal':\n                    return 'left';\n                case 'vertical':\n                    return 'top';\n                default:\n                    throw new Error('Type is unknown');\n            }\n        };\n        var animationProperty = getAnimationProperty();\n        if (start === false) {\n            return _a = {},\n                _a[animationProperty] = '0',\n                _a.willChange = animationProperty,\n                _a;\n        }\n        return _b = {\n                transition: \"all \".concat(spinningTime, \"s \").concat(transitionFunction, \" 0s\")\n            },\n            _b[animationProperty] = \"-\".concat(prizeIndexOffset, \"px\"),\n            _b;\n    };\n    var inlineStyles = getInlineStyles();\n    var getRenderFunction = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        if (typeof prizeItemRenderFunction === 'function') {\n            return prizeItemRenderFunction;\n        }\n        if (typeof design.prizeItemRenderFunction === 'function') {\n            return design.prizeItemRenderFunction;\n        }\n        return defaultDesign.prizeItemRenderFunction;\n    }, [\n        defaultDesign.prizeItemRenderFunction,\n        design.prizeItemRenderFunction,\n        prizeItemRenderFunction,\n    ]);\n    var prizesElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n        var _a;\n        var renderFunction = getRenderFunction();\n        var className = (0,_utills__WEBPACK_IMPORTED_MODULE_5__.classNames)(classes === null || classes === void 0 ? void 0 : classes.prizeItem, (_a = design.classes) === null || _a === void 0 ? void 0 : _a.prizeItem);\n        return prizes.map(function (item) { return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", { key: item.id, className: className }, renderFunction(item))); });\n    }, [\n        prizes,\n        getRenderFunction,\n        classes === null || classes === void 0 ? void 0 : classes.prizeItem,\n        (_b = design.classes) === null || _b === void 0 ? void 0 : _b.prizeItem,\n    ]);\n    /* Guards */\n    // The width & height guard\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        var _a, _b, _c, _d;\n        if (prizesElement.length === 0) {\n            return;\n        }\n        var width = -1;\n        var height = -1;\n        var reset = function () {\n            width = -1;\n            height = -1;\n        };\n        for (var i = 0; i < prizesElement.length; i += 1) {\n            var item = (_d = (_c = (_b = (_a = prizesElement[i]) === null || _a === void 0 ? void 0 : _a.props) === null || _b === void 0 ? void 0 : _b.children) === null || _c === void 0 ? void 0 : _c.props) === null || _d === void 0 ? void 0 : _d.style;\n            var itemWidth = item === null || item === void 0 ? void 0 : item.width;\n            var itemHeight = item === null || item === void 0 ? void 0 : item.height;\n            if (width === -1 && height === -1) {\n                width = itemWidth;\n                height = itemHeight;\n                continue;\n            }\n            if (width === itemWidth && height === itemHeight) {\n                continue;\n            }\n            // This guard makes sure that every prize item width and height the same as in designPlugin\n            if (itemWidth !== prizeItemWidth || itemHeight !== prizeItemHeight) {\n                console.error('One or more prize items have a different width or height than what is set in the designPlugin. Therefore, the roulette is incorrectly calculating the offset for the prize item index. Please check your `prizeItemRenderFunction`. All prize items must have the same width and height as set in the `prizeItemRenderFunction`');\n            }\n            // This guard makes sure that every prize item has the same width & height\n            // TODO: to think about should we stay this guard because actually the first guard covers this check\n            console.error('One or more prize items have different width or height; therefore, the roulette is incorrectly calculating the offset for the prize item index. All prize items must have the same width and height. Please check your `prizeItemRenderFunction` or `designPlugin` options');\n            break;\n        }\n        reset();\n        return function () {\n            reset();\n        };\n    }, [prizesElement, prizeItemWidth, prizeItemHeight]);\n    /* End guards */\n    var wrapperClassName = (0,_utills__WEBPACK_IMPORTED_MODULE_5__.classNames)(classes === null || classes === void 0 ? void 0 : classes.wrapper, (_c = design.classes) === null || _c === void 0 ? void 0 : _c.wrapper);\n    var prizeListClassName = (0,_utills__WEBPACK_IMPORTED_MODULE_5__.classNames)(classes === null || classes === void 0 ? void 0 : classes.prizeListWrapper, (_d = design.classes) === null || _d === void 0 ? void 0 : _d.prizeListWrapper);\n    var contextValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () { return ({\n        options: options,\n        start: start,\n        wrapperClassName: wrapperClassName,\n        prizeListClassName: prizeListClassName,\n        type: type,\n    }); }, [options, start, type, prizeListClassName, wrapperClassName]);\n    var topChildrenElement = (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\n        design.topChildren,\n        topChildren));\n    var bottomChildrenElement = (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\n        design.bottomChildren,\n        bottomChildren));\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_context_RouletteContext__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Provider, { value: contextValue },\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Wrapper__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { ref: wrapperRef },\n            topChildrenElement,\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_PrizesWrapper__WEBPACK_IMPORTED_MODULE_4__[\"default\"], { tagName: \"ul\", style: inlineStyles }, prizesElement),\n            bottomChildrenElement)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Roulette);\n\n\n/***/ }),\n\n/***/ \"./src/components/Roulette/index.ts\":\n/*!******************************************!*\\\n  !*** ./src/components/Roulette/index.ts ***!\n  \\******************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Roulette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Roulette */ \"./src/components/Roulette/Roulette.tsx\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_Roulette__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/components/Wrapper/Wrapper.tsx\":\n/*!********************************************!*\\\n  !*** ./src/components/Wrapper/Wrapper.tsx ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utills__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utills */ \"./src/utills/index.ts\");\n/* harmony import */ var _context_RouletteContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/RouletteContext */ \"./src/context/RouletteContext.tsx\");\n/* harmony import */ var _Wrapper_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Wrapper.css */ \"./src/components/Wrapper/Wrapper.css\");\n\n\n\n\nvar Wrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function (_a, ref) {\n    var children = _a.children, className = _a.className;\n    var rouletteContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_RouletteContext__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n    var wrapperClassName = (0,_utills__WEBPACK_IMPORTED_MODULE_1__.classNames)('roulette-pro-wrapper', rouletteContext.wrapperClassName, className);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: wrapperClassName, ref: ref }, children));\n});\nWrapper.displayName = 'Wrapper';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Wrapper);\n\n\n/***/ }),\n\n/***/ \"./src/components/Wrapper/index.ts\":\n/*!*****************************************!*\\\n  !*** ./src/components/Wrapper/index.ts ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Wrapper */ \"./src/components/Wrapper/Wrapper.tsx\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_Wrapper__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/context/RouletteContext.tsx\":\n/*!*****************************************!*\\\n  !*** ./src/context/RouletteContext.tsx ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar RouletteContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RouletteContext);\n\n\n/***/ }),\n\n/***/ \"./src/designs/Regular/Regular.tsx\":\n/*!*****************************************!*\\\n  !*** ./src/designs/Regular/Regular.tsx ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Regular_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Regular.css */ \"./src/designs/Regular/Regular.css\");\n\n\nvar TopChildren = function (_a) {\n    var type = _a.type, hideCenterDelimiter = _a.hideCenterDelimiter;\n    return hideCenterDelimiter !== true ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { \"data-testid\": \"design-top\", className: \"roulette-pro-regular-design-top \".concat(type) })) : null;\n};\nvar regularDesign = function (_a) {\n    var prizesWithText = _a.prizesWithText, hideCenterDelimiter = _a.hideCenterDelimiter;\n    return function (_a) {\n        var type = _a.type;\n        var prizeItemWidth = 205;\n        var prizeItemHeightWithoutText = type === 'vertical' ? 172 : 174;\n        var prizeItemHeight = prizesWithText === true ? 234 : prizeItemHeightWithoutText;\n        var prizeItemClassName = \"roulette-pro-regular-design-prize-item-\".concat(type);\n        return {\n            topChildren: (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopChildren, { type: type, hideCenterDelimiter: hideCenterDelimiter })),\n            bottomChildren: null,\n            prizeItemWidth: prizeItemWidth,\n            prizeItemHeight: prizeItemHeight,\n            prizeItemRenderFunction: function (_a) {\n                var image = _a.image, text = _a.text;\n                var withText = prizesWithText === true && text !== undefined;\n                return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"roulette-pro-regular-prize-item\", style: { width: prizeItemWidth, height: prizeItemHeight } },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: withText === true\n                            ? 'roulette-pro-regular-prize-item-wrapper'\n                            : 'roulette-pro-regular-prize-item-wrapper center' },\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"roulette-pro-regular-image-wrapper\" },\n                            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"img\", { className: \"roulette-pro-regular-prize-item-image\", src: image, alt: withText === true ? \"prize item \".concat(text) : 'prize item' })),\n                        withText === true && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"roulette-pro-regular-prize-item-text\" }, text)))));\n            },\n            classes: {\n                prizeItem: prizeItemClassName,\n            },\n        };\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (regularDesign);\n\n\n/***/ }),\n\n/***/ \"./src/designs/Regular/index.ts\":\n/*!**************************************!*\\\n  !*** ./src/designs/Regular/index.ts ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Regular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Regular */ \"./src/designs/Regular/Regular.tsx\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_Regular__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/hooks/index.ts\":\n/*!****************************!*\\\n  !*** ./src/hooks/index.ts ***!\n  \\****************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAudio: () => (/* reexport safe */ _useAudio__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _useAudio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useAudio */ \"./src/hooks/useAudio/index.ts\");\n\n\n\n\n/***/ }),\n\n/***/ \"./src/hooks/useAudio/index.ts\":\n/*!*************************************!*\\\n  !*** ./src/hooks/useAudio/index.ts ***!\n  \\*************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _useAudio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useAudio */ \"./src/hooks/useAudio/useAudio.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_useAudio__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/hooks/useAudio/useAudio.ts\":\n/*!****************************************!*\\\n  !*** ./src/hooks/useAudio/useAudio.ts ***!\n  \\****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar useAudio = function (url) {\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), audio = _a[0], setAudio = _a[1];\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false), isPlaying = _b[0], setIsPlaying = _b[1];\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        if (typeof window === 'undefined' || typeof Audio === 'undefined' || !url) {\n            return;\n        }\n        setAudio(new Audio(url));\n    }, [url]);\n    var start = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        if (!audio) {\n            return;\n        }\n        audio.play();\n        setIsPlaying(true);\n    }, [audio]);\n    var stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        if (!audio) {\n            return;\n        }\n        audio.pause();\n        audio.currentTime = 0;\n        setIsPlaying(false);\n    }, [audio]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        return function () {\n            setIsPlaying(false);\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        if (!audio) {\n            return;\n        }\n        var listener = function () {\n            stop();\n        };\n        audio.addEventListener('ended', listener);\n        return function () {\n            audio.removeEventListener('ended', listener);\n        };\n    }, [audio, stop]);\n    return { isPlaying: isPlaying, start: start, stop: stop };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useAudio);\n\n\n/***/ }),\n\n/***/ \"./src/utills/classNames/classNames.ts\":\n/*!*********************************************!*\\\n  !*** ./src/utills/classNames/classNames.ts ***!\n  \\*********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar isArray = function (item) { return Array.isArray(item); };\nvar isObject = function (item) {\n    return item !== null && isArray(item) === false && typeof item === 'object';\n};\nvar isFunction = function (item) { return typeof item === 'function'; };\nvar isBoolean = function (item) { return typeof item === 'boolean'; };\nvar hasOwnPrototypeOfToString = function (object) {\n    return object.toString !== Object.prototype.toString;\n};\nvar classNames = function () {\n    var classes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        classes[_i] = arguments[_i];\n    }\n    var resultClassName = '';\n    var handlePrimitive = function (item, asKey) {\n        var isItemBoolean = isBoolean(item);\n        if (!item || isItemBoolean === true) {\n            return;\n        }\n        resultClassName += \"\".concat(asKey !== undefined ? asKey : item, \" \");\n    };\n    var handleObject = function (object) {\n        var entries = Object.entries(object);\n        /* maybe throw it out */\n        var hasObjectOwnPrototypeOfToString = hasOwnPrototypeOfToString(object);\n        /**/\n        entries.forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            if (!value) {\n                return;\n            }\n            var isValueFunction = isFunction(value);\n            var isToString = key === 'toString';\n            if (isValueFunction === true && isToString === false) {\n                var functionResult = value();\n                handlePrimitive(functionResult, key);\n                return;\n            }\n            if (isToString === false) {\n                resultClassName += \"\".concat(key, \" \");\n            }\n        });\n        /* maybe throw it out */\n        if (hasObjectOwnPrototypeOfToString === true) {\n            var toStringValue = object.toString();\n            handlePrimitive(toStringValue);\n        }\n        /**/\n    };\n    var handleArray = function (array) {\n        array.forEach(function (item) {\n            if (!item || typeof item === 'boolean') {\n                return;\n            }\n            var isItemArray = isArray(item);\n            var isItemObject = isObject(item);\n            if (isItemArray === true) {\n                return handleArray(item);\n            }\n            if (isItemObject === true) {\n                return handleObject(item);\n            }\n            resultClassName += \"\".concat(item, \" \");\n        });\n    };\n    for (var i = 0; i < classes.length; i += 1) {\n        var classNameItem = classes[i];\n        var isItemObject = isObject(classNameItem);\n        var isItemArray = isArray(classNameItem);\n        if (isItemObject === true) {\n            handleObject(classNameItem);\n            continue;\n        }\n        if (isItemArray === true) {\n            handleArray(classNameItem);\n            continue;\n        }\n        handlePrimitive(classNameItem);\n    }\n    return resultClassName.trim();\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (classNames);\n\n\n/***/ }),\n\n/***/ \"./src/utills/classNames/index.ts\":\n/*!****************************************!*\\\n  !*** ./src/utills/classNames/index.ts ***!\n  \\****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _classNames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classNames */ \"./src/utills/classNames/classNames.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_classNames__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts\":\n/*!*************************************************************************!*\\\n  !*** ./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts ***!\n  \\*************************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _getRandomIntInRange__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../getRandomIntInRange */ \"./src/utills/getRandomIntInRange/index.ts\");\n\nvar getPrizeAdditionalOffset = function (itemSize) {\n    var center = itemSize / 2;\n    var randomOffset = (0,_getRandomIntInRange__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(-center + 1, center - 1);\n    return randomOffset;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getPrizeAdditionalOffset);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getPrizeAdditionalOffset/index.ts\":\n/*!******************************************************!*\\\n  !*** ./src/utills/getPrizeAdditionalOffset/index.ts ***!\n  \\******************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _getPrizeAdditionalOffset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getPrizeAdditionalOffset */ \"./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_getPrizeAdditionalOffset__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getPrizeOffset/getPrizeOffset.ts\":\n/*!*****************************************************!*\\\n  !*** ./src/utills/getPrizeOffset/getPrizeOffset.ts ***!\n  \\*****************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * This function gets an offset from container start to container center\n */\nvar getPrizeOffset = function (itemSize, prizeIndex, containerCenter) { return itemSize * prizeIndex - (containerCenter - itemSize / 2); };\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getPrizeOffset);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getPrizeOffset/index.ts\":\n/*!********************************************!*\\\n  !*** ./src/utills/getPrizeOffset/index.ts ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _getPrizeOffset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getPrizeOffset */ \"./src/utills/getPrizeOffset/getPrizeOffset.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_getPrizeOffset__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getRandomIntInRange/getRandomIntInRange.ts\":\n/*!***************************************************************!*\\\n  !*** ./src/utills/getRandomIntInRange/getRandomIntInRange.ts ***!\n  \\***************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * This function gets a random integer between two values, inclusive\n */\nvar getRandomIntInRange = function (min, max) {\n    var minNumber = Math.ceil(min);\n    var maxNumber = Math.floor(max);\n    return Math.floor(Math.random() * (maxNumber - minNumber + 1) + minNumber);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getRandomIntInRange);\n\n\n/***/ }),\n\n/***/ \"./src/utills/getRandomIntInRange/index.ts\":\n/*!*************************************************!*\\\n  !*** ./src/utills/getRandomIntInRange/index.ts ***!\n  \\*************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _getRandomIntInRange__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRandomIntInRange */ \"./src/utills/getRandomIntInRange/getRandomIntInRange.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_getRandomIntInRange__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/utills/index.ts\":\n/*!*****************************!*\\\n  !*** ./src/utills/index.ts ***!\n  \\*****************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   classNames: () => (/* reexport safe */ _classNames__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   getPrizeAdditionalOffset: () => (/* reexport safe */ _getPrizeAdditionalOffset__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   getPrizeOffset: () => (/* reexport safe */ _getPrizeOffset__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   getRandomIntInRange: () => (/* reexport safe */ _getRandomIntInRange__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _getPrizeOffset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getPrizeOffset */ \"./src/utills/getPrizeOffset/index.ts\");\n/* harmony import */ var _getRandomIntInRange__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getRandomIntInRange */ \"./src/utills/getRandomIntInRange/index.ts\");\n/* harmony import */ var _getPrizeAdditionalOffset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getPrizeAdditionalOffset */ \"./src/utills/getPrizeAdditionalOffset/index.ts\");\n/* harmony import */ var _classNames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./classNames */ \"./src/utills/classNames/index.ts\");\n\n\n\n\n\n\n\n/***/ }),\n\n/***/ \"react\":\n/*!**************************************************************************************!*\\\n  !*** external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"} ***!\n  \\**************************************************************************************/\n/***/ ((module) => {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n(() => {\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _components_Roulette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/Roulette */ \"./src/components/Roulette/index.ts\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_components_Roulette__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n})();\n\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUNUZ0I7QUFFOUMsaUVBQWUsdURBQWMsRUFBQzs7Ozs7Ozs7Ozs7Ozs7O0FDRjlCOztHQUVHO0FBQ0gsSUFBTSxtQkFBbUIsR0FBRyxVQUFDLEdBQVcsRUFBRSxHQUFXO0lBQ25ELElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVsQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQztBQUM3RSxDQUFDLENBQUM7QUFFRixpRUFBZSxtQkFBbUIsRUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ1ZxQjtBQUV4RCxpRUFBZSw0REFBbUIsRUFBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZXO0FBQ1U7QUFDVTtBQUM1QjtBQU9wQzs7Ozs7Ozs7Ozs7QUNWRjs7Ozs7O1VDQUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7Ozs7OztBQ05nRDtBQVFoRCxpRUFBZSw0REFBVyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1ByaXplc1dyYXBwZXIvUHJpemVzV3JhcHBlci5jc3M/YmU2MyIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvLy4vc3JjL2NvbXBvbmVudHMvV3JhcHBlci9XcmFwcGVyLmNzcz9hMjI5Iiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vLi9zcmMvZGVzaWducy9SZWd1bGFyL1JlZ3VsYXIuY3NzPzYxZGIiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1ByaXplc1dyYXBwZXIvUHJpemVzV3JhcHBlci50c3giLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1ByaXplc1dyYXBwZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1JvdWxldHRlL1JvdWxldHRlLnRzeCIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvLy4vc3JjL2NvbXBvbmVudHMvUm91bGV0dGUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1dyYXBwZXIvV3JhcHBlci50c3giLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb21wb25lbnRzL1dyYXBwZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9jb250ZXh0L1JvdWxldHRlQ29udGV4dC50c3giLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9kZXNpZ25zL1JlZ3VsYXIvUmVndWxhci50c3giLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9kZXNpZ25zL1JlZ3VsYXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy9ob29rcy9pbmRleC50cyIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvLy4vc3JjL2hvb2tzL3VzZUF1ZGlvL2luZGV4LnRzIiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vLi9zcmMvaG9va3MvdXNlQXVkaW8vdXNlQXVkaW8udHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvY2xhc3NOYW1lcy9jbGFzc05hbWVzLnRzIiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vLi9zcmMvdXRpbGxzL2NsYXNzTmFtZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvZ2V0UHJpemVBZGRpdGlvbmFsT2Zmc2V0L2dldFByaXplQWRkaXRpb25hbE9mZnNldC50cyIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvLy4vc3JjL3V0aWxscy9nZXRQcml6ZUFkZGl0aW9uYWxPZmZzZXQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvZ2V0UHJpemVPZmZzZXQvZ2V0UHJpemVPZmZzZXQudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvZ2V0UHJpemVPZmZzZXQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvZ2V0UmFuZG9tSW50SW5SYW5nZS9nZXRSYW5kb21JbnRJblJhbmdlLnRzIiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vLi9zcmMvdXRpbGxzL2dldFJhbmRvbUludEluUmFuZ2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby8uL3NyYy91dGlsbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby9leHRlcm5hbCB1bWQge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzMlwiOlwicmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiYW1kXCI6XCJyZWFjdFwifSIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vUmVhY3RSb3VsZXR0ZVByby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1JlYWN0Um91bGV0dGVQcm8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9SZWFjdFJvdWxldHRlUHJvLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInJlYWN0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlJlYWN0Um91bGV0dGVQcm9cIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiUmVhY3RSb3VsZXR0ZVByb1wiXSA9IGZhY3Rvcnkocm9vdFtcIlJlYWN0XCJdKTtcbn0pKHRoaXMsIChfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X18pID0+IHtcbnJldHVybiAiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IFJvdWxldHRlQ29udGV4dCBmcm9tICcuLi8uLi9jb250ZXh0L1JvdWxldHRlQ29udGV4dCc7XG5cbmltcG9ydCB7IGNsYXNzTmFtZXMgfSBmcm9tICcuLi8uLi91dGlsbHMnO1xuXG5pbXBvcnQgdHlwZSB7IElQcml6ZXNXcmFwcGVyUHJvcHMgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmltcG9ydCAnLi9Qcml6ZXNXcmFwcGVyLmNzcyc7XG5cbmNvbnN0IFByaXplc1dyYXBwZXIgPSAoe1xuICBjaGlsZHJlbixcbiAgY2xhc3NOYW1lLFxuICB0YWdOYW1lOiBUYWcgPSAnZGl2JyxcbiAgc3R5bGUsXG59OiBJUHJpemVzV3JhcHBlclByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdHlwZSwgb3B0aW9ucywgc3RhcnQsIHByaXplTGlzdENsYXNzTmFtZSB9ID1cbiAgICB1c2VDb250ZXh0KFJvdWxldHRlQ29udGV4dCk7XG5cbiAgY29uc3QgaXNXaXRoQW5pbWF0aW9uID0gb3B0aW9ucy53aXRob3V0QW5pbWF0aW9uICE9PSB0cnVlICYmIHN0YXJ0ICE9PSB0cnVlO1xuXG4gIGNvbnN0IHdyYXBwZXJDbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgICdyb3VsZXR0ZS1wcm8tcHJpemUtbGlzdCcsXG4gICAge1xuICAgICAgJ3dpdGgtYW5pbWF0aW9uJzogaXNXaXRoQW5pbWF0aW9uLFxuICAgIH0sXG4gICAgW3R5cGVdLFxuICAgIHByaXplTGlzdENsYXNzTmFtZSxcbiAgICBjbGFzc05hbWUsXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8VGFnIGNsYXNzTmFtZT17d3JhcHBlckNsYXNzTmFtZX0gc3R5bGU9e3N0eWxlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1RhZz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByaXplc1dyYXBwZXI7XG4iLCJpbXBvcnQgUHJpemVzV3JhcHBlciBmcm9tICcuL1ByaXplc1dyYXBwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBQcml6ZXNXcmFwcGVyO1xuIiwiaW1wb3J0IFJlYWN0LCB7XG4gIEZyYWdtZW50LFxuICB1c2VTdGF0ZSxcbiAgdXNlRWZmZWN0LFxuICB1c2VSZWYsXG4gIHVzZU1lbW8sXG4gIHVzZUNhbGxiYWNrLFxufSBmcm9tICdyZWFjdCc7XG5cbi8vIERlZmF1bHQgZGVzaWduXG5pbXBvcnQgcmVndWxhckRlc2lnbiBmcm9tICcuLi8uLi9kZXNpZ25zL1JlZ3VsYXInO1xuaW1wb3J0IHR5cGUgeyBJUmVndWxhckRlc2lnblByb3BzIH0gZnJvbSAnLi4vLi4vZGVzaWducy9SZWd1bGFyJztcblxuaW1wb3J0IHR5cGUge1xuICBQcml6ZVR5cGUsXG4gIElEZXNpZ25QbHVnaW4sXG4gIElEZXNpZ25QbHVnaW5Qcm9wcyxcbiAgT3B0aW9uc1R5cGUsXG4gIFJvdWxldHRlVHlwZSxcbiAgQ2xhc3Nlc1R5cGUsXG59IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IFJvdWxldHRlQ29udGV4dCwge1xuICBJUm91bGV0dGVDb250ZXh0UHJvcHMsXG59IGZyb20gJy4uLy4uL2NvbnRleHQvUm91bGV0dGVDb250ZXh0JztcblxuaW1wb3J0IFdyYXBwZXIgZnJvbSAnLi4vV3JhcHBlcic7XG5pbXBvcnQgUHJpemVzV3JhcHBlciBmcm9tICcuLi9Qcml6ZXNXcmFwcGVyJztcblxuaW1wb3J0IHtcbiAgZ2V0UHJpemVPZmZzZXQsXG4gIGdldFByaXplQWRkaXRpb25hbE9mZnNldCxcbiAgY2xhc3NOYW1lcyxcbn0gZnJvbSAnLi4vLi4vdXRpbGxzJztcblxuaW1wb3J0IHsgdXNlQXVkaW8gfSBmcm9tICcuLi8uLi9ob29rcyc7XG5cbnR5cGUgUHJpemVJdGVtUmVuZGVyRnVuY3Rpb25UeXBlID0gKGl0ZW06IFByaXplVHlwZSkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuXG5pbnRlcmZhY2UgSVJvdWxldHRlUHJvcHMge1xuICBzdGFydDogYm9vbGVhbjtcbiAgcHJpemVzOiBBcnJheTxQcml6ZVR5cGU+O1xuICBwcml6ZUluZGV4OiBudW1iZXI7XG4gIG9uUHJpemVEZWZpbmVkPzogKCkgPT4gdm9pZDtcbiAgc3Bpbm5pbmdUaW1lPzogbnVtYmVyO1xuICB0cmFuc2l0aW9uRnVuY3Rpb24/OiBzdHJpbmc7XG4gIHByaXplSXRlbVJlbmRlckZ1bmN0aW9uPzogUHJpemVJdGVtUmVuZGVyRnVuY3Rpb25UeXBlO1xuICB0b3BDaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgYm90dG9tQ2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIGRlc2lnblBsdWdpbj86ICh7IHR5cGUgfTogSURlc2lnblBsdWdpblByb3BzKSA9PiBJRGVzaWduUGx1Z2luO1xuICBkZWZhdWx0RGVzaWduT3B0aW9ucz86IElSZWd1bGFyRGVzaWduUHJvcHM7XG4gIGNsYXNzZXM/OiBDbGFzc2VzVHlwZTtcbiAgc291bmRXaGlsZVNwaW5uaW5nPzogc3RyaW5nO1xuICBvcHRpb25zPzogT3B0aW9uc1R5cGU7XG4gIHR5cGU/OiBSb3VsZXR0ZVR5cGU7XG59XG5cbmNvbnN0IFJvdWxldHRlID0gKHtcbiAgdG9wQ2hpbGRyZW4sXG4gIGJvdHRvbUNoaWxkcmVuLFxuICBkZXNpZ25QbHVnaW4sXG4gIHByaXplSXRlbVJlbmRlckZ1bmN0aW9uLFxuICBwcml6ZXMsXG4gIGRlZmF1bHREZXNpZ25PcHRpb25zID0ge30sXG4gIHN0YXJ0LFxuICBwcml6ZUluZGV4LFxuICBzcGlubmluZ1RpbWUgPSAxMCxcbiAgdHJhbnNpdGlvbkZ1bmN0aW9uID0gJ2N1YmljLWJlemllcigwLjAxMjUsIDAuMSwgMC4xLCAxKScsXG4gIG9uUHJpemVEZWZpbmVkID0gKCkgPT4ge30sXG4gIGNsYXNzZXMsXG4gIHNvdW5kV2hpbGVTcGlubmluZyxcbiAgb3B0aW9ucyA9IHt9LFxuICB0eXBlID0gJ2hvcml6b250YWwnLFxufTogSVJvdWxldHRlUHJvcHMpID0+IHtcbiAgY29uc3QgW3dyYXBwZXJTaXplLCBzZXRXcmFwcGVyU2l6ZV0gPSB1c2VTdGF0ZSgwKTtcblxuICBjb25zdCB3cmFwcGVyUmVmID0gdXNlUmVmKCkgYXMgUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD47XG5cbiAgY29uc3QgeyBzdGFydDogc3RhcnRTb3VuZCwgc3RvcDogc3RvcFNvdW5kIH0gPSB1c2VBdWRpbyhcbiAgICBzb3VuZFdoaWxlU3Bpbm5pbmcgPz8gJycsXG4gICk7XG5cbiAgY29uc3QgeyBzdG9wSW5DZW50ZXIgfSA9IG9wdGlvbnM7XG5cbiAgY29uc3QgZGVmYXVsdERlc2lnbiA9IHJlZ3VsYXJEZXNpZ24oZGVmYXVsdERlc2lnbk9wdGlvbnMpKHsgdHlwZSB9KTtcblxuICBjb25zdCBkZXNpZ24gPVxuICAgIHR5cGVvZiBkZXNpZ25QbHVnaW4gIT09ICdmdW5jdGlvbicgPyBkZWZhdWx0RGVzaWduIDogZGVzaWduUGx1Z2luKHsgdHlwZSB9KTtcblxuICBjb25zdCB7IHByaXplSXRlbVdpZHRoLCBwcml6ZUl0ZW1IZWlnaHQgfSA9IGRlc2lnbjtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghd3JhcHBlclJlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNldEN1cnJlbnRXcmFwcGVyV2lkdGggPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHdyYXBwZXJSZWYuY3VycmVudCEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgICAgICByZXR1cm4gc2V0V3JhcHBlclNpemUod2lkdGgpO1xuXG4gICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgICByZXR1cm4gc2V0V3JhcHBlclNpemUoaGVpZ2h0KTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFVua25vd24gcm91bGV0dGUgdHlwZSAke3R5cGV9YCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNldEN1cnJlbnRXcmFwcGVyV2lkdGgoKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRDdXJyZW50V3JhcHBlcldpZHRoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0Q3VycmVudFdyYXBwZXJXaWR0aCk7XG4gICAgfTtcbiAgfSwgW3dyYXBwZXJSZWYsIHR5cGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc291bmRXaGlsZVNwaW5uaW5nKSB7XG4gICAgICBzdGFydFNvdW5kKCk7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb25Qcml6ZURlZmluZWQoKTtcblxuICAgICAgaWYgKHNvdW5kV2hpbGVTcGlubmluZykge1xuICAgICAgICBzdG9wU291bmQoKTtcbiAgICAgIH1cbiAgICB9LCBzcGlubmluZ1RpbWUgKiAxMDAwKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cbiAgICAgIGlmIChzb3VuZFdoaWxlU3Bpbm5pbmcpIHtcbiAgICAgICAgc3RvcFNvdW5kKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtzdGFydCwgc3Bpbm5pbmdUaW1lXSk7XG5cbiAgY29uc3QgcHJpemVJbmRleE9mZnNldCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHByaXplSXRlbVNpemUgPVxuICAgICAgdHlwZSA9PT0gJ2hvcml6b250YWwnID8gcHJpemVJdGVtV2lkdGggOiBwcml6ZUl0ZW1IZWlnaHQ7XG5cbiAgICBjb25zdCBwcml6ZU9mZnNldCA9IGdldFByaXplT2Zmc2V0KFxuICAgICAgcHJpemVJdGVtU2l6ZSxcbiAgICAgIHByaXplSW5kZXgsXG4gICAgICB3cmFwcGVyU2l6ZSAvIDIsXG4gICAgKTtcblxuICAgIGNvbnN0IGFkZGl0aW9uYWxPZmZzZXQgPVxuICAgICAgc3RvcEluQ2VudGVyID09PSB0cnVlID8gMCA6IGdldFByaXplQWRkaXRpb25hbE9mZnNldChwcml6ZUl0ZW1TaXplKTtcblxuICAgIHJldHVybiBwcml6ZU9mZnNldCArIGFkZGl0aW9uYWxPZmZzZXQ7XG4gIH0sIFtcbiAgICB0eXBlLFxuICAgIHByaXplSW5kZXgsXG4gICAgcHJpemVJdGVtV2lkdGgsXG4gICAgcHJpemVJdGVtSGVpZ2h0LFxuICAgIHdyYXBwZXJTaXplLFxuICAgIHN0b3BJbkNlbnRlcixcbiAgXSk7XG5cbiAgY29uc3QgZ2V0SW5saW5lU3R5bGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IGdldEFuaW1hdGlvblByb3BlcnR5ID0gKCkgPT4ge1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgIHJldHVybiAnbGVmdCc7XG5cbiAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgIHJldHVybiAndG9wJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVHlwZSBpcyB1bmtub3duJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFuaW1hdGlvblByb3BlcnR5ID0gZ2V0QW5pbWF0aW9uUHJvcGVydHkoKTtcblxuICAgIGlmIChzdGFydCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIFthbmltYXRpb25Qcm9wZXJ0eV06ICcwJyxcbiAgICAgICAgd2lsbENoYW5nZTogYW5pbWF0aW9uUHJvcGVydHksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2l0aW9uOiBgYWxsICR7c3Bpbm5pbmdUaW1lfXMgJHt0cmFuc2l0aW9uRnVuY3Rpb259IDBzYCxcbiAgICAgIFthbmltYXRpb25Qcm9wZXJ0eV06IGAtJHtwcml6ZUluZGV4T2Zmc2V0fXB4YCxcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGlubGluZVN0eWxlcyA9IGdldElubGluZVN0eWxlcygpO1xuXG4gIGNvbnN0IGdldFJlbmRlckZ1bmN0aW9uID0gdXNlQ2FsbGJhY2soKCk6IFByaXplSXRlbVJlbmRlckZ1bmN0aW9uVHlwZSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcml6ZUl0ZW1SZW5kZXJGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHByaXplSXRlbVJlbmRlckZ1bmN0aW9uO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGVzaWduLnByaXplSXRlbVJlbmRlckZ1bmN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZGVzaWduLnByaXplSXRlbVJlbmRlckZ1bmN0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0RGVzaWduLnByaXplSXRlbVJlbmRlckZ1bmN0aW9uIGFzIFByaXplSXRlbVJlbmRlckZ1bmN0aW9uVHlwZTtcbiAgfSwgW1xuICAgIGRlZmF1bHREZXNpZ24ucHJpemVJdGVtUmVuZGVyRnVuY3Rpb24sXG4gICAgZGVzaWduLnByaXplSXRlbVJlbmRlckZ1bmN0aW9uLFxuICAgIHByaXplSXRlbVJlbmRlckZ1bmN0aW9uLFxuICBdKTtcblxuICBjb25zdCBwcml6ZXNFbGVtZW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcmVuZGVyRnVuY3Rpb24gPSBnZXRSZW5kZXJGdW5jdGlvbigpO1xuXG4gICAgY29uc3QgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyhjbGFzc2VzPy5wcml6ZUl0ZW0sIGRlc2lnbi5jbGFzc2VzPy5wcml6ZUl0ZW0pO1xuXG4gICAgcmV0dXJuIHByaXplcy5tYXAoKGl0ZW0pID0+IChcbiAgICAgIDxsaSBrZXk9e2l0ZW0uaWR9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAge3JlbmRlckZ1bmN0aW9uKGl0ZW0pfVxuICAgICAgPC9saT5cbiAgICApKTtcbiAgfSwgW1xuICAgIHByaXplcyxcbiAgICBnZXRSZW5kZXJGdW5jdGlvbixcbiAgICBjbGFzc2VzPy5wcml6ZUl0ZW0sXG4gICAgZGVzaWduLmNsYXNzZXM/LnByaXplSXRlbSxcbiAgXSk7XG5cbiAgLyogR3VhcmRzICovXG5cbiAgLy8gVGhlIHdpZHRoICYgaGVpZ2h0IGd1YXJkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByaXplc0VsZW1lbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHdpZHRoID0gLTE7XG4gICAgbGV0IGhlaWdodCA9IC0xO1xuXG4gICAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgICB3aWR0aCA9IC0xO1xuICAgICAgaGVpZ2h0ID0gLTE7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJpemVzRWxlbWVudC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgaXRlbSA9IHByaXplc0VsZW1lbnRbaV0/LnByb3BzPy5jaGlsZHJlbj8ucHJvcHM/LnN0eWxlO1xuICAgICAgY29uc3QgaXRlbVdpZHRoID0gaXRlbT8ud2lkdGg7XG4gICAgICBjb25zdCBpdGVtSGVpZ2h0ID0gaXRlbT8uaGVpZ2h0O1xuXG4gICAgICBpZiAod2lkdGggPT09IC0xICYmIGhlaWdodCA9PT0gLTEpIHtcbiAgICAgICAgd2lkdGggPSBpdGVtV2lkdGg7XG4gICAgICAgIGhlaWdodCA9IGl0ZW1IZWlnaHQ7XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aWR0aCA9PT0gaXRlbVdpZHRoICYmIGhlaWdodCA9PT0gaXRlbUhlaWdodCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVGhpcyBndWFyZCBtYWtlcyBzdXJlIHRoYXQgZXZlcnkgcHJpemUgaXRlbSB3aWR0aCBhbmQgaGVpZ2h0IHRoZSBzYW1lIGFzIGluIGRlc2lnblBsdWdpblxuICAgICAgaWYgKGl0ZW1XaWR0aCAhPT0gcHJpemVJdGVtV2lkdGggfHwgaXRlbUhlaWdodCAhPT0gcHJpemVJdGVtSGVpZ2h0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgJ09uZSBvciBtb3JlIHByaXplIGl0ZW1zIGhhdmUgYSBkaWZmZXJlbnQgd2lkdGggb3IgaGVpZ2h0IHRoYW4gd2hhdCBpcyBzZXQgaW4gdGhlIGRlc2lnblBsdWdpbi4gVGhlcmVmb3JlLCB0aGUgcm91bGV0dGUgaXMgaW5jb3JyZWN0bHkgY2FsY3VsYXRpbmcgdGhlIG9mZnNldCBmb3IgdGhlIHByaXplIGl0ZW0gaW5kZXguIFBsZWFzZSBjaGVjayB5b3VyIGBwcml6ZUl0ZW1SZW5kZXJGdW5jdGlvbmAuIEFsbCBwcml6ZSBpdGVtcyBtdXN0IGhhdmUgdGhlIHNhbWUgd2lkdGggYW5kIGhlaWdodCBhcyBzZXQgaW4gdGhlIGBwcml6ZUl0ZW1SZW5kZXJGdW5jdGlvbmAnLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIGd1YXJkIG1ha2VzIHN1cmUgdGhhdCBldmVyeSBwcml6ZSBpdGVtIGhhcyB0aGUgc2FtZSB3aWR0aCAmIGhlaWdodFxuICAgICAgLy8gVE9ETzogdG8gdGhpbmsgYWJvdXQgc2hvdWxkIHdlIHN0YXkgdGhpcyBndWFyZCBiZWNhdXNlIGFjdHVhbGx5IHRoZSBmaXJzdCBndWFyZCBjb3ZlcnMgdGhpcyBjaGVja1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ09uZSBvciBtb3JlIHByaXplIGl0ZW1zIGhhdmUgZGlmZmVyZW50IHdpZHRoIG9yIGhlaWdodDsgdGhlcmVmb3JlLCB0aGUgcm91bGV0dGUgaXMgaW5jb3JyZWN0bHkgY2FsY3VsYXRpbmcgdGhlIG9mZnNldCBmb3IgdGhlIHByaXplIGl0ZW0gaW5kZXguIEFsbCBwcml6ZSBpdGVtcyBtdXN0IGhhdmUgdGhlIHNhbWUgd2lkdGggYW5kIGhlaWdodC4gUGxlYXNlIGNoZWNrIHlvdXIgYHByaXplSXRlbVJlbmRlckZ1bmN0aW9uYCBvciBgZGVzaWduUGx1Z2luYCBvcHRpb25zJyxcbiAgICAgICk7XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJlc2V0KCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVzZXQoKTtcbiAgICB9O1xuICB9LCBbcHJpemVzRWxlbWVudCwgcHJpemVJdGVtV2lkdGgsIHByaXplSXRlbUhlaWdodF0pO1xuXG4gIC8qIEVuZCBndWFyZHMgKi9cblxuICBjb25zdCB3cmFwcGVyQ2xhc3NOYW1lID0gY2xhc3NOYW1lcyhcbiAgICBjbGFzc2VzPy53cmFwcGVyLFxuICAgIGRlc2lnbi5jbGFzc2VzPy53cmFwcGVyLFxuICApO1xuICBjb25zdCBwcml6ZUxpc3RDbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgIGNsYXNzZXM/LnByaXplTGlzdFdyYXBwZXIsXG4gICAgZGVzaWduLmNsYXNzZXM/LnByaXplTGlzdFdyYXBwZXIsXG4gICk7XG5cbiAgY29uc3QgY29udGV4dFZhbHVlID0gdXNlTWVtbzxJUm91bGV0dGVDb250ZXh0UHJvcHM+KFxuICAgICgpID0+ICh7XG4gICAgICBvcHRpb25zLFxuICAgICAgc3RhcnQsXG4gICAgICB3cmFwcGVyQ2xhc3NOYW1lLFxuICAgICAgcHJpemVMaXN0Q2xhc3NOYW1lLFxuICAgICAgdHlwZSxcbiAgICB9KSxcbiAgICBbb3B0aW9ucywgc3RhcnQsIHR5cGUsIHByaXplTGlzdENsYXNzTmFtZSwgd3JhcHBlckNsYXNzTmFtZV0sXG4gICk7XG5cbiAgY29uc3QgdG9wQ2hpbGRyZW5FbGVtZW50ID0gKFxuICAgIDxGcmFnbWVudD5cbiAgICAgIHtkZXNpZ24udG9wQ2hpbGRyZW59XG4gICAgICB7dG9wQ2hpbGRyZW59XG4gICAgPC9GcmFnbWVudD5cbiAgKTtcblxuICBjb25zdCBib3R0b21DaGlsZHJlbkVsZW1lbnQgPSAoXG4gICAgPEZyYWdtZW50PlxuICAgICAge2Rlc2lnbi5ib3R0b21DaGlsZHJlbn1cbiAgICAgIHtib3R0b21DaGlsZHJlbn1cbiAgICA8L0ZyYWdtZW50PlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFJvdWxldHRlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dFZhbHVlfT5cbiAgICAgIDxXcmFwcGVyIHJlZj17d3JhcHBlclJlZn0+XG4gICAgICAgIHt0b3BDaGlsZHJlbkVsZW1lbnR9XG4gICAgICAgIDxQcml6ZXNXcmFwcGVyIHRhZ05hbWU9XCJ1bFwiIHN0eWxlPXtpbmxpbmVTdHlsZXN9PlxuICAgICAgICAgIHtwcml6ZXNFbGVtZW50fVxuICAgICAgICA8L1ByaXplc1dyYXBwZXI+XG4gICAgICAgIHtib3R0b21DaGlsZHJlbkVsZW1lbnR9XG4gICAgICA8L1dyYXBwZXI+XG4gICAgPC9Sb3VsZXR0ZUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSb3VsZXR0ZTtcbiIsImltcG9ydCBSb3VsZXR0ZSBmcm9tICcuL1JvdWxldHRlJztcblxuZXhwb3J0IGRlZmF1bHQgUm91bGV0dGU7XG4iLCJpbXBvcnQgUmVhY3QsIHsgZm9yd2FyZFJlZiwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgY2xhc3NOYW1lcyB9IGZyb20gJy4uLy4uL3V0aWxscyc7XG5cbmltcG9ydCBSb3VsZXR0ZUNvbnRleHQgZnJvbSAnLi4vLi4vY29udGV4dC9Sb3VsZXR0ZUNvbnRleHQnO1xuXG5pbXBvcnQgJy4vV3JhcHBlci5jc3MnO1xuXG5pbnRlcmZhY2UgSVdyYXBwZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxudHlwZSBSZWZUeXBlID0gSFRNTERpdkVsZW1lbnQ7XG5cbmNvbnN0IFdyYXBwZXIgPSBmb3J3YXJkUmVmPFJlZlR5cGUsIElXcmFwcGVyUHJvcHM+KFxuICAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHJvdWxldHRlQ29udGV4dCA9IHVzZUNvbnRleHQoUm91bGV0dGVDb250ZXh0KTtcblxuICAgIGNvbnN0IHdyYXBwZXJDbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgICAgJ3JvdWxldHRlLXByby13cmFwcGVyJyxcbiAgICAgIHJvdWxldHRlQ29udGV4dC53cmFwcGVyQ2xhc3NOYW1lLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3dyYXBwZXJDbGFzc05hbWV9IHJlZj17cmVmfT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbik7XG5cbldyYXBwZXIuZGlzcGxheU5hbWUgPSAnV3JhcHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IFdyYXBwZXI7XG4iLCJpbXBvcnQgV3JhcHBlciBmcm9tICcuL1dyYXBwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBXcmFwcGVyO1xuIiwiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHR5cGUgeyBPcHRpb25zVHlwZSwgUm91bGV0dGVUeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG50eXBlIFdyYXBwZXJUeXBlID0ge1xuICB3cmFwcGVyQ2xhc3NOYW1lPzogc3RyaW5nO1xufTtcblxudHlwZSBQcml6ZXNXcmFwcGVyVHlwZSA9IHtcbiAgcHJpemVMaXN0Q2xhc3NOYW1lPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBJUm91bGV0dGVDb250ZXh0UHJvcHMgZXh0ZW5kcyBXcmFwcGVyVHlwZSwgUHJpemVzV3JhcHBlclR5cGUge1xuICBvcHRpb25zOiBPcHRpb25zVHlwZTtcbiAgc3RhcnQ6IGJvb2xlYW47XG4gIHR5cGU6IFJvdWxldHRlVHlwZTtcbn1cblxuY29uc3QgUm91bGV0dGVDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7fSBhcyBJUm91bGV0dGVDb250ZXh0UHJvcHMpO1xuXG5leHBvcnQgZGVmYXVsdCBSb3VsZXR0ZUNvbnRleHQ7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgJy4vUmVndWxhci5jc3MnO1xuXG5pbXBvcnQgeyBJRGVzaWduUGx1Z2luLCBJRGVzaWduUGx1Z2luUHJvcHMgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlZ3VsYXJEZXNpZ25Qcm9wcyB7XG4gIGhpZGVDZW50ZXJEZWxpbWl0ZXI/OiBib29sZWFuO1xuICBwcml6ZXNXaXRoVGV4dD86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBJVG9wQ2hpbGRyZW5Qcm9wcyB7XG4gIGhpZGVDZW50ZXJEZWxpbWl0ZXI6IElSZWd1bGFyRGVzaWduUHJvcHNbJ2hpZGVDZW50ZXJEZWxpbWl0ZXInXTtcbiAgdHlwZTogSURlc2lnblBsdWdpblByb3BzWyd0eXBlJ107XG59XG5cbmNvbnN0IFRvcENoaWxkcmVuID0gKHsgdHlwZSwgaGlkZUNlbnRlckRlbGltaXRlciB9OiBJVG9wQ2hpbGRyZW5Qcm9wcykgPT5cbiAgaGlkZUNlbnRlckRlbGltaXRlciAhPT0gdHJ1ZSA/IChcbiAgICA8ZGl2XG4gICAgICBkYXRhLXRlc3RpZD1cImRlc2lnbi10b3BcIlxuICAgICAgY2xhc3NOYW1lPXtgcm91bGV0dGUtcHJvLXJlZ3VsYXItZGVzaWduLXRvcCAke3R5cGV9YH1cbiAgICAvPlxuICApIDogbnVsbDtcblxuY29uc3QgcmVndWxhckRlc2lnbiA9XG4gICh7IHByaXplc1dpdGhUZXh0LCBoaWRlQ2VudGVyRGVsaW1pdGVyIH06IElSZWd1bGFyRGVzaWduUHJvcHMpID0+XG4gICh7IHR5cGUgfTogSURlc2lnblBsdWdpblByb3BzKTogSURlc2lnblBsdWdpbiA9PiB7XG4gICAgY29uc3QgcHJpemVJdGVtV2lkdGg6IG51bWJlciA9IDIwNTtcbiAgICBjb25zdCBwcml6ZUl0ZW1IZWlnaHRXaXRob3V0VGV4dCA9IHR5cGUgPT09ICd2ZXJ0aWNhbCcgPyAxNzIgOiAxNzQ7XG4gICAgY29uc3QgcHJpemVJdGVtSGVpZ2h0OiBudW1iZXIgPVxuICAgICAgcHJpemVzV2l0aFRleHQgPT09IHRydWUgPyAyMzQgOiBwcml6ZUl0ZW1IZWlnaHRXaXRob3V0VGV4dDtcbiAgICBjb25zdCBwcml6ZUl0ZW1DbGFzc05hbWUgPSBgcm91bGV0dGUtcHJvLXJlZ3VsYXItZGVzaWduLXByaXplLWl0ZW0tJHt0eXBlfWA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9wQ2hpbGRyZW46IChcbiAgICAgICAgPFRvcENoaWxkcmVuIHR5cGU9e3R5cGV9IGhpZGVDZW50ZXJEZWxpbWl0ZXI9e2hpZGVDZW50ZXJEZWxpbWl0ZXJ9IC8+XG4gICAgICApLFxuICAgICAgYm90dG9tQ2hpbGRyZW46IG51bGwsXG4gICAgICBwcml6ZUl0ZW1XaWR0aCxcbiAgICAgIHByaXplSXRlbUhlaWdodCxcbiAgICAgIHByaXplSXRlbVJlbmRlckZ1bmN0aW9uOiAoeyBpbWFnZSwgdGV4dCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHdpdGhUZXh0ID0gcHJpemVzV2l0aFRleHQgPT09IHRydWUgJiYgdGV4dCAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bGV0dGUtcHJvLXJlZ3VsYXItcHJpemUtaXRlbVwiXG4gICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogcHJpemVJdGVtV2lkdGgsIGhlaWdodDogcHJpemVJdGVtSGVpZ2h0IH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgIHdpdGhUZXh0ID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICA/ICdyb3VsZXR0ZS1wcm8tcmVndWxhci1wcml6ZS1pdGVtLXdyYXBwZXInXG4gICAgICAgICAgICAgICAgICA6ICdyb3VsZXR0ZS1wcm8tcmVndWxhci1wcml6ZS1pdGVtLXdyYXBwZXIgY2VudGVyJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bGV0dGUtcHJvLXJlZ3VsYXItaW1hZ2Utd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdWxldHRlLXByby1yZWd1bGFyLXByaXplLWl0ZW0taW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgc3JjPXtpbWFnZX1cbiAgICAgICAgICAgICAgICAgIGFsdD17d2l0aFRleHQgPT09IHRydWUgPyBgcHJpemUgaXRlbSAke3RleHR9YCA6ICdwcml6ZSBpdGVtJ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge3dpdGhUZXh0ID09PSB0cnVlICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyb3VsZXR0ZS1wcm8tcmVndWxhci1wcml6ZS1pdGVtLXRleHRcIj57dGV4dH08L3A+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBjbGFzc2VzOiB7XG4gICAgICAgIHByaXplSXRlbTogcHJpemVJdGVtQ2xhc3NOYW1lLFxuICAgICAgfSxcbiAgICB9O1xuICB9O1xuXG5leHBvcnQgZGVmYXVsdCByZWd1bGFyRGVzaWduO1xuIiwiaW1wb3J0IHJlZ3VsYXIsIHsgSVJlZ3VsYXJEZXNpZ25Qcm9wcyB9IGZyb20gJy4vUmVndWxhcic7XG5cbmV4cG9ydCB7IElSZWd1bGFyRGVzaWduUHJvcHMgfTtcbmV4cG9ydCBkZWZhdWx0IHJlZ3VsYXI7XG4iLCJpbXBvcnQgdXNlQXVkaW8gZnJvbSAnLi91c2VBdWRpbyc7XG5cbmV4cG9ydCB7IHVzZUF1ZGlvIH07XG4iLCJpbXBvcnQgdXNlQXVkaW8gZnJvbSAnLi91c2VBdWRpbyc7XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUF1ZGlvO1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IHVzZUF1ZGlvID0gKHVybDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IFthdWRpbywgc2V0QXVkaW9dID0gdXNlU3RhdGU8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBBdWRpbyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXVybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldEF1ZGlvKG5ldyBBdWRpbyh1cmwpKTtcbiAgfSwgW3VybF0pO1xuXG4gIGNvbnN0IHN0YXJ0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghYXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhdWRpby5wbGF5KCk7XG4gICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuICB9LCBbYXVkaW9dKTtcblxuICBjb25zdCBzdG9wID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghYXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhdWRpby5wYXVzZSgpO1xuICAgIGF1ZGlvLmN1cnJlbnRUaW1lID0gMDtcbiAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICB9LCBbYXVkaW9dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIHN0b3AoKTtcbiAgICB9O1xuXG4gICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgfSwgW2F1ZGlvLCBzdG9wXSk7XG5cbiAgcmV0dXJuIHsgaXNQbGF5aW5nLCBzdGFydCwgc3RvcCB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlQXVkaW87XG4iLCJjb25zdCBpc0FycmF5ID0gKGl0ZW06IHVua25vd24pID0+IEFycmF5LmlzQXJyYXkoaXRlbSk7XG5cbmNvbnN0IGlzT2JqZWN0ID0gKGl0ZW06IHVua25vd24pID0+XG4gIGl0ZW0gIT09IG51bGwgJiYgaXNBcnJheShpdGVtKSA9PT0gZmFsc2UgJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnO1xuXG5jb25zdCBpc0Z1bmN0aW9uID0gKGl0ZW06IHVua25vd24pID0+IHR5cGVvZiBpdGVtID09PSAnZnVuY3Rpb24nO1xuXG5jb25zdCBpc0Jvb2xlYW4gPSAoaXRlbTogdW5rbm93bikgPT4gdHlwZW9mIGl0ZW0gPT09ICdib29sZWFuJztcblxuY29uc3QgaGFzT3duUHJvdG90eXBlT2ZUb1N0cmluZyA9IChvYmplY3Q6IG9iamVjdCkgPT5cbiAgb2JqZWN0LnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBjbGFzc05hbWVzID0gKC4uLmNsYXNzZXM6IEFycmF5PHVua25vd24+KSA9PiB7XG4gIGxldCByZXN1bHRDbGFzc05hbWUgPSAnJztcblxuICBjb25zdCBoYW5kbGVQcmltaXRpdmUgPSAoaXRlbTogdW5rbm93biwgYXNLZXk/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpc0l0ZW1Cb29sZWFuID0gaXNCb29sZWFuKGl0ZW0pO1xuXG4gICAgaWYgKCFpdGVtIHx8IGlzSXRlbUJvb2xlYW4gPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXN1bHRDbGFzc05hbWUgKz0gYCR7YXNLZXkgIT09IHVuZGVmaW5lZCA/IGFzS2V5IDogaXRlbX0gYDtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVPYmplY3QgPSAob2JqZWN0OiBvYmplY3QpID0+IHtcbiAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMob2JqZWN0KTtcblxuICAgIC8qIG1heWJlIHRocm93IGl0IG91dCAqL1xuICAgIGNvbnN0IGhhc09iamVjdE93blByb3RvdHlwZU9mVG9TdHJpbmcgPSBoYXNPd25Qcm90b3R5cGVPZlRvU3RyaW5nKG9iamVjdCk7XG4gICAgLyoqL1xuXG4gICAgZW50cmllcy5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc1ZhbHVlRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKHZhbHVlKTtcbiAgICAgIGNvbnN0IGlzVG9TdHJpbmcgPSBrZXkgPT09ICd0b1N0cmluZyc7XG5cbiAgICAgIGlmIChpc1ZhbHVlRnVuY3Rpb24gPT09IHRydWUgJiYgaXNUb1N0cmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25SZXN1bHQgPSAodmFsdWUgYXMgRnVuY3Rpb24pKCk7XG5cbiAgICAgICAgaGFuZGxlUHJpbWl0aXZlKGZ1bmN0aW9uUmVzdWx0LCBrZXkpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzVG9TdHJpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIHJlc3VsdENsYXNzTmFtZSArPSBgJHtrZXl9IGA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKiBtYXliZSB0aHJvdyBpdCBvdXQgKi9cbiAgICBpZiAoaGFzT2JqZWN0T3duUHJvdG90eXBlT2ZUb1N0cmluZyA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgdG9TdHJpbmdWYWx1ZSA9IG9iamVjdC50b1N0cmluZygpO1xuXG4gICAgICBoYW5kbGVQcmltaXRpdmUodG9TdHJpbmdWYWx1ZSk7XG4gICAgfVxuICAgIC8qKi9cbiAgfTtcblxuICBjb25zdCBoYW5kbGVBcnJheSA9IChhcnJheTogQXJyYXk8dW5rbm93bj4pID0+IHtcbiAgICBhcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzSXRlbUFycmF5ID0gaXNBcnJheShpdGVtKTtcbiAgICAgIGNvbnN0IGlzSXRlbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pO1xuXG4gICAgICBpZiAoaXNJdGVtQXJyYXkgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUFycmF5KGl0ZW0gYXMgQXJyYXk8dW5rbm93bj4pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNJdGVtT2JqZWN0ID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVPYmplY3QoaXRlbSBhcyBvYmplY3QpO1xuICAgICAgfVxuXG4gICAgICByZXN1bHRDbGFzc05hbWUgKz0gYCR7aXRlbX0gYDtcbiAgICB9KTtcbiAgfTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBjbGFzc05hbWVJdGVtID0gY2xhc3Nlc1tpXTtcblxuICAgIGNvbnN0IGlzSXRlbU9iamVjdCA9IGlzT2JqZWN0KGNsYXNzTmFtZUl0ZW0pO1xuXG4gICAgY29uc3QgaXNJdGVtQXJyYXkgPSBpc0FycmF5KGNsYXNzTmFtZUl0ZW0pO1xuXG4gICAgaWYgKGlzSXRlbU9iamVjdCA9PT0gdHJ1ZSkge1xuICAgICAgaGFuZGxlT2JqZWN0KGNsYXNzTmFtZUl0ZW0gYXMgb2JqZWN0KTtcblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGlzSXRlbUFycmF5ID09PSB0cnVlKSB7XG4gICAgICBoYW5kbGVBcnJheShjbGFzc05hbWVJdGVtIGFzIEFycmF5PHVua25vd24+KTtcblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaGFuZGxlUHJpbWl0aXZlKGNsYXNzTmFtZUl0ZW0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdENsYXNzTmFtZS50cmltKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzc05hbWVzO1xuIiwiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnLi9jbGFzc05hbWVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3NOYW1lcztcbiIsImltcG9ydCBnZXRSYW5kb21JbnRJblJhbmdlIGZyb20gJy4uL2dldFJhbmRvbUludEluUmFuZ2UnO1xuXG5jb25zdCBnZXRQcml6ZUFkZGl0aW9uYWxPZmZzZXQgPSAoaXRlbVNpemU6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IGNlbnRlciA9IGl0ZW1TaXplIC8gMjtcblxuICBjb25zdCByYW5kb21PZmZzZXQgPSBnZXRSYW5kb21JbnRJblJhbmdlKC1jZW50ZXIgKyAxLCBjZW50ZXIgLSAxKTtcblxuICByZXR1cm4gcmFuZG9tT2Zmc2V0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0UHJpemVBZGRpdGlvbmFsT2Zmc2V0O1xuIiwiaW1wb3J0IGdldFByaXplQWRkaXRpb25hbE9mZnNldCBmcm9tICcuL2dldFByaXplQWRkaXRpb25hbE9mZnNldCc7XG5cbmV4cG9ydCBkZWZhdWx0IGdldFByaXplQWRkaXRpb25hbE9mZnNldDtcbiIsIi8qKlxuICogVGhpcyBmdW5jdGlvbiBnZXRzIGFuIG9mZnNldCBmcm9tIGNvbnRhaW5lciBzdGFydCB0byBjb250YWluZXIgY2VudGVyXG4gKi9cbmNvbnN0IGdldFByaXplT2Zmc2V0ID0gKFxuICBpdGVtU2l6ZTogbnVtYmVyLFxuICBwcml6ZUluZGV4OiBudW1iZXIsXG4gIGNvbnRhaW5lckNlbnRlcjogbnVtYmVyLFxuKSA9PiBpdGVtU2l6ZSAqIHByaXplSW5kZXggLSAoY29udGFpbmVyQ2VudGVyIC0gaXRlbVNpemUgLyAyKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0UHJpemVPZmZzZXQ7XG4iLCJpbXBvcnQgZ2V0UHJpemVPZmZzZXQgZnJvbSAnLi9nZXRQcml6ZU9mZnNldCc7XG5cbmV4cG9ydCBkZWZhdWx0IGdldFByaXplT2Zmc2V0O1xuIiwiLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGdldHMgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIHR3byB2YWx1ZXMsIGluY2x1c2l2ZVxuICovXG5jb25zdCBnZXRSYW5kb21JbnRJblJhbmdlID0gKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IG1pbk51bWJlciA9IE1hdGguY2VpbChtaW4pO1xuICBjb25zdCBtYXhOdW1iZXIgPSBNYXRoLmZsb29yKG1heCk7XG5cbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXhOdW1iZXIgLSBtaW5OdW1iZXIgKyAxKSArIG1pbk51bWJlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRSYW5kb21JbnRJblJhbmdlO1xuIiwiaW1wb3J0IGdldFJhbmRvbUludEluUmFuZ2UgZnJvbSAnLi9nZXRSYW5kb21JbnRJblJhbmdlJztcblxuZXhwb3J0IGRlZmF1bHQgZ2V0UmFuZG9tSW50SW5SYW5nZTtcbiIsImltcG9ydCBnZXRQcml6ZU9mZnNldCBmcm9tICcuL2dldFByaXplT2Zmc2V0JztcbmltcG9ydCBnZXRSYW5kb21JbnRJblJhbmdlIGZyb20gJy4vZ2V0UmFuZG9tSW50SW5SYW5nZSc7XG5pbXBvcnQgZ2V0UHJpemVBZGRpdGlvbmFsT2Zmc2V0IGZyb20gJy4vZ2V0UHJpemVBZGRpdGlvbmFsT2Zmc2V0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJy4vY2xhc3NOYW1lcyc7XG5cbmV4cG9ydCB7XG4gIGdldFByaXplT2Zmc2V0LFxuICBnZXRSYW5kb21JbnRJblJhbmdlLFxuICBnZXRQcml6ZUFkZGl0aW9uYWxPZmZzZXQsXG4gIGNsYXNzTmFtZXMsXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCBSb3VsZXR0ZVBybyBmcm9tICcuL2NvbXBvbmVudHMvUm91bGV0dGUnO1xuaW1wb3J0IHR5cGUge1xuICBJRGVzaWduUGx1Z2luUHJvcHMsXG4gIElEZXNpZ25QbHVnaW4sXG4gIFByaXplVHlwZSxcbiAgUm91bGV0dGVUeXBlLFxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgUm91bGV0dGVQcm87XG5cbmV4cG9ydCB7IElEZXNpZ25QbHVnaW5Qcm9wcywgSURlc2lnblBsdWdpbiwgUHJpemVUeXBlLCBSb3VsZXR0ZVR5cGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==","import React, { useState, useRef } from 'react';\nimport {\n  Box,\n  Button,\n  Typography,\n  Slider,\n  Paper,\n  useTheme,\n  alpha,\n  CircularProgress,\n} from '@mui/material';\nimport { styled, keyframes } from '@mui/material/styles';\nimport CasinoIcon from '@mui/icons-material/Casino';\nimport Confetti from 'react-confetti';\nimport RoulettePro from 'react-roulette-pro';\nimport 'react-roulette-pro/dist/index.css';\n\nconst ICONS = {\n  balls: '/static/icons/balls.png',\n  noballs: '/static/icons/noballs.png',\n};\n\nconst bounce = keyframes`\n  0% { transform: scale(1); }\n  20% { transform: scale(1.18, 0.92); }\n  40% { transform: scale(0.95, 1.08); }\n  60% { transform: scale(1.08, 0.97); }\n  80% { transform: scale(0.98, 1.03); }\n  100% { transform: scale(1); }\n`;\n\nconst GameContainer = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(3),\n  maxWidth: 900,\n  margin: '0 auto',\n  background: `linear-gradient(135deg, ${alpha(theme.palette.primary.dark, 0.7)}, ${alpha(theme.palette.primary.main, 0.3)})`,\n  backdropFilter: 'blur(12px)',\n  borderRadius: 20,\n  boxShadow: '0 8px 32px rgba(0,0,0,0.18)',\n}));\n\nconst ReelWrapper = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  width: '100%',\n  height: 170,\n  overflow: 'hidden',\n  margin: '0 auto',\n  background: alpha(theme.palette.background.paper, 0.7),\n  borderRadius: 16,\n  border: `2.5px solid ${alpha(theme.palette.primary.main, 0.18)}`,\n  boxShadow: `0 4px 24px ${alpha(theme.palette.primary.main, 0.10)}`,\n}));\n\nconst Reel = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  height: '100%',\n  willChange: 'transform',\n}));\n\nconst Item = styled(Box, {\n  shouldForwardProp: (prop) => prop !== 'iscenter' && prop !== 'bounce',\n})(({ theme, iscenter, bounce }) => ({\n  width: 120,\n  minWidth: 120,\n  height: 140,\n  margin: '0 12px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  borderRadius: 14,\n  background: iscenter ? alpha(theme.palette.primary.main, 0.13) : 'transparent',\n  boxShadow: iscenter\n    ? `0 0 0 3px ${theme.palette.primary.main}, 0 0 16px 2px ${alpha(theme.palette.primary.main, 0.18)}, 0 0 32px 8px ${alpha(theme.palette.primary.main, 0.13)}`\n    : 'none',\n  transition: 'box-shadow 0.2s, background 0.2s',\n  position: 'relative',\n  zIndex: iscenter ? 2 : 1,\n  animation: bounce ? `${bounce} 0.7s cubic-bezier(.36,1.56,.64,1) 1` : 'none',\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '&::after': {\n    content: '\"\"',\n    position: 'absolute',\n    right: -12,\n    top: '10%',\n    height: '80%',\n    width: 1,\n    background: alpha(theme.palette.divider, 0.2),\n  }\n}));\n\nconst CenterLine = styled(Box)(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  left: '50%',\n  transform: `translateX(-50%)`,\n  width: ITEM_WIDTH,\n  height: '100%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  pointerEvents: 'none',\n  zIndex: 10,\n  '&::after': {\n    content: '\"\"',\n    display: 'block',\n    width: 6,\n    height: '100%',\n    margin: '0 auto',\n    background: `linear-gradient(180deg, ${theme.palette.primary.main} 60%, transparent 100%)`,\n    borderRadius: 3,\n    boxShadow: `0 0 18px 4px ${alpha(theme.palette.primary.main, 0.35)}`,\n  },\n}));\n\nconst BetAmount = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(2),\n  marginTop: theme.spacing(3),\n}));\n\nconst PrizeDisplay = styled(Box)(({ theme, win }) => ({\n  textAlign: 'center',\n  marginTop: theme.spacing(3),\n  padding: theme.spacing(2),\n  borderRadius: 10,\n  background: win ? alpha(theme.palette.success.main, 0.13) : alpha(theme.palette.error.main, 0.09),\n  color: win ? theme.palette.success.main : theme.palette.text.primary,\n  fontWeight: 700,\n  fontSize: '1.2rem',\n  boxShadow: win ? `0 0 16px 2px ${alpha(theme.palette.success.main, 0.18)}` : 'none',\n}));\n\nconst ITEM_WIDTH = 144;\nconst REEL_LENGTH = 35;\nconst VISIBLE_ITEMS = 7; //      \nconst CENTER_INDEX = Math.floor(VISIBLE_ITEMS / 2); //     \nconst LOOP_COUNT = 8;\nconst FIXED_START_ITEMS = 8;\nconst WIN_OFFSET_FROM_START = FIXED_START_ITEMS + CENTER_INDEX;\n\nfunction getLongReelData(betAmount) {\n  // 16 balls, 32 noballs, \n  const arr = [\n    ...Array(16).fill({ type: 'balls', text: `+${betAmount * 2}` }),\n    ...Array(32).fill({ type: 'noballs', text: ' ' }),\n  ];\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr.map(item => ({\n    image: ICONS[item.type],\n    text: item.text,\n    type: item.type,\n  }));\n}\n\nconst renderPrize = (prize, idx, { isActive }) => (\n  <Box\n    key={idx}\n    sx={{\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 90,\n      minWidth: 90,\n      height: 110,\n      background: 'transparent',\n      borderRadius: 2,\n      border: isActive ? '2.5px solid #a78bfa' : 'none',\n      boxShadow: isActive ? '0 0 16px 2px #a78bfa55' : 'none',\n      p: 0,\n      m: '0 6px',\n      transition: 'box-shadow 0.2s, border 0.2s',\n    }}\n  >\n    <Box\n      component=\"img\"\n      src={prize.image}\n      alt={prize.type}\n      sx={{ width: 54, height: 54, mb: 0.5, filter: prize.type === 'noballs' ? 'grayscale(0.7)' : 'none' }}\n    />\n    <Typography\n      sx={{\n        fontSize: '0.95rem',\n        fontWeight: 700,\n        color: prize.type === 'balls' ? '#4ade80' : '#a1a1aa',\n        textShadow: prize.type === 'balls' ? '0 0 8px #4ade8033' : 'none',\n        mt: 0.5,\n      }}\n      align=\"center\"\n    >\n      {prize.text}\n    </Typography>\n  </Box>\n);\n\nconst RouletteGame = () => {\n  const theme = useTheme();\n  const [betAmount, setBetAmount] = useState(100);\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [prize, setPrize] = useState(null);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [prizeIndex, setPrizeIndex] = useState(0);\n  const [reelData, setReelData] = useState(() => getLongReelData(100));\n\n  const handleSpin = () => {\n    if (isSpinning) return;\n    setIsSpinning(true);\n    setPrize(null);\n    setShowConfetti(false);\n    const newData = getLongReelData(betAmount);\n    setReelData(newData);\n    //    balls  noballs   40%/60%\n    const ballsIndexes = newData.map((item, idx) => item.type === 'balls' ? idx : null).filter(idx => idx !== null);\n    const noballsIndexes = newData.map((item, idx) => item.type === 'noballs' ? idx : null).filter(idx => idx !== null);\n    const winType = Math.random() < 0.4 ? 'balls' : 'noballs';\n    let idx;\n    if (winType === 'balls') {\n      idx = ballsIndexes[Math.floor(Math.random() * ballsIndexes.length)];\n    } else {\n      idx = noballsIndexes[Math.floor(Math.random() * noballsIndexes.length)];\n    }\n    setPrizeIndex(idx);\n  };\n\n  return (\n    <GameContainer>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom sx={{ fontWeight: 800, letterSpacing: 1 }}>\n        -\n      </Typography>\n      <Box sx={{ position: 'relative', width: '100%', maxWidth: 900, mx: 'auto', my: 4 }}>\n        <RoulettePro\n          prizes={reelData}\n          prizeIndex={prizeIndex}\n          renderPrize={renderPrize}\n          onPrizeDefined={() => {\n            const win = reelData[prizeIndex].type === 'balls';\n            setPrize({\n              type: win ? 'balls' : 'noballs',\n              amount: win ? betAmount * 2 : 0,\n            });\n            if (win) setShowConfetti(true);\n            setIsSpinning(false);\n          }}\n          spinning={isSpinning}\n          start={isSpinning}\n          options={{\n            stopOnPrize: true,\n            prizeSlot: 3, // \n            duration: 2600,\n            easing: 'cubic-bezier(0.22, 1, 0.36, 1)', //  ,  \n          }}\n          style={{ height: 130 }}\n        />\n      </Box>\n      <BetAmount>\n        <Typography>:</Typography>\n        <Slider\n          value={betAmount}\n          onChange={(e, v) => setBetAmount(v)}\n          min={100}\n          max={10000}\n          step={100}\n          valueLabelDisplay=\"auto\"\n          valueLabelFormat={v => `${v} `}\n          sx={{ flex: 1, mx: 2 }}\n          disabled={isSpinning}\n        />\n        <Typography sx={{ fontWeight: 700 }}>{betAmount} </Typography>\n      </BetAmount>\n      <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          onClick={handleSpin}\n          disabled={isSpinning}\n          startIcon={isSpinning ? <CircularProgress size={22} /> : <CasinoIcon />}\n          sx={{\n            minWidth: 220,\n            height: 56,\n            fontSize: '1.15rem',\n            borderRadius: 28,\n            fontWeight: 700,\n            background: `linear-gradient(45deg, ${theme.palette.primary.main} 30%, ${theme.palette.primary.dark} 90%)`,\n            boxShadow: '0 3px 12px 2px rgba(0,0,0,0.18)',\n            letterSpacing: 1,\n            '&:hover': {\n              transform: 'scale(1.05)',\n            },\n          }}\n        >\n          {isSpinning ? '...' : ''}\n        </Button>\n      </Box>\n      {prize && (\n        <PrizeDisplay win={prize.type === 'balls'}>\n          {prize.type === 'balls' ? (\n            <>\n              !   <b>{prize.amount} </b>\n            </>\n          ) : (\n            <> </>\n          )}\n        </PrizeDisplay>\n      )}\n      {showConfetti && (\n        <Confetti\n          width={window.innerWidth}\n          height={window.innerHeight}\n          recycle={false}\n          numberOfPieces={180}\n          gravity={0.3}\n        />\n      )}\n    </GameContainer>\n  );\n};\n\nexport default RouletteGame; ","import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Box, Typography, Button, CircularProgress, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\n\nconst JoinGroupChat = () => {\n  const { inviteCode } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [debugInfo, setDebugInfo] = useState(null);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const handleJoinGroup = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/messenger/chats/join/${inviteCode}`, {\n        method: 'POST',\n        credentials: 'include',\n      });\n      const data = await response.json();\n      if (data.success) {\n        setLoading(false);\n        setShowConfirmation(false);\n        // Show success message and button to return to messenger\n        setError(null);\n        navigate('/messenger');\n      } else {\n        throw new Error(data.error || '    ');\n      }\n    } catch (err) {\n      setDebugInfo(`Error details: ${JSON.stringify(err, null, 2)}`);\n      setError(err.message || '     ');\n      setLoading(false);\n      setShowConfirmation(false);\n    }\n  };\n\n  const handleReturnToMessenger = () => {\n    navigate('/messenger');\n  };\n\n  if (loading) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          minHeight: '100vh',\n          gap: 2\n        }}\n      >\n        <CircularProgress />\n        <Typography>  ...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          minHeight: '100vh',\n          gap: 2,\n          p: 2\n        }}\n      >\n        <Typography color=\"error\" align=\"center\" variant=\"h6\">\n          {error}\n        </Typography>\n        {debugInfo && (\n          <Box sx={{ \n            mt: 2, \n            p: 2, \n            bgcolor: 'grey.100', \n            borderRadius: 1,\n            maxWidth: '600px',\n            overflow: 'auto'\n          }}>\n            <Typography variant=\"body2\" component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\n              {debugInfo}\n            </Typography>\n          </Box>\n        )}\n        <Button variant=\"contained\" onClick={handleReturnToMessenger}>\n            \n        </Button>\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          minHeight: '100vh',\n          gap: 2,\n          p: 2\n        }}\n      >\n        <Typography variant=\"h5\" align=\"center\">\n             \n        </Typography>\n        <Button variant=\"contained\" onClick={() => setShowConfirmation(true)}>\n            \n        </Button>\n        <Button variant=\"outlined\" onClick={handleReturnToMessenger}>\n            \n        </Button>\n      </Box>\n\n      <Dialog \n        open={showConfirmation} \n        onClose={() => setShowConfirmation(false)}\n        PaperProps={{\n          sx: {\n            backgroundColor: 'background.paper',\n            borderRadius: 2,\n          }\n        }}\n      >\n        <DialogTitle></DialogTitle>\n        <DialogContent>\n          <Typography>\n                 ?\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowConfirmation(false)}>\n            \n          </Button>\n          <Button onClick={handleJoinGroup} variant=\"contained\" autoFocus>\n            \n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default JoinGroupChat; ","import React, { createContext, useState, useEffect, useRef, useCallback, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport axios from 'axios';\n\n\nconst PING_INTERVAL = 15000; \nconst PONG_TIMEOUT = 10000;  \nconst RECONNECT_BASE_DELAY = 1000; \nconst DEV_MODE = process.env.NODE_ENV !== 'production'; \n\n\nconst logger = {\n  debug: (...args) => {\n    if (DEV_MODE || window.MESSENGER_DEV_MODE) console.debug('[Messenger]', ...args);\n  },\n  log: (...args) => {\n    if (DEV_MODE || window.MESSENGER_DEV_MODE) console.log('[Messenger]', ...args);\n  },\n  info: (...args) => {\n    console.info('[Messenger]', ...args);\n  },\n  warn: (...args) => {\n    console.warn('[Messenger]', ...args);\n  },\n  error: (...args) => {\n    console.error('[Messenger]', ...args);\n  }\n};\n\nexport const MessengerContext = createContext();\n\n\nconst buildAvatarUrl = (userId, avatarFilename) => {\n  if (!avatarFilename || !userId) {\n    console.log(` URL : Missing required params - userId: ${userId}, filename: ${avatarFilename}`);\n    return null;\n  }\n  \n  \n  if (avatarFilename.startsWith('http')) {\n    console.log(`buildAvatarUrl: Already a full URL: ${avatarFilename}`);\n    return avatarFilename;\n  }\n  \n  \n  if (avatarFilename.startsWith('/static/')) {\n    console.log(`buildAvatarUrl: Already starts with /static/: ${avatarFilename}`);\n    return avatarFilename;\n  }\n  \n  \n  let filename = avatarFilename;\n  if (avatarFilename.includes('uploads/avatar/') || avatarFilename.includes('avatar/')) {\n    const parts = avatarFilename.split('/');\n    filename = parts[parts.length - 1];\n    console.log(`buildAvatarUrl: Extracted filename from path: ${filename}`);\n  }\n  \n  \n  const finalUrl = `/static/uploads/avatar/${userId}/${filename}`;\n  console.log(`buildAvatarUrl: Created URL for user ${userId}: ${finalUrl}`);\n  return finalUrl;\n};\n\n\nconst xorCipher = (text, key) => {\n  let result = '';\n  for (let i = 0; i < text.length; i++) {\n    const charCode = text.charCodeAt(i) ^ key.charCodeAt(i % key.length);\n    result += String.fromCharCode(charCode);\n  }\n  return result;\n};\n\n\nconst formatToLocalTime = (isoDateString) => {\n  if (!isoDateString) return '';\n  \n  try {\n    \n    if (typeof isoDateString === 'string' && /^\\d{1,2}:\\d{2}$/.test(isoDateString)) {\n      return isoDateString;\n    }\n    \n    \n    if (typeof isoDateString === 'string' && /^\\d{1,2}\\s+\\w+$/.test(isoDateString)) {\n      return isoDateString;\n    }\n    \n    \n    const date = new Date(isoDateString);\n    \n    \n    if (isNaN(date.getTime())) {\n      console.warn('  :', isoDateString);\n      return typeof isoDateString === 'string' ? isoDateString : '';\n    }\n    \n    \n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    \n    \n    return `${hours}:${minutes}`;\n  } catch (e) {\n    console.error('  :', e);\n    return typeof isoDateString === 'string' ? isoDateString : '';\n  }\n};\n\nexport const MessengerProvider = ({ children }) => {\n  \n  const authContext = useContext(AuthContext);\n  \n  \n  const isChannel = authContext?.user?.type === 'channel';\n  \n  \n  if (isChannel) {\n    console.warn('MessengerContext:     .  .');\n    \n    \n    return (\n      <MessengerContext.Provider value={{ \n        isChannel: true,\n        loading: false,\n        error: '    ',\n        chats: [],\n        messages: {},\n        user: null\n      }}>\n        {children}\n      </MessengerContext.Provider>\n    );\n  }\n  \n  \n  const getCookie = (name) => {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop().split(';').shift();\n    return null;\n  };\n  \n  \n  const sessionKeyCookie = getCookie('session_key') || getCookie('jwt') || getCookie('token');\n  const jwtToken = localStorage.getItem('token') || sessionKeyCookie;\n  \n  \n  const sessionKey = authContext?.sessionKey || authContext?.session_key || \n                   localStorage.getItem('session_key') || sessionKeyCookie || jwtToken;\n  \n  \n  const [deviceId] = useState(() => {\n    const existingDeviceId = localStorage.getItem('messenger_device_id');\n    if (existingDeviceId) return existingDeviceId;\n    \n    \n    const newDeviceId = Math.random().toString(36).substring(2, 15) + \n                       Math.random().toString(36).substring(2, 15);\n    localStorage.setItem('messenger_device_id', newDeviceId);\n    return newDeviceId;\n  });\n  \n  \n  useEffect(() => {\n    \n    if (jwtToken && !localStorage.getItem('session_key')) {\n      localStorage.setItem('session_key', jwtToken);\n      console.log(' :  JWT    session_key');\n    }\n    \n    if (sessionKeyCookie && !localStorage.getItem('session_key')) {\n      localStorage.setItem('session_key', sessionKeyCookie);\n      console.log(' :  session_key  cookie  localStorage');\n    }\n  }, [jwtToken, sessionKeyCookie]);\n  \n  \n  useEffect(() => {\n    const setupAuthHeaders = () => {\n      if (sessionKey) {\n        axios.defaults.headers.common['Authorization'] = `Bearer ${sessionKey}`;\n      } else if (jwtToken) {\n        axios.defaults.headers.common['Authorization'] = `Bearer ${jwtToken}`;\n      }\n    };\n    \n    setupAuthHeaders();\n    \n    return () => {\n      delete axios.defaults.headers.common['Authorization'];\n    };\n  }, [sessionKey, jwtToken]);\n  \n  const [user, setUser] = useState(null);\n  const [chats, setChats] = useState([]);\n  const [activeChat, setActiveChat] = useState(null);\n  const [messages, setMessages] = useState({});\n  const [onlineUsers, setOnlineUsers] = useState({});\n  const [typingUsers, setTypingUsers] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [unreadCounts, setUnreadCounts] = useState({});\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [hasMoreMessages, setHasMoreMessages] = useState({});\n  const [lastFetchedMessageId, setLastFetchedMessageId] = useState({});\n\n  \n  const socket = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n  const [isSocketConnected, setIsSocketConnected] = useState(false);\n  \n  \n  const pingTimeoutRef = useRef(null);\n  const pongTimeoutRef = useRef(null);\n  const lastPongTimeRef = useRef(Date.now());\n  const missedPongsRef = useRef(0);\n  \n  \n  const forceReconnect = useCallback(() => {\n    logger.info('  ');\n    \n    \n    if (socket.current) {\n      try {\n        \n        socket.current.onclose = null;\n        socket.current.onerror = null;\n        socket.current.onmessage = null;\n        \n        setIsSocketConnected(false);\n        socket.current.close();\n        socket.current = null;\n      } catch (err) {\n        logger.error('   :', err);\n      }\n    }\n    \n    \n    clearAllTimers();\n    \n    \n    reconnectAttempts.current = 0;\n    connectWebSocket();\n  }, [/* dependencies */]);\n  \n  \n  const clearAllTimers = useCallback(() => {\n    \n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    \n    \n    if (pingIntervalRef.current) {\n      clearInterval(pingIntervalRef.current);\n      pingIntervalRef.current = null;\n    }\n    \n    \n    if (pingTimeoutRef.current) {\n      clearTimeout(pingTimeoutRef.current);\n      pingTimeoutRef.current = null;\n    }\n    \n    if (pongTimeoutRef.current) {\n      clearTimeout(pongTimeoutRef.current);\n      pongTimeoutRef.current = null;\n    }\n    \n    \n    if (connectionCheckerRef.current) {\n      clearInterval(connectionCheckerRef.current);\n      connectionCheckerRef.current = null;\n    }\n  }, []);\n  \n  \n  const connectionCheckerRef = useRef(null);\n  const lastMessageTimeRef = useRef(Date.now());\n  \n  \n  const startConnectionChecker = useCallback(() => {\n    \n    if (connectionCheckerRef.current) {\n      clearInterval(connectionCheckerRef.current);\n    }\n    \n    \n    lastMessageTimeRef.current = Date.now();\n    \n    \n    connectionCheckerRef.current = setInterval(() => {\n      \n      if (isSocketConnected && Date.now() - lastMessageTimeRef.current > 45000) {\n        console.log('   (45   ),  ');\n        forceReconnect();\n      }\n    }, 15000); \n  }, [isSocketConnected, forceReconnect]);\n  \n  \n  useEffect(() => {\n    return () => {\n      if (connectionCheckerRef.current) {\n        clearInterval(connectionCheckerRef.current);\n      }\n    };\n  }, []);\n  \n  \n  const API_URL = 'https://k-connect.ru/apiMes';\n  \n  \n  const pingIntervalRef = useRef(null);\n  \n  \n  useEffect(() => {\n    console.log('MessengerContext: Using session key:', sessionKey);\n    console.log('MessengerContext: API URL:', API_URL);\n    console.log('MessengerContext: User is channel:', isChannel);\n  }, [sessionKey, isChannel]);\n  \n  \n  const [globalLoading, setGlobalLoading] = useState(false);\n  const [lastRequestTime, setLastRequestTime] = useState({});\n  const activeRequestsRef = useRef({});\n  const requestQueueRef = useRef({});\n  \n  \n  const safeRequest = useCallback(async (key, fn) => {\n    \n    if (activeRequestsRef.current[key]) {\n      console.log(` ${key}  ,  `);\n      return null;\n    }\n    \n    \n    const now = Date.now();\n    const lastRequest = lastRequestTime[key] || 0;\n    if (now - lastRequest < 1000) {\n      console.log(`    ${key}, `);\n      return null;\n    }\n    \n    try {\n      activeRequestsRef.current[key] = true;\n      setLastRequestTime(prev => ({...prev, [key]: now}));\n      \n      return await fn();\n    } finally {\n      \n      setTimeout(() => {\n        activeRequestsRef.current[key] = false;\n      }, 300);\n    }\n  }, [lastRequestTime]);\n  \n  \n  const handleWebSocketMessage = (data) => {\n    const { type } = data;\n    \n    \n    lastMessageTimeRef.current = Date.now();\n    \n    switch (type) {\n      case 'connected':\n        console.log('Connected as', data.user);\n        break;\n      \n      case 'pong':\n        \n        break;\n      \n      case 'error':\n        console.error('WebSocket error:', data.message);\n        setError(data.message);\n        \n        \n        if (data.message && (\n            data.message.includes('authentication') || \n            data.message.includes('session expired') ||\n            data.message.includes('unauthorized')\n        )) {\n          console.log('  ,   2 ');\n          setTimeout(() => forceReconnect(), 2000);\n        }\n        break;\n      \n      case 'new_message':\n        \n        const newMessageChatId = data.chatId || data.chat_id;\n        const newMessage = data.message;\n        \n        \n        if (newMessage?.sender) {\n          const senderId = newMessage.sender.id || newMessage.sender_id;\n          \n          \n          if (senderId && avatarCache[senderId]) {\n            newMessage.sender.avatar = avatarCache[senderId];\n            console.log(`WebSocket:      ${senderId}`);\n          }\n          \n          else if (senderId && newMessage.sender.photo) {\n            newMessage.sender.avatar = getAvatarUrl(senderId, newMessage.sender.photo);\n            console.log(`WebSocket:     ${senderId}`);\n          }\n        }\n        \n        \n        const isOwnMessageFromOtherDevice = newMessage?.sender_id === user?.id;\n        \n        if (isOwnMessageFromOtherDevice) {\n          console.log('     :', newMessage.id);\n        }\n        \n        \n        const chatExists = chats.some(c => c.id === parseInt(newMessageChatId));\n        \n        \n        if (!chatExists) {\n          console.log(`    ${newMessageChatId},    ,   ...`);\n          refreshChats();\n        }\n        \n        \n        handleNewMessage(newMessage, newMessageChatId);\n        break;\n      \n      case 'message_read':\n        \n        console.log('Received message_read event:', data);\n        const messageId = data.messageId || data.message_id;\n        const chatId = data.chatId || data.chat_id;\n        const userId = data.userId || data.user_id;\n        updateReadStatus(messageId, chatId, userId);\n        break;\n      \n      case 'typing_indicator':\n        \n        updateTypingStatus(data.chatId || data.chat_id, data.userId || data.user_id, true);\n        break;\n      \n      case 'typing_indicator_end':\n        \n        updateTypingStatus(data.chatId || data.chat_id, data.userId || data.user_id, false);\n        break;\n      \n      case 'user_status':\n        \n        updateUserStatus(data.user_id, data.status === 'online');\n        break;\n      \n      case 'chat_update':\n        \n        if (data.chat) {\n          console.log('   :', data.chat.id);\n          \n          \n          if (data.chat.members && Array.isArray(data.chat.members)) {\n            data.chat.members.forEach(member => {\n              const userId = member.user_id || member.id;\n              \n              \n              if (userId && avatarCache[userId]) {\n                member.avatar = avatarCache[userId];\n                console.log(`WebSocket chat_update:      ${userId}`);\n              }\n              \n              else if (userId) {\n                const photo = member.photo || member.avatar;\n                if (photo) {\n                  member.avatar = getAvatarUrl(userId, photo);\n                  console.log(`WebSocket chat_update:     ${userId}`);\n                }\n              }\n            });\n          }\n          \n          \n          if (!data.chat.is_group && data.chat.members) {\n            const otherMember = data.chat.members.find(m => {\n              const memberId = m.user_id || m.id;\n              const memberIdStr = memberId ? String(memberId) : null;\n              const currentUserIdStr = user?.id ? String(user.id) : null;\n              return memberIdStr && currentUserIdStr && memberIdStr !== currentUserIdStr;\n            });\n            \n            if (otherMember) {\n              const otherUserId = otherMember.user_id || otherMember.id;\n              \n              \n              if (otherUserId && avatarCache[otherUserId]) {\n                data.chat.avatar = avatarCache[otherUserId];\n                console.log(`WebSocket chat_update:      ${data.chat.id}`);\n              }\n              \n              else if (otherUserId) {\n                const photo = otherMember.photo || otherMember.avatar;\n                if (photo) {\n                  data.chat.avatar = getAvatarUrl(otherUserId, photo);\n                  console.log(`WebSocket chat_update:     ${data.chat.id}`);\n                }\n              }\n            }\n          }\n          \n          \n          setChats(prev => {\n            const chatIndex = prev.findIndex(c => c.id === data.chat.id);\n            if (chatIndex === -1) return prev;\n            \n            \n            const currentChat = prev[chatIndex];\n            \n            \n            const newChat = {...data.chat};\n            if (currentChat.avatar && \n                typeof currentChat.avatar === 'string' && \n                currentChat.avatar.startsWith('/static/')) {\n              newChat.avatar = currentChat.avatar;\n            }\n            \n            \n            const newChats = [...prev];\n            newChats[chatIndex] = newChat;\n            return newChats;\n          });\n        }\n        break;\n      \n      default:\n        console.log('Unknown message type:', type, data);\n    }\n  };\n  \n  \n  const updateUserStatus = (userId, isOnline) => {\n    if (!userId) return;\n    \n    setOnlineUsers(prev => ({\n      ...prev,\n      [userId]: isOnline ? new Date().toISOString() : null\n    }));\n  };\n  \n  \n  const updateTypingStatus = (chatId, userId, isTyping) => {\n    if (!chatId || !userId) return;\n    \n    \n    const now = new Date().toISOString();\n    \n    \n    setTypingUsers(prev => {\n      const chatTyping = prev[chatId] || {};\n      \n      if (isTyping) {\n        return {\n          ...prev,\n          [chatId]: {\n            ...chatTyping,\n            [userId]: now\n          }\n        };\n      } else {\n        \n        return {\n          ...prev,\n          [chatId]: {\n            ...chatTyping,\n            [userId]: 'end-' + now \n          }\n        };\n      }\n    });\n    \n    \n    if (!isTyping) {\n      setTimeout(() => {\n        setTypingUsers(current => {\n          const chatTyping = current[chatId] || {};\n          const userTypingStatus = chatTyping[userId];\n          \n          \n          if (userTypingStatus && typeof userTypingStatus === 'string' && userTypingStatus.startsWith('end-')) {\n            const newChatTyping = { ...chatTyping };\n            delete newChatTyping[userId];\n            \n            \n            if (Object.keys(newChatTyping).length === 0) {\n              const newTypingUsers = { ...current };\n              delete newTypingUsers[chatId];\n              return newTypingUsers;\n            }\n            \n            return {\n              ...current,\n              [chatId]: newChatTyping\n            };\n          }\n          \n          return current;\n        });\n      }, 5000);\n    }\n  };\n  \n  \n  const fetchCurrentUser = useCallback(async () => {\n    if (!sessionKey || isChannel) return;\n    \n    try {\n      console.log('    ...');\n      const response = await fetch(`${API_URL}/messenger/user`, {\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        }\n      });\n      \n      const data = await response.json();\n      \n      if (data.success && data.user) {\n        console.log('   :', data.user);\n        setUser(data.user);\n        \n        \n        \n        setTimeout(() => {\n          loadChats();\n        }, 100);\n        \n      } else {\n        console.error('    :', data.error);\n        setError('    ');\n      }\n    } catch (err) {\n      console.error('    :', err);\n      setError('    ');\n    }\n  }, [sessionKey, isChannel, API_URL]);\n  \n  \n  useEffect(() => {\n    if (sessionKey && !isChannel) {\n      console.log('MessengerContext: Initializing with session key');\n      fetchCurrentUser();\n      \n    } else if (isChannel) {\n      console.warn('MessengerContext: Channels cannot use messenger');\n    } else {\n      console.warn('MessengerContext: No session key available');\n    }\n    \n    return () => {\n      if (socket.current) {\n        socket.current.close();\n      }\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      if (pingIntervalRef.current) {\n        clearInterval(pingIntervalRef.current);\n      }\n    };\n  }, [sessionKey, fetchCurrentUser, isChannel]);\n  \n  \n  const connectWebSocket = useCallback(() => {\n    if (isChannel || !sessionKey) return;\n    \n    \n    if (activeRequestsRef.current['websocket']) {\n      console.log('WebSocket    , ');\n      return;\n    }\n    \n    \n    activeRequestsRef.current['websocket'] = true;\n    \n    \n    const checkWebSocketAvailability = async () => {\n      try {\n        console.log('     ');\n        \n        const promises = [\n          fetch(`${API_URL}/ping?t=${Date.now()}`, {\n            method: 'GET',\n            headers: {\n              'Cache-Control': 'no-cache, no-store'\n            },\n            timeout: 5000\n          }).catch(() => null),\n          \n          \n          fetch(`${window.location.origin}/manifest.json?t=${Date.now()}`, {\n            method: 'GET',\n            headers: {\n              'Cache-Control': 'no-cache, no-store'\n            },\n            timeout: 5000\n          }).catch(() => null)\n        ];\n        \n        const results = await Promise.all(promises);\n        \n        \n        return results.some(response => response && response.ok);\n      } catch (err) {\n        console.log('    :', err);\n        return false;\n      }\n    };\n    \n    const setupWebSocket = async () => {\n      try {\n        \n        const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n        \n        if (isMobile) {\n          console.log('  ,   ');\n          const isNetworkAvailable = await checkWebSocketAvailability();\n          if (!isNetworkAvailable) {\n            console.log('    ,   ');\n            \n            setTimeout(() => {\n              activeRequestsRef.current['websocket'] = false;\n              \n              reconnectWebSocket();\n            }, 5000);\n            return;\n          }\n        }\n        \n        \n        let connectionEstablished = false;\n        \n        \n        if (socket.current) {\n          try {\n            console.log('  ');\n            socket.current.onclose = null; \n            socket.current.onerror = null; \n            socket.current.onmessage = null; \n            socket.current.close();\n            socket.current = null;\n          } catch (err) {\n            console.error('    :', err);\n            \n          } finally {\n            \n            setIsSocketConnected(false);\n          }\n        }\n        \n        \n        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n        const wsUrl = `${protocol}//${window.location.host}/ws/messenger`;\n        \n        console.log('  :', wsUrl);\n        \n        \n        const webSocket = new WebSocket(wsUrl);\n        socket.current = webSocket;\n        \n        \n        const connectionTimeout = setTimeout(() => {\n          if (!connectionEstablished) {\n            console.log('    ');\n            \n            \n            try {\n              webSocket.onclose = null; \n              webSocket.onerror = null;\n              webSocket.onmessage = null;\n              webSocket.close();\n            } catch (e) {\n              \n            }\n            \n            \n            if (socket.current === webSocket) {\n              socket.current = null;\n              setIsSocketConnected(false);\n            }\n            \n            \n            activeRequestsRef.current['websocket'] = false;\n            \n            \n            if (reconnectAttempts.current < 2) {\n              console.log('  URL  ( IP)');\n              \n              \n              setTimeout(() => {\n                connectWebSocket();\n              }, 500);\n            } else {\n              \n              reconnectWebSocket();\n            }\n          }\n        }, isMobile ? 15000 : 10000); \n        \n        webSocket.onopen = () => {\n          console.log(' ');\n          connectionEstablished = true;\n          clearTimeout(connectionTimeout);\n          setIsSocketConnected(true);\n          \n          \n          webSocket.send(JSON.stringify({\n            token: sessionKey,\n            device_id: deviceId\n          }));\n          \n          \n          if (pingIntervalRef.current) {\n            clearInterval(pingIntervalRef.current);\n          }\n          \n          \n          \n          const pingInterval = isMobile ? 10000 : 30000;\n          \n          pingIntervalRef.current = setInterval(() => {\n            if (webSocket.readyState === WebSocket.OPEN) {\n              console.log('    ');\n              try {\n                webSocket.send(JSON.stringify({ type: 'ping', device_id: deviceId }));\n              } catch (err) {\n                console.error('   :', err);\n                forceReconnect(); \n              }\n            } else {\n              \n              console.log('   , ...');\n              forceReconnect(); \n            }\n          }, pingInterval);\n          \n          \n          reconnectAttempts.current = 0;\n          \n          \n          startConnectionChecker();\n          \n          \n          setTimeout(() => {\n            activeRequestsRef.current['websocket'] = false;\n          }, 1000);\n        };\n        \n        webSocket.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log(':  :', data.type);\n            handleWebSocketMessage(data);\n            \n            \n            lastMessageTimeRef.current = Date.now();\n          } catch (err) {\n            console.error('    :', err);\n          }\n        };\n        \n        webSocket.onclose = (event) => {\n          console.log(`   : ${event.code}, : ${event.reason}`);\n          setIsSocketConnected(false);\n          clearTimeout(connectionTimeout);\n          \n          \n          if (event.code === 1006) {\n            \n            console.warn('   ( 1006),    ');\n            \n            setTimeout(() => reconnectWebSocket(), 1000);\n          } else if (event.code === 1008 || event.code === 1011) {\n            \n            console.warn(`   ( ${event.code}),   `);\n            \n            setTimeout(() => reconnectWebSocket(), 3000);\n          } else {\n            \n            reconnectWebSocket();\n          }\n          \n          \n          if (pingIntervalRef.current) {\n            clearInterval(pingIntervalRef.current);\n            pingIntervalRef.current = null;\n          }\n        };\n        \n        webSocket.onerror = (error) => {\n          console.error(' :', error);\n          \n          setErrorReportRef.current('websocket', `WebSocket error: ${error.message || 'Unknown error'}`);\n          setIsSocketConnected(false);\n          clearTimeout(connectionTimeout);\n          \n          \n          if (socket.current === webSocket) {\n            console.log('   ,  ');\n            \n            \n            try {\n              webSocket.close();\n            } catch (e) {\n              \n            }\n            \n            \n            socket.current = null;\n            \n            \n            setTimeout(() => {\n              reconnectWebSocket();\n            }, 2000);\n          }\n        };\n      } catch (err) {\n        console.error('   :', err);\n        setError('    ');\n        \n        \n        setErrorReportRef.current('websocket_setup', err.message || err.toString());\n        \n        \n        setTimeout(() => {\n          activeRequestsRef.current['websocket'] = false;\n        }, 5000);\n        \n        \n        reconnectWebSocket();\n      }\n    };\n    \n    \n    setupWebSocket();\n  }, [sessionKey, isChannel, API_URL, deviceId, forceReconnect, startConnectionChecker]);\n  \n  \n  const errorReportRef = useRef({});\n  \n  \n  const setErrorReportRef = {\n    current: (key, message) => {\n      errorReportRef.current[key] = {\n        message,\n        timestamp: new Date().toISOString(),\n        device: navigator.userAgent\n      };\n    }\n  };\n  \n  \n  const connectionCheckTimerRef = useRef(null);\n  \n  \n  const reconnectAttempts = useRef(0);\n  \n  const reconnectWebSocket = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n    }\n    \n    \n    activeRequestsRef.current['websocket'] = false;\n    \n    \n    const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n    \n    \n    const maxDelay = isMobile ? 15000 : 30000;\n    const baseDelay = isMobile ? 800 : 1000;\n    \n    \n    \n    const randomFactor = 0.5 + Math.random(); \n    const delay = Math.min(baseDelay * Math.pow(1.5, reconnectAttempts.current) * randomFactor, maxDelay);\n    \n    reconnectAttempts.current += 1;\n    \n    console.log(`   ${Math.round(delay)} ( #${reconnectAttempts.current})`);\n    \n    reconnectTimeoutRef.current = setTimeout(() => {\n      console.log(`  #${reconnectAttempts.current}`);\n      \n      \n      if (reconnectAttempts.current > 5) {\n        forceReconnect();\n      } else {\n        connectWebSocket();\n      }\n    }, delay);\n  }, [connectWebSocket, forceReconnect]);\n  \n  \n  useEffect(() => {\n    const checkConnectionInterval = setInterval(() => {\n      if (sessionKey && !isChannel && !isSocketConnected && !activeRequestsRef.current['websocket']) {\n        console.log(' :   , ...');\n        connectWebSocket();\n      }\n    }, 60000);\n    \n    return () => {\n      clearInterval(checkConnectionInterval);\n    };\n  }, [sessionKey, isChannel, isSocketConnected, connectWebSocket]);\n  \n  \n  \n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        console.log('  ,   ');\n        \n        \n        if (socket.current && \n            (socket.current.readyState === WebSocket.CLOSED || \n             socket.current.readyState === WebSocket.CLOSING)) {\n          console.log('   ,    ');\n          \n          \n          setTimeout(() => {\n            connectWebSocket();\n          }, 1000);\n        } else if (!socket.current) {\n          \n          connectWebSocket();\n        } else {\n          \n          \n          setTimeout(() => {\n            if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n              console.log('    ');\n              socket.current.send(JSON.stringify({ type: 'ping' }));\n            }\n          }, 1000);\n        }\n      }\n    };\n\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    \n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [connectWebSocket]);\n  \n  \n  useEffect(() => {\n    const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n    \n    if (isMobile) {\n      \n      let failedConnectionsCount = 0;\n      \n      \n      const connectionStateHandler = () => {\n        \n        if (!isSocketConnected) {\n          failedConnectionsCount++;\n          console.log(`      : ${failedConnectionsCount}`);\n          \n          \n          \n          if (failedConnectionsCount >= 3) {\n            console.log('        .     ');\n            \n            \n            reconnectAttempts.current = 0;\n            \n            \n            reconnectWebSocket();\n          }\n        } else {\n          \n          failedConnectionsCount = 0;\n        }\n      };\n      \n      \n      const checkInterval = setInterval(connectionStateHandler, 15000);\n      \n      return () => {\n        clearInterval(checkInterval);\n      };\n    }\n  }, [isSocketConnected, reconnectWebSocket]);\n  \n  \n  const handleNewMessage = (message, chatId) => {\n    if (!message || !chatId) return;\n    \n    console.log(`Handling new message in chat ${chatId}: message ID ${message.id}`);\n    \n    \n    if (message.created_at) {\n      message.created_at = formatToLocalTime(message.created_at);\n    }\n    \n    \n    if (message.sender) {\n      const senderId = message.sender.id || message.sender_id;\n      \n      \n      if (senderId && !message.sender.avatar && avatarCache[senderId]) {\n        message.sender.avatar = avatarCache[senderId];\n        console.log(`     ${senderId}`);\n      }\n      \n      else if (senderId && !message.sender.avatar && message.sender.photo) {\n        message.sender.avatar = getAvatarUrl(senderId, message.sender.photo);\n        console.log(`    ${senderId}`);\n      }\n    }\n    \n    \n    if (message.message_type && message.message_type !== 'text') {\n      const messageType = message.message_type;\n      const content = message.content;\n      \n      \n      if (content) {\n        if (messageType === 'photo' && !message.photo_url) {\n          message.photo_url = getFileUrl(chatId, content);\n          console.debug(` URL  : ${message.photo_url}`);\n        } else if (messageType === 'video' && !message.video_url) {\n          message.video_url = getFileUrl(chatId, content);\n          console.debug(` URL  : ${message.video_url}`);\n        } else if (messageType === 'audio' && !message.audio_url) {\n          message.audio_url = getFileUrl(chatId, content);\n          console.debug(` URL  : ${message.audio_url}`);\n        } else if (messageType === 'file' && !message.file_url) {\n          message.file_url = getFileUrl(chatId, content);\n          console.debug(` URL  : ${message.file_url}`);\n        }\n      } else {\n        console.warn(`  ${message.id}  ${messageType}  `);\n      }\n    }\n    \n    \n    const isFromCurrentUser = message.sender_id === user?.id;\n    \n    \n    const numChatId = typeof chatId === 'string' ? parseInt(chatId) : chatId;\n    \n    \n    setMessages(prev => {\n      const chatMessages = prev[numChatId] || [];\n      \n      \n      if (chatMessages.some(m => m.id === message.id)) {\n        return prev;\n      }\n      \n      return {\n        ...prev,\n        [numChatId]: [...chatMessages, message].sort((a, b) => a.id - b.id)\n      };\n    });\n    \n    \n    setChats(prev => {\n      \n      const chatIndex = prev.findIndex(c => c.id === numChatId);\n      \n      \n      if (chatIndex === -1) {\n        console.log(`Chat ${numChatId} not found in chat list, refreshing chats...`);\n        setTimeout(() => refreshChats(), 100);\n        return prev;\n      }\n      \n      \n      const chat = { ...prev[chatIndex], last_message: message };\n      \n      \n      if (!chat.is_group && chat.members) {\n        \n        const otherMember = chat.members.find(m => {\n          const memberId = m.user_id || m.id;\n          \n          const memberIdStr = memberId ? String(memberId) : null;\n          const currentUserIdStr = user?.id ? String(user.id) : null;\n          return memberIdStr && currentUserIdStr && memberIdStr !== currentUserIdStr;\n        });\n        \n        if (otherMember) {\n          const otherUserId = otherMember.user_id || otherMember.id;\n          \n          \n          if (!chat.avatar || \n              (chat.avatar && typeof chat.avatar === 'string' && !chat.avatar.startsWith('/static/'))) {\n            \n            \n            if (otherUserId && avatarCache[otherUserId]) {\n              chat.avatar = avatarCache[otherUserId];\n              console.log(`     ${numChatId}`);\n            }\n            \n            else {\n              const photo = otherMember.photo || otherMember.avatar;\n              if (otherUserId && photo) {\n                chat.avatar = getAvatarUrl(otherUserId, photo);\n                console.log(`   ${numChatId}   : ${chat.avatar}`);\n              }\n            }\n          }\n        }\n      }\n      \n      \n      const newChats = [...prev];\n      newChats.splice(chatIndex, 1);\n      \n      \n      console.log(`Moving chat ${numChatId} to top of chat list`);\n      return [chat, ...newChats];\n    });\n    \n    \n    if (activeChat?.id !== numChatId) {\n      \n      if (!isFromCurrentUser) {\n        setUnreadCounts(prev => ({\n          ...prev,\n          [numChatId]: (prev[numChatId] || 0) + 1\n        }));\n      }\n    } else if (user && !isFromCurrentUser) {\n      \n      markMessageAsRead(message.id);\n    }\n  };\n  \n  \n  const markMessageAsRead = async (messageId) => {\n    if (!sessionKey || !messageId || isChannel) return;\n    \n    try {\n      \n      await fetch(`${API_URL}/messenger/read/${messageId}`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        }\n      });\n      \n      \n      if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n        \n        const chatId = Object.keys(messages).find(chatId => \n          messages[chatId].some(message => message.id === messageId)\n        );\n        \n        if (chatId) {\n          console.log(`     ${messageId}   ${chatId}`);\n          \n          \n          \n          socket.current.send(JSON.stringify({\n            type: 'read_receipt',\n            messageId: messageId,\n            chatId: parseInt(chatId),\n            device_id: deviceId\n          }));\n          \n          \n          updateReadStatus(messageId, parseInt(chatId), user?.id);\n        }\n      }\n    } catch (err) {\n      console.error('     :', err);\n    }\n  };\n  \n  \n  const markAllMessagesAsRead = (chatId) => {\n    if (!user || !chatId || isChannel) return;\n    \n    const chatMessages = messages[chatId] || [];\n    \n    const unreadMessages = chatMessages.filter(msg => \n      msg.sender_id !== user.id && \n      (!msg.read_by || !msg.read_by.includes(user.id))\n    );\n    \n    \n    unreadMessages.forEach(msg => {\n      markMessageAsRead(msg.id);\n    });\n    \n    \n    if (unreadMessages.length > 0) {\n      setUnreadCounts(prev => ({\n        ...prev,\n        [chatId]: 0\n      }));\n    }\n  };\n  \n  \n  const updateReadStatus = (messageId, chatId, userId) => {\n    if (!messageId || !chatId || !userId) return;\n    \n    console.log(`     ${messageId}   ${chatId}  ${userId}`);\n    \n    setMessages(prev => {\n      const chatMessages = prev[chatId] || [];\n      \n      const updatedMessages = chatMessages.map(msg => {\n        if (msg.id === messageId) {\n          \n          const currentReadBy = msg.read_by || [];\n          \n          if (!currentReadBy.includes(userId)) {\n            return {\n              ...msg,\n              read_by: [...currentReadBy, userId],\n              read_count: (msg.read_count || 0) + 1\n            };\n          }\n        }\n        return msg;\n      });\n      \n      \n      \n      if (activeChat?.id === chatId && userId === user?.id) {\n        setUnreadCounts(prev => ({\n          ...prev,\n          [chatId]: 0\n        }));\n      }\n      \n      return {\n        ...prev,\n        [chatId]: updatedMessages\n      };\n    });\n  };\n  \n  \n  const [avatarCache, setAvatarCache] = useState({});\n  \n  \n  const getAvatarUrl = useCallback((userId, photoPath) => {\n    if (!userId || !photoPath) return null;\n    \n    \n    if (avatarCache[userId]) {\n      return avatarCache[userId];\n    }\n    \n    \n    const avatarUrl = buildAvatarUrl(userId, photoPath);\n    \n    \n    setAvatarCache(prev => ({\n      ...prev,\n      [userId]: avatarUrl\n    }));\n    \n    return avatarUrl;\n  }, [avatarCache]);\n  \n  \n  const loadChats = useCallback(async () => {\n    if (!sessionKey || isChannel) return;\n    if (globalLoading) return;\n    \n    \n    return safeRequest('load_chats', async () => {\n      setLoading(true);\n      setError(null);\n      setGlobalLoading(true);\n      \n      try {\n        console.log('  :', `${API_URL}/messenger/chats`);\n        const response = await fetch(`${API_URL}/messenger/chats`, {\n          headers: {\n            'Authorization': `Bearer ${sessionKey}`,\n            'Accept': 'application/json',\n            'Cache-Control': 'no-cache'\n          }\n        });\n        \n        \n        const contentType = response.headers.get('content-type');\n        if (!contentType || !contentType.includes('application/json')) {\n          const textResponse = await response.text();\n          console.error('     JSON:', textResponse.substring(0, 100) + '...');\n          throw new Error('API      JSON');\n        }\n        \n        const data = await response.json();\n        \n        if (data.success) {\n          \n          const filteredChats = data.chats.filter(chat => {\n            \n            if (chat.members) {\n              const hasChannels = chat.members.some(member => member.type === 'channel');\n              return !hasChannels;\n            }\n            return true;\n          });\n          \n          \n          filteredChats.forEach(chat => {\n            \n            if (chat.last_message && chat.last_message.created_at) {\n              chat.last_message.created_at = formatToLocalTime(chat.last_message.created_at);\n            }\n            \n            \n            if (chat.members && Array.isArray(chat.members)) {\n              chat.members.forEach(member => {\n                if (member.last_active) {\n                  member.last_active = formatToLocalTime(member.last_active);\n                }\n                \n                const userId = member.user_id || member.id;\n                \n                if (userId && avatarCache[userId]) {\n                  member.avatar = avatarCache[userId];\n                }\n                \n                else if (userId) {\n                  const photo = member.photo || member.avatar;\n                  if (photo) {\n                    \n                    member.avatar = getAvatarUrl(userId, photo);\n                  }\n                }\n              });\n            }\n            \n            \n            if (!chat.is_group && chat.members) {\n              \n              const otherMember = chat.members.find(m => {\n                const memberId = m.user_id || m.id;\n                \n                const memberIdStr = memberId ? String(memberId) : null;\n                const currentUserIdStr = user?.id ? String(user.id) : null;\n                \n                return memberIdStr && currentUserIdStr && memberIdStr !== currentUserIdStr;\n              });\n              \n              if (otherMember) {\n                \n                const otherUserId = otherMember.user_id || otherMember.id;\n                \n                \n                if (otherUserId && avatarCache[otherUserId]) {\n                  chat.avatar = avatarCache[otherUserId];\n                }\n                \n                else if (otherUserId) {\n                  const photo = otherMember.photo || otherMember.avatar;\n                  if (photo) {\n                    \n                    chat.avatar = getAvatarUrl(otherUserId, photo);\n                  }\n                }\n                \n                \n                if (!chat.title) {\n                  chat.title = otherMember.name || otherMember.username || ` #${otherUserId}`;\n                }\n              }\n            }\n          });\n          \n          setChats(filteredChats);\n          \n          \n          const newHasMoreMessages = {};\n          const newLastFetchedMessageId = {};\n          \n          filteredChats.forEach(chat => {\n            newHasMoreMessages[chat.id] = true;\n            newLastFetchedMessageId[chat.id] = null;\n          });\n          \n          setHasMoreMessages(newHasMoreMessages);\n          setLastFetchedMessageId(newLastFetchedMessageId);\n          \n          \n          connectWebSocket();\n        } else {\n          setError(data.error || '  ');\n        }\n      } catch (err) {\n        console.error('  :', err);\n        setError('  ');\n      } finally {\n        setLoading(false);\n        setGlobalLoading(false);\n      }\n    });\n  }, [sessionKey, isChannel, API_URL, connectWebSocket, safeRequest, globalLoading, user, avatarCache, getAvatarUrl]);\n  \n  \n  const getChatDetails = async (chatId) => {\n    if (!sessionKey || !chatId || isChannel) return null;\n    \n    try {\n      const response = await fetch(`${API_URL}/messenger/chats/${chatId}`, {\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        }\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('     JSON:', textResponse.substring(0, 100) + '...');\n        throw new Error('API      JSON');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        if (data.chat.members) {\n          const hasChannels = data.chat.members.some(member => member.type === 'channel');\n          if (hasChannels) {\n            console.warn('  -,   ');\n            return null;\n          }\n          \n          \n          if (data.chat.last_message && data.chat.last_message.created_at) {\n            data.chat.last_message.created_at = formatToLocalTime(data.chat.last_message.created_at);\n          }\n          \n          \n          data.chat.members.forEach(member => {\n            \n            if (member.last_active) {\n              member.last_active = formatToLocalTime(member.last_active);\n            }\n            \n            const userId = member.user_id || member.id;\n            \n            if (userId) {\n              const photo = member.photo || member.avatar;\n              if (photo) {\n                console.log(`  ${chatId}:     ${userId}, : ${photo}`);\n                member.avatar = buildAvatarUrl(userId, photo);\n              }\n            }\n          });\n          \n          \n          if (!data.chat.is_group) {\n            console.log(`  ${chatId},  ID: ${user?.id}, :`, \n              data.chat.members.map(m => ({ id: m.user_id || m.id, name: m.name })));\n            \n            \n            const otherMember = data.chat.members.find(m => {\n              const memberId = m.user_id || m.id;\n              \n              const memberIdStr = memberId ? String(memberId) : null;\n              const currentUserIdStr = user?.id ? String(user.id) : null;\n              \n              return memberIdStr && currentUserIdStr && memberIdStr !== currentUserIdStr;\n            });\n            \n            console.log(`  ${chatId} - :`, otherMember ? \n              { id: otherMember.user_id || otherMember.id, name: otherMember.name } : ' ');\n            \n            if (otherMember) {\n              \n              const otherUserId = otherMember.user_id || otherMember.id;\n              \n              const photo = otherMember.photo || otherMember.avatar;\n              \n              if (otherUserId && photo) {\n                console.log(`  ${chatId}:      ${otherUserId}, : ${photo}`);\n                data.chat.avatar = buildAvatarUrl(otherUserId, photo);\n                \n                \n                if (!data.chat.title) {\n                  data.chat.title = otherMember.name || otherMember.username || ` #${otherUserId}`;\n                }\n              } else {\n                console.warn(`  ${chatId}:    ,  ${otherUserId}`);\n              }\n            } else {\n              console.warn(`  ${chatId}:   `);\n            }\n          }\n        }\n        \n        return data.chat;\n      } else {\n        console.error('   :', data.error);\n        return null;\n      }\n    } catch (err) {\n      console.error('   :', err);\n      return null;\n    }\n  };\n  \n  \n  const loadMessages = useCallback(async (chatId, limit = 30, isRetry = false) => {\n    if (!sessionKey || !chatId || isChannel) return;\n    \n    \n    const chat = chats.find(c => c.id === chatId);\n    const isGroupChat = chat?.is_group;\n    \n    console.log(`MessengerContext.loadMessages:     ${chatId}, isGroup=${isGroupChat}, isRetry=${isRetry}`);\n    \n    \n    if (loadingMessages || (hasMoreMessages[chatId] === false && messages[chatId]?.length > 0)) {\n      console.log(`MessengerContext.loadMessages:   -      `);\n      return;\n    }\n    \n    \n    const requestKey = isRetry ? `load_messages_retry_${chatId}` : `load_messages_${chatId}`;\n    \n    return safeRequest(requestKey, async () => {\n      setLoadingMessages(true);\n      \n      try {\n        const beforeId = lastFetchedMessageId[chatId];\n        const url = `${API_URL}/messenger/chats/${chatId}/messages${beforeId ? `?before_id=${beforeId}&limit=${limit}` : `?limit=${limit}`}`;\n        \n        console.log(`MessengerContext.loadMessages: Fetching messages from ${url}`);\n        \n        const response = await fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${sessionKey}`,\n            'Accept': 'application/json',\n            'Cache-Control': 'no-cache, no-store'\n          }\n        });\n        \n        \n        const contentType = response.headers.get('content-type');\n        if (!contentType || !contentType.includes('application/json')) {\n          const textResponse = await response.text();\n          console.error('     JSON:', textResponse.substring(0, 100) + '...');\n          throw new Error('API      JSON');\n        }\n        \n        const data = await response.json();\n        \n        if (data.success) {\n          const newMessages = data.messages || [];\n          console.log(`MessengerContext.loadMessages:  ${newMessages.length}    ${chatId}`);\n          \n          \n          newMessages.forEach(msg => {\n            if (msg.created_at) {\n              msg.created_at = formatToLocalTime(msg.created_at);\n            }\n          });\n          \n          \n          const hasModeratorMessages = data.has_moderator_messages === true;\n          \n          setMessages(prev => {\n            const existingMessages = prev[chatId] || [];\n            \n            \n            const mergedMessages = [...existingMessages];\n            \n            newMessages.forEach(newMsg => {\n              if (!mergedMessages.some(msg => msg.id === newMsg.id)) {\n                mergedMessages.push(newMsg);\n              }\n            });\n            \n            \n            mergedMessages.sort((a, b) => a.id - b.id);\n            \n            \n            mergedMessages.hasModeratorMessages = hasModeratorMessages;\n            \n            return {\n              ...prev,\n              [chatId]: mergedMessages\n            };\n          });\n          \n          \n          if (newMessages.length < limit) {\n            setHasMoreMessages({\n              ...hasMoreMessages,\n              [chatId]: false\n            });\n          } else {\n            \n            const oldestMsgId = Math.min(...newMessages.map(m => m.id));\n            setLastFetchedMessageId({\n              ...lastFetchedMessageId,\n              [chatId]: oldestMsgId\n            });\n          }\n          \n          \n          if (user) {\n            newMessages.forEach(msg => {\n              if (msg.sender_id !== user.id) {\n                markMessageAsRead(msg.id);\n              }\n            });\n          }\n          \n          \n          if (isGroupChat && newMessages.length === 0 && chat?.last_message && !isRetry) {\n            console.log(`MessengerContext.loadMessages: Scheduling retry for group chat ${chatId} with empty messages`);\n            setTimeout(() => {\n              loadMessages(chatId, limit, true);\n            }, 1000);\n          }\n        } else {\n          console.error('  :', data.error);\n        }\n      } catch (err) {\n        console.error('  :', err);\n        \n        \n        if (isGroupChat && !isRetry) {\n          console.log(`MessengerContext.loadMessages: Scheduling retry after error for group chat ${chatId}`);\n          setTimeout(() => {\n            loadMessages(chatId, limit, true);\n          }, 1500);\n        }\n      } finally {\n        setLoadingMessages(false);\n      }\n    });\n  }, [sessionKey, isChannel, API_URL, lastFetchedMessageId, loadingMessages, hasMoreMessages, messages, safeRequest, chats, user]);\n  \n  \n  const createPersonalChat = async (userId, encrypted = false) => {\n    if (!sessionKey || !userId || isChannel) return null;\n    \n    try {\n      \n      const userInfo = await getUserInfo(userId);\n      if (userInfo?.type === 'channel') {\n        setError('    ');\n        return null;\n      }\n      \n      const response = await fetch(`${API_URL}/messenger/chats/personal`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({ user_id: userId, encrypted })\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        await loadChats();\n        return data.chat_id;\n      } else {\n        setError(data.error || '  ');\n        return null;\n      }\n    } catch (err) {\n      console.error('   :', err);\n      setError('  ');\n      return null;\n    }\n  };\n  \n  \n  const createGroupChat = async (title, memberIds, encrypted = false) => {\n    if (!sessionKey || !memberIds || !memberIds.length || isChannel) return null;\n    \n    try {\n      \n      const memberPromises = memberIds.map(id => getUserInfo(id));\n      const memberInfos = await Promise.all(memberPromises);\n      \n      if (memberInfos.some(m => m?.type === 'channel')) {\n        setError('     ');\n        return null;\n      }\n      \n      const response = await fetch(`${API_URL}/messenger/chats/group`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({ \n          title, \n          member_ids: memberIds,\n          encrypted \n        })\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        await loadChats();\n        return data.chat_id;\n      } else {\n        setError(data.error || '  ');\n        return null;\n      }\n    } catch (err) {\n      console.error('Error creating group chat:', err);\n      setError('  ');\n      return null;\n    }\n  };\n  \n  \n  const sendTextMessage = async (chatId, text, replyToId = null) => {\n    if (!sessionKey || !chatId || !text.trim() || !user || isChannel) return null;\n    \n    try {\n      const chat = chats.find(c => c.id === chatId);\n      let messageText = text;\n      \n      \n      if (chat?.encrypted) {\n        const encryptionKey = chat.encryption_key || String(chatId);\n        messageText = xorCipher(text, encryptionKey);\n      }\n      \n      \n      const headers = {\n        'Authorization': `Bearer ${sessionKey}`,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-Device-ID': deviceId\n      };\n      \n      const response = await fetch(`${API_URL}/messenger/chats/${chatId}/messages`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ \n          text: messageText,\n          reply_to_id: replyToId,\n          device_id: deviceId  \n        })\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        const newMessage = data.message;\n        \n        \n        if (newMessage.created_at) {\n          newMessage.created_at = formatToLocalTime(newMessage.created_at);\n        }\n        \n        \n        setMessages(prev => {\n          const chatMessages = prev[chatId] || [];\n          return {\n            ...prev,\n            [chatId]: [...chatMessages, newMessage].sort((a, b) => a.id - b.id)\n          };\n        });\n        \n        \n        setChats(prev => {\n          const chatIndex = prev.findIndex(c => c.id === chatId);\n          if (chatIndex === -1) return prev;\n          \n          const updatedChat = { ...prev[chatIndex], last_message: newMessage };\n          const newChats = [...prev];\n          newChats.splice(chatIndex, 1);\n          \n          return [updatedChat, ...newChats];\n        });\n        \n        return newMessage;\n      } else {\n        setError(data.error || '  ');\n        return null;\n      }\n    } catch (err) {\n      console.error('Error sending message:', err);\n      setError('  ');\n      return null;\n    }\n  };\n  \n  \n  const uploadFile = async (chatId, file, type, replyToId = null) => {\n    if (!sessionKey || !chatId || !file || !user || isChannel) return null;\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('message_type', type);\n      \n      if (replyToId) {\n        formData.append('reply_to_id', replyToId);\n      }\n      \n      const response = await fetch(`${API_URL}/messenger/chats/${chatId}/upload`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        },\n        body: formData\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        const newMessage = data.message;\n        \n        \n        if (newMessage.created_at) {\n          newMessage.created_at = formatToLocalTime(newMessage.created_at);\n        }\n        \n        setMessages(prev => {\n          const chatMessages = prev[chatId] || [];\n          return {\n            ...prev,\n            [chatId]: [...chatMessages, newMessage].sort((a, b) => a.id - b.id)\n          };\n        });\n        \n        \n        setChats(prev => {\n          return prev.map(chat => {\n            if (chat.id === chatId) {\n              return { ...chat, last_message: newMessage };\n            }\n            return chat;\n          });\n        });\n        \n        return newMessage;\n      } else {\n        setError(data.error || '  ');\n        return null;\n      }\n    } catch (err) {\n      console.error('Error uploading file:', err);\n      setError('  ');\n      return null;\n    }\n  };\n  \n  \n  const sendTypingIndicator = (chatId, isTyping) => {\n    if (!socket.current || !chatId || !isSocketConnected || isChannel) return;\n    \n    try {\n      socket.current.send(JSON.stringify({\n        type: isTyping ? 'typing_start' : 'typing_end',\n        chatId\n      }));\n    } catch (err) {\n      console.error('Error sending typing indicator:', err);\n    }\n  };\n  \n  \n  const searchUsers = async (query, limit = 20) => {\n    if (!sessionKey || !query || isChannel) return [];\n    \n    try {\n      const response = await fetch(`${API_URL}/messenger/users/search?query=${encodeURIComponent(query)}&limit=${limit}`, {\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        }\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        const filteredUsers = (data.users || []).filter(user => user.type !== 'channel');\n        return filteredUsers;\n      } else {\n        console.error('Error searching users:', data.error);\n        return [];\n      }\n    } catch (err) {\n      console.error('Error searching users:', err);\n      return [];\n    }\n  };\n  \n  \n  const getUserInfo = async (userId) => {\n    if (!sessionKey || !userId || isChannel) return null;\n    \n    try {\n      const response = await fetch(`${API_URL}/messenger/users/${userId}`, {\n        headers: {\n          'Authorization': `Bearer ${sessionKey}`,\n          'Accept': 'application/json'\n        }\n      });\n      \n      \n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const textResponse = await response.text();\n        console.error('Received non-JSON response:', textResponse.substring(0, 100) + '...');\n        throw new Error('API returned non-JSON response');\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        \n        if (data.user) {\n          \n          console.log('User fields:', Object.keys(data.user));\n          \n          \n          const photo = data.user.photo || data.user.avatar;\n          if (photo) {\n            data.user.avatar = buildAvatarUrl(data.user.id, photo);\n          }\n        }\n        return data.user;\n      } else {\n        console.error('Error getting user info:', data.error);\n        return null;\n      }\n    } catch (err) {\n      console.error('Error getting user info:', err);\n      return null;\n    }\n  };\n  \n  \n  const decryptMessage = (message, chatId) => {\n    if (!message) return message;\n    \n    const chat = chats.find(c => c.id === chatId);\n    \n    if (chat?.encrypted && message.content) {\n      const encryptionKey = chat.encryption_key || String(chatId);\n      try {\n        return xorCipher(message.content, encryptionKey);\n      } catch (err) {\n        console.error('Error decrypting message:', err);\n        return ' [ ]';\n      }\n    }\n    \n    return message.content;\n  };\n  \n  \n  const getFileUrl = (chatId, filePath) => {\n    if (!sessionKey || !filePath) return '';\n    \n    \n    const authParam = `token=${encodeURIComponent(sessionKey)}`;\n    \n    \n    let url = `${API_URL}/messenger/files/${chatId}/`;\n    \n    \n    if (filePath.includes(`attachments/chat_${chatId}/`)) {\n      \n      const pathParts = filePath.split(`attachments/chat_${chatId}/`);\n      url += pathParts[1];\n    } else {\n      \n      url += filePath;\n    }\n    \n    \n    url += `?${authParam}`;\n    \n    console.log(`Generated file URL: ${url}`);\n    return url;\n  };\n  \n  \n  const setActiveAndLoadChat = useCallback((chatId) => {\n    if (isChannel) return;\n    \n    const chat = chats.find(c => c.id === chatId);\n    \n    if (chat) {\n      \n      if (activeChat?.id === chatId) return;\n      \n      console.log(`MessengerContext.setActiveAndLoadChat: Activating chat ${chatId}, isGroup=${chat.is_group}`);\n      setActiveChat(chat);\n      \n      \n      setUnreadCounts(prev => ({\n        ...prev,\n        [chatId]: 0\n      }));\n      \n      \n      if (!messages[chatId] || messages[chatId].length === 0) {\n        console.log(`MessengerContext.setActiveAndLoadChat: No messages loaded for chat ${chatId}, loading...`);\n        setTimeout(() => {\n          loadMessages(chatId);\n          \n          \n          if (chat.is_group) {\n            setTimeout(() => {\n              if (!messages[chatId] || messages[chatId].length === 0) {\n                console.log(`MessengerContext.setActiveAndLoadChat: Retry loading messages for group chat ${chatId}`);\n                loadMessages(chatId, 30, true);\n              }\n            }, 1500);\n          }\n        }, 100);\n      } else {\n        console.log(`MessengerContext.setActiveAndLoadChat: Already have ${messages[chatId].length} messages for chat ${chatId}`);\n      }\n      \n      \n      if (user && messages[chatId] && messages[chatId].length > 0) {\n        messages[chatId].forEach(msg => {\n          if (msg.sender_id !== user.id && (!msg.read_by || !msg.read_by.includes(user.id))) {\n            markMessageAsRead(msg.id);\n          }\n        });\n      }\n    }\n  }, [isChannel, chats, messages, user, loadMessages, activeChat]);\n  \n  \n  const updateLastMessage = (chatId, message) => {\n    if (isChannel) return;\n    \n    setChats(prev => {\n      return prev.map(chat => {\n        if (chat.id === chatId) {\n          return { ...chat, last_message: message };\n        }\n        return chat;\n      }).sort((a, b) => {\n        const aTime = a.last_message?.created_at ? new Date(a.last_message.created_at).getTime() : 0;\n        const bTime = b.last_message?.created_at ? new Date(b.last_message.created_at).getTime() : 0;\n        return bTime - aTime;\n      });\n    });\n  };\n  \n  \n  const refreshChats = () => {\n    if (isChannel) return;\n    \n    \n    if (!user) {\n      console.log('refreshChats:    ,   user');\n      fetchCurrentUser();\n      return;\n    }\n    \n    console.log('refreshChats:   ...');\n    loadChats();\n  };\n  \n  \n  const getTotalUnreadCount = () => {\n    if (isChannel) return 0;\n    return Object.values(unreadCounts).reduce((total, count) => total + count, 0);\n  };\n  \n  \n  const [useFallbackMode, setUseFallbackMode] = useState(false);\n  const fallbackPollingRef = useRef(null);\n  \n  \n  useEffect(() => {\n    \n    if (useFallbackMode) return;\n    \n    \n    if (reconnectAttempts.current > 5) {\n      console.log('Too many WebSocket connection failures, switching to fallback mode (REST polling)');\n      setUseFallbackMode(true);\n    }\n    \n    \n    const checkWebSocketAvailability = async () => {\n      try {\n        const pingResponse = await fetch(`${API_URL}/ping?t=${Date.now()}`, {\n          method: 'GET',\n          headers: { 'Cache-Control': 'no-cache, no-store' }\n        }).catch(() => null);\n        \n        if (pingResponse && pingResponse.ok) {\n          console.log('Network seems stable, attempting to switch back to WebSocket mode');\n          setUseFallbackMode(false);\n          reconnectAttempts.current = 0;\n          connectWebSocket();\n        }\n      } catch (err) {\n        \n      }\n    };\n    \n    \n    if (useFallbackMode) {\n      console.log('Setting up fallback polling mechanism');\n      \n      \n      if (fallbackPollingRef.current) {\n        clearInterval(fallbackPollingRef.current);\n      }\n      \n      \n      fallbackPollingRef.current = setInterval(async () => {\n        if (document.visibilityState !== 'visible') return;\n        \n        \n        if (activeChat) {\n          try {\n            console.log(`Fallback mode: polling for new messages in chat ${activeChat.id}`);\n            await loadMessages(activeChat.id, 10);\n          } catch (err) {\n            console.error('Error polling messages in fallback mode:', err);\n          }\n        }\n        \n        \n        try {\n          console.log('Fallback mode: refreshing chat list');\n          await loadChats();\n        } catch (err) {\n          console.error('Error refreshing chats in fallback mode:', err);\n        }\n        \n        \n        if (Math.random() < 0.3) { \n          checkWebSocketAvailability();\n        }\n      }, 5000); \n      \n      return () => {\n        if (fallbackPollingRef.current) {\n          clearInterval(fallbackPollingRef.current);\n        }\n      };\n    }\n  }, [useFallbackMode, activeChat, API_URL, loadChats, loadMessages, connectWebSocket]);\n  \n  \n  useEffect(() => {\n    \n    const handleNetworkChange = () => {\n      if (navigator.onLine) {\n        \n        console.log('  ,   ');\n        if (!isSocketConnected || !socket.current || \n            socket.current.readyState !== WebSocket.OPEN) {\n          console.log('     , ');\n          setTimeout(() => {\n            forceReconnect();\n          }, 1000);\n        }\n      } else {\n        \n        console.log(' ,  ');\n        setIsSocketConnected(false);\n      }\n    };\n\n    \n    window.addEventListener('online', handleNetworkChange);\n    window.addEventListener('offline', handleNetworkChange);\n\n    \n    return () => {\n      window.removeEventListener('online', handleNetworkChange);\n      window.removeEventListener('offline', handleNetworkChange);\n    };\n  }, [isSocketConnected, forceReconnect]);\n\n  \n  useEffect(() => {\n    const originalFetch = window.fetch;\n    \n    window.fetch = async (...args) => {\n      try {\n        const response = await originalFetch(...args);\n        \n        \n        const url = typeof args[0] === 'string' ? args[0] : args[0].url;\n        \n        \n        if (url.includes('/apiMes/') && response.status === 401) {\n          console.warn('   API (401),   ');\n          \n          \n          setTimeout(() => {\n            if (sessionKey) {\n              forceReconnect();\n            }\n          }, 2000);\n        }\n        \n        return response;\n      } catch (error) {\n        \n        if (args[0].includes && args[0].includes('/apiMes/')) {\n          console.warn('     API ');\n          \n          \n          if (isSocketConnected && socket.current && socket.current.readyState === WebSocket.OPEN) {\n            console.log('API :  ,   ');\n            \n            try {\n              socket.current.send(JSON.stringify({ type: 'ping', device_id: deviceId }));\n            } catch (err) {\n              console.error('   ,  ');\n              forceReconnect();\n            }\n          }\n        }\n        \n        throw error;\n      }\n    };\n    \n    return () => {\n      window.fetch = originalFetch;\n    };\n  }, [sessionKey, isSocketConnected, deviceId, forceReconnect]);\n  \n  \n  useEffect(() => {\n    if (user && chats.length > 0) {\n      console.log('MessengerContext:  ,     ');\n      \n      \n      const updatedChats = [...chats];\n      \n      \n      updatedChats.forEach(chat => {\n        \n        if (!chat.is_group && chat.members) {\n          \n          const otherMember = chat.members.find(m => {\n            const memberId = m.user_id || m.id;\n            const memberIdStr = memberId ? String(memberId) : null;\n            const currentUserIdStr = user?.id ? String(user.id) : null;\n            \n            return memberIdStr && currentUserIdStr && memberIdStr !== currentUserIdStr;\n          });\n          \n          if (otherMember) {\n            const otherUserId = otherMember.user_id || otherMember.id;\n            const photo = otherMember.photo || otherMember.avatar;\n            \n            if (otherUserId && photo) {\n              \n              chat.avatar = buildAvatarUrl(otherUserId, photo);\n              console.log(`    ${chat.id},  ${otherUserId}, : ${chat.avatar}`);\n            }\n          }\n        }\n      });\n      \n      \n      setChats(updatedChats);\n    }\n  }, [user, chats.length]);\n  \n  \n  const value = {\n    user,\n    chats,\n    activeChat,\n    messages,\n    onlineUsers,\n    typingUsers,\n    loading,\n    loadingMessages,\n    error,\n    unreadCounts,\n    hasMoreMessages,\n    isSocketConnected,\n    isChannel,\n    deviceId,\n    useFallbackMode,\n    avatarCache, \n    getAvatarUrl, \n    setActiveChat: (chatId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return setActiveAndLoadChat(chatId);\n    },\n    loadMessages: (chatId, limit) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return loadMessages(chatId, limit);\n    },\n    loadMoreMessages: (chatId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return loadMessages(chatId);\n    },\n    sendTextMessage: (chatId, text, replyToId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return sendTextMessage(chatId, text, replyToId);\n    },\n    uploadFile: (chatId, file, type, replyToId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return uploadFile(chatId, file, type, replyToId);\n    },\n    markMessageAsRead: (messageId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return markMessageAsRead(messageId);\n    },\n    markAllMessagesAsRead: (chatId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return markAllMessagesAsRead(chatId);\n    },\n    sendTypingIndicator: (chatId, isTyping) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return sendTypingIndicator(chatId, isTyping);\n    },\n    searchUsers: (query, limit) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve([]);\n      }\n      return searchUsers(query, limit);\n    },\n    getUserInfo: (userId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return getUserInfo(userId);\n    },\n    createPersonalChat: (userId, encrypted) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return createPersonalChat(userId, encrypted);\n    },\n    createGroupChat: (title, memberIds, encrypted) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return createGroupChat(title, memberIds, encrypted);\n    },\n    getChatDetails: (chatId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return Promise.resolve(null);\n      }\n      return getChatDetails(chatId);\n    },\n    decryptMessage,\n    getFileUrl,\n    refreshChats: () => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return refreshChats();\n    },\n    getTotalUnreadCount: () => {\n      \n      if (isChannel) return 0;\n      return getTotalUnreadCount();\n    },\n    updateLastMessage: (chatId, message) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return updateLastMessage(chatId, message);\n    },\n    sessionKey,\n    forceReconnectSocket: () => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return;\n      }\n      return forceReconnect();\n    },\n    \n    deleteMessage: async (messageId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return { success: false, error: '   ' };\n      }\n\n      try {\n        const response = await axios.delete(`/api/messenger/messages/${messageId}`, {\n          headers: { \n            'X-Device-ID': deviceId,\n            'X-Session-Key': sessionKey\n          }\n        });\n        \n        if (response.data && response.data.success) {\n          \n          let messageChatId = null;\n          let deletedMessage = null;\n          \n          \n          Object.entries(messages).forEach(([chatId, chatMessages]) => {\n            const foundMessage = chatMessages.find(msg => msg.id === messageId);\n            if (foundMessage) {\n              messageChatId = parseInt(chatId);\n              deletedMessage = foundMessage;\n            }\n          });\n          \n          if (messageChatId) {\n            \n            setMessages(prevMessages => {\n              const updatedChatMessages = (prevMessages[messageChatId] || [])\n                .filter(msg => msg.id !== messageId);\n                \n              return {\n                ...prevMessages,\n                [messageChatId]: updatedChatMessages\n              };\n            });\n            \n            \n            const chat = chats.find(c => c.id === messageChatId);\n            if (chat && chat.last_message && chat.last_message.id === messageId) {\n              \n              const chatMessages = messages[messageChatId] || [];\n              const newLastMessage = chatMessages\n                .filter(msg => msg.id !== messageId)\n                .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))[0];\n              \n              if (newLastMessage) {\n                updateLastMessage(messageChatId, newLastMessage);\n              }\n            }\n          }\n          \n          return { success: true };\n        } else {\n          console.error('  :', response.data?.error || ' ');\n          return { success: false, error: response.data?.error || '   ' };\n        }\n      } catch (error) {\n        console.error('  :', error);\n        return { \n          success: false, \n          error: error.response?.data?.error || '    ' \n        };\n      }\n    },\n    \n    \n    deleteChat: async (chatId) => {\n      \n      if (isChannel) {\n        console.warn('MessengerContext:     .  .');\n        return { success: false, error: '   ' };\n      }\n\n      try {\n        const response = await axios.delete(`/api/messenger/chats/${chatId}`, {\n          headers: { \n            'X-Device-ID': deviceId,\n            'X-Session-Key': sessionKey\n          }\n        });\n        \n        if (response.data && response.data.success) {\n          \n          setChats(prevChats => prevChats.filter(chat => chat.id !== chatId));\n          \n          \n          if (activeChat && activeChat.id === chatId) {\n            setActiveChat(null);\n            setMessages([]);\n          }\n          \n          return { success: true };\n        } else {\n          console.error('  :', response.data?.error || ' ');\n          return { success: false, error: response.data?.error || '   ' };\n        }\n      } catch (error) {\n        console.error('  :', error);\n        return { \n          success: false, \n          error: error.response?.data?.error || '    '\n        };\n      }\n    },\n    \n    \n    enableLogging: (enable = true) => {\n      if (typeof window !== 'undefined') {\n        window.MESSENGER_DEV_MODE = enable;\n        console.log(`Messenger logging ${enable ? 'enabled' : 'disabled'}`);\n      }\n    }\n  };\n  \n  return (\n    <MessengerContext.Provider value={value}>\n      {children}\n    </MessengerContext.Provider>\n  );\n};\n\nexport const useMessenger = () => {\n  const context = React.useContext(MessengerContext);\n  if (!context) {\n    throw new Error('useMessenger must be used within a MessengerProvider');\n  }\n  return context;\n}; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1\"\n}), 'Cookie');","import React, { useState, useEffect, useRef } from 'react';\nimport { Box, Paper, Typography, Button, Slide, useMediaQuery, Link } from '@mui/material';\nimport CookieIcon from '@mui/icons-material/Cookie';\nimport { useNavigate } from 'react-router-dom';\n\nconst COOKIE_KEY = 'kconnect_cookie_agreed';\n\nconst CookieBanner = React.memo(() => {\n  const [open, setOpen] = useState(false);\n  const agreedRef = useRef(false);\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!localStorage.getItem(COOKIE_KEY)) {\n      setOpen(true);\n    }\n  }, []);\n\n  const handleAgree = () => {\n    localStorage.setItem(COOKIE_KEY, 'true');\n    agreedRef.current = true;\n    setOpen(false);\n  };\n\n  const handleCookiesClick = (e) => {\n    e.preventDefault();\n    navigate('/cookies');\n  };\n\n  return (\n    <Slide direction=\"up\" in={open} mountOnEnter unmountOnExit>\n      <Box\n        sx={{\n          position: 'fixed',\n          bottom: 24,\n          left: 0,\n          width: '100%',\n          zIndex: 2000,\n          display: 'flex',\n          justifyContent: 'center',\n        }}\n      >\n        <Paper\n          elevation={8}\n          sx={{\n            px: 2,\n            py: 1,\n            borderRadius: 3,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2,\n            maxWidth: 780,\n            minHeight: 0,\n            bgcolor: 'rgba(0,0,0,0.8)',\n            boxShadow: '0 8px 32px rgba(157, 111, 250, 0.07)',\n            width: '100%',\n            backdropFilter: 'blur(10px)',\n            WebkitBackdropFilter: 'blur(10px)',\n          }}\n        >\n          <CookieIcon color=\"warning\" sx={{ fontSize: 28, minWidth: 28 }} />\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: isMobile ? 'column' : 'row',\n              alignItems: isMobile ? 'flex-start' : 'center',\n              justifyContent: 'space-between',\n              width: '100%',\n              gap: isMobile ? 0.5 : 2,\n            }}\n          >\n            <Typography variant=\"body2\" sx={{ fontWeight: 500, lineHeight: 1.3, color: '#fff' }}>\n                <Link href=\"/cookies\" onClick={handleCookiesClick} sx={{ color: '#D0BCFF', textDecoration: 'underline' }}></Link>  <span style={{ color: '#b39ddb' }}><i>     !</i></span>\n              {!isMobile && (\n                <><br/><span style={{ color: '#b39ddb' }}>  -  ,      !</span></>\n              )}\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleAgree}\n              sx={{ borderRadius: 2, fontWeight: 600, ml: isMobile ? 0 : 2, mt: isMobile ? 1 : 0, whiteSpace: 'nowrap', minHeight: 32, minWidth: 0, px: 2, py: 0.5 }}\n            >\n               \n            </Button>\n          </Box>\n        </Paper>\n      </Box>\n    </Slide>\n  );\n});\n\nexport default CookieBanner; ","import React from 'react';\nimport { \n  Container, \n  Typography, \n  Box, \n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  useTheme\n} from '@mui/material';\nimport { \n  Security as SecurityIcon,\n  Storage as StorageIcon,\n  Settings as SettingsIcon,\n  Info as InfoIcon,\n  Cookie as CookieIcon\n} from '@mui/icons-material';\nimport { styled } from '@mui/material/styles';\n\nconst PageContainer = styled(Container)(({ theme }) => ({\n  paddingTop: theme.spacing(1),\n  paddingBottom: theme.spacing(4),\n  marginTop: '20px'\n}));\n\nconst SectionTitle = styled(Typography)(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  color: theme.palette.primary.main,\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(1)\n}));\n\nconst CookiePage = () => {\n  const theme = useTheme();\n\n  return (\n    <PageContainer maxWidth=\"md\">\n      <Paper elevation={3} sx={{ p: 4, borderRadius: 2 }}>\n        <Box sx={{ mb: 1 }}>\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <CookieIcon color=\"primary\" />\n             Cookie  K-Connect\n          </Typography>\n          <Typography variant=\"body1\" paragraph>\n            K-Connect  cookie-   ,       .     ,      cookie   .\n          </Typography>\n        </Box>\n\n        <Box sx={{ mb: 4 }}>\n          <SectionTitle variant=\"h5\">\n            <SecurityIcon />\n              \n          </SectionTitle>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <SecurityIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" cookie\"\n                secondary=\"           .  cookie  HTTP-only      JavaScript.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <SecurityIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\"   HTTP-only cookie    .       .\"\n              />\n            </ListItem>\n          </List>\n        </Box>\n\n        <Divider sx={{ my: 4 }} />\n\n        <Box sx={{ mb: 4 }}>\n          <SectionTitle variant=\"h5\">\n            <SettingsIcon />\n             \n          </SectionTitle>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <SettingsIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\"Cookie        (//).\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <SettingsIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\"  ,      .\"\n              />\n            </ListItem>\n          </List>\n        </Box>\n\n        <Divider sx={{ my: 4 }} />\n\n        <Box sx={{ mb: 4 }}>\n          <SectionTitle variant=\"h5\">\n            <StorageIcon />\n             \n          </SectionTitle>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <StorageIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\"    localStorage      .\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <StorageIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\"   cookie, localStorage  sessionStorage   .\"\n              />\n            </ListItem>\n          </List>\n        </Box>\n\n        <Divider sx={{ my: 4 }} />\n\n        <Box sx={{ mb: 4 }}>\n          <SectionTitle variant=\"h5\">\n            <InfoIcon />\n             \n          </SectionTitle>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <InfoIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\"\"\n                secondary=\" cookie,   ,   HttpOnly  SameSite   XSS-.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <InfoIcon color=\"primary\" />\n              </ListItemIcon>\n              <ListItemText \n                primary=\" \"\n                secondary=\" cookie            .     365 .\"\n              />\n            </ListItem>\n          </List>\n        </Box>\n      </Paper>\n    </PageContainer>\n  );\n};\n\nexport default CookiePage; ","import React, { useState, useEffect, useMemo, useContext, lazy, Suspense, useTransition, useRef, useCallback } from 'react';\nimport { Routes, Route, Navigate, useLocation, useNavigate } from 'react-router-dom';\nimport { ThemeProvider, createTheme, useTheme } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport ProfileService from './services/ProfileService'; \nimport { AuthProvider, AuthContext } from './context/AuthContext';\nimport AppBottomNavigation from './components/BottomNavigation';\nimport { MusicProvider } from './context/MusicContext';\nimport { Box, CircularProgress, Typography, Button, Alert } from '@mui/material';\nimport { HelmetProvider } from 'react-helmet-async';\nimport SEO from './components/SEO';\nimport { PostDetailProvider } from './context/PostDetailContext';\nimport RegisterChannel from './pages/Auth/RegisterChannel';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport ChannelsPage from './pages/Main/ChannelsPage';\nimport MusicPlayerCore from './components/MusicPlayerCore';\nimport { setSessionContext } from './services/ProfileService';\nimport RouletteGame from './pages/MiniGames/RouletteGame';\nimport JoinGroupChat from './pages/Messenger/JoinGroupChat';\nimport { MessengerProvider } from './contexts/MessengerContext';\nimport CookieBanner from './components/CookieBanner';\nimport CookiePage from './pages/Info/CookiesPage';\n\nexport const SessionContext = React.createContext({\n  sessionActive: true,\n  sessionExpired: false,\n  lastFetchTime: null,\n  broadcastUpdate: () => {},\n  checkSessionStatus: () => true,\n  refreshSession: () => {}\n});\n\nconst RequireAuth = ({ children }) => {\n  const { isAuthenticated, loading } = useContext(AuthContext);\n  const location = useLocation();\n  \n  \n  if (loading) {\n    return null;\n  }\n  \n  \n  if (isAuthenticated) {\n    return children;\n  }\n  \n  \n  return (\n    <Navigate \n      to=\"/login\" \n      state={{ from: location.pathname }} \n      replace \n    />\n  );\n};\n\n\nconst Login = lazy(() => import('./pages/Auth/Login'));\nconst Register = lazy(() => import('./pages/Auth/Register'));\nconst ForgotPassword = lazy(() => import('./pages/Auth/ForgotPassword'));\nconst ResetPassword = lazy(() => import('./pages/Auth/ResetPassword'));\nconst RegisterProfile = lazy(() => import('./pages/Auth/RegisterProfile'));\nconst EmailConfirmation = lazy(() => import('./pages/Auth/EmailConfirmation'));\nconst ElementAuth = lazy(() => import('./pages/Auth/ElementAuth'));\nconst MainLayout = lazy(() => import('./components/Layout/MainLayout'));\nconst ProfilePage = lazy(() => import('./pages/User/ProfilePage'));\nconst MainPage = lazy(() => import('./pages/Main/MainPage'));\nconst PostDetailPage = lazy(() => import('./pages/Main/PostDetailPage'));\nconst SettingsPage = lazy(() => import('./pages/User/SettingsPage'));\nconst NotificationsPage = lazy(() => import('./pages/Info/NotificationsPage'));\nconst SearchPage = lazy(() => import('./pages/Main/SearchPage'));\nconst MusicPage = lazy(() => import('./pages/Main/MusicPage'));\nconst ArtistPage = lazy(() => import('./pages/Main/ArtistPage'));\nconst MessengerPage = lazy(() => import('./pages/Messenger/MessengerPage'));\nconst SubscriptionsPage = lazy(() => import('./pages/Economic/SubscriptionsPage'));\nconst BugReportPage = lazy(() => import('./pages/BugPages/BugReportPage'));\nconst LeaderboardPage = lazy(() => import('./pages/Main/LeaderboardPage'));\nconst RulesPage = lazy(() => import('./pages/Info/RulesPage'));\nconst PrivacyPolicyPage = lazy(() => import('./pages/Info/PrivacyPolicyPage'));\nconst TermsOfServicePage = lazy(() => import('./pages/Info/TermsOfServicePage'));\nconst MorePage = lazy(() => import('./pages/Main/MorePage'));\nconst NotFound = lazy(() => import('./pages/Info/NotFound'));\nconst AdminPage = lazy(() => import('./pages/Admin/AdminPage'));\nconst ModeratorPage = lazy(() => import('./pages/Admin/ModeratorPage'));\nconst UpdatesPage = lazy(() => import('./pages/Main/UpdatesPage'));\nconst SharePreviewTest = lazy(() => import('./components/SharePreviewTest'));\nconst BadgeShopPage = lazy(() => import('./pages/Economic/BadgeShopPage'));\nconst BalancePage = lazy(() => import('./pages/Economic/BalancePage'));\nconst UsernameAuctionPage = lazy(() => import('./pages/Economic/UsernameAuctionPage'));\nconst SimpleApiDocsPage = lazy(() => import('./pages/Info/SimpleApiDocsPage'));\nconst SubPlanes = lazy(() => import('./pages/Economic/SubPlanes'));\nconst TestNotifications = lazy(() => import('./components/TestNotifications'));\nconst MiniGamesPage = lazy(() => import('./pages/MiniGames/MiniGamesPage'));\nconst CupsGamePage = lazy(() => import('./pages/MiniGames/CupsGamePage'));\nconst LuckyNumberGame = lazy(() => import('./pages/MiniGames/LuckyNumberGame'));\nconst ClickerPage = lazy(() => import('./pages/MiniGames/ClickerPage'));\nconst BlackjackPage = lazy(() => import('./pages/MiniGames/BlackjackPage'));\nconst AboutPage = lazy(() => import('./pages/Info/AboutPage'));\n\n\nexport const ThemeSettingsContext = React.createContext({\n  themeSettings: {\n    mode: 'dark',\n    primaryColor: '#D0BCFF',\n    secondaryColor: '#f28c9a'\n  },\n  updateThemeSettings: () => {},\n  setProfileBackground: () => {},\n  clearProfileBackground: () => {},\n});\n\n\nconst SuspenseFallback = () => {\n  const theme = useTheme();\n  \n  return (\n    <Box \n      sx={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        backgroundColor: theme.palette.background.default\n      }}\n    >\n      <CircularProgress \n        color=\"primary\" \n        size={40} \n        thickness={4} \n        sx={{ \n          color: theme.palette.primary.main,\n          filter: 'drop-shadow(0 0 8px rgba(208, 188, 255, 0.4))'\n        }}\n      />\n    </Box>\n  );\n};\n\n\nconst PageTransition = ({ children }) => {\n  return children;\n};\n\n\nconst LoadingIndicator = () => {\n  const theme = useTheme();\n  \n  return (\n    <Box\n      sx={{ \n        display: 'flex', \n        flexDirection: 'column',\n        justifyContent: 'center', \n        alignItems: 'center',\n        height: '100vh',\n        width: '100%',\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        zIndex: 1000,\n        backgroundColor: theme.palette.background.default\n      }}\n    >\n      <Box \n        sx={{\n          animation: 'pulse 1.5s infinite ease-in-out',\n          '@keyframes pulse': {\n            '0%, 100%': { opacity: 0.7, transform: 'scale(1)' },\n            '50%': { opacity: 1, transform: 'scale(1.2)' },\n          }\n        }}\n      >\n        <Box \n          component=\"img\" \n          src=\"/icon-512.png\" \n          alt=\"K-Connect\"\n          sx={{ \n            width: 80, \n            height: 80,\n            filter: 'drop-shadow(0 0 8px rgba(208, 188, 255, 0.4))'\n          }} \n        />\n      </Box>\n    </Box>\n  );\n};\n\n\nconst isAboutSubdomain = () => {\n  const hostname = window.location.hostname;\n  return hostname === 'about.k-connect.ru';\n};\n\nconst isShareSubdomain = () => {\n  const hostname = window.location.hostname;\n  return hostname === 'share.k-connect.ru';\n};\n\n\nconst AboutRoute = () => {\n  return <AboutPage />;\n};\n\n\nconst ErrorFallback = ({ error, resetErrorBoundary }) => {\n  useEffect(() => {\n    if (\n      error?.message?.includes('Failed to fetch') || \n      error?.name === 'TypeError' ||\n      error?.message?.includes('Failed to fetch dynamically imported module')\n    ) {\n      window.location.reload();\n      return;\n    }\n  }, [error]);\n\n  return (\n    <Box sx={{ \n      display: 'flex', \n      flexDirection: 'column', \n      alignItems: 'center', \n      justifyContent: 'center',\n      minHeight: '100vh',\n      textAlign: 'center',\n      p: 3\n    }}>\n      <Typography variant=\"h5\" gutterBottom>\n        -   \n      </Typography>\n      <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n        ,   \n      </Typography>\n      <Box sx={{ \n        mt: 2, \n        p: 2, \n        bgcolor: 'background.paper', \n        borderRadius: 2,\n        maxWidth: '600px',\n        width: '100%',\n        textAlign: 'left'\n      }}>\n        <Typography variant=\"subtitle2\" color=\"error\" gutterBottom>\n           :\n        </Typography>\n        <Typography \n          variant=\"body2\" \n          component=\"pre\" \n          sx={{ \n            whiteSpace: 'pre-wrap',\n            wordBreak: 'break-word',\n            color: 'text.secondary',\n            fontFamily: 'monospace',\n            fontSize: '0.875rem'\n          }}\n        >\n          {error?.message || ' '}\n        </Typography>\n        {error?.stack && (\n          <Typography \n            variant=\"body2\" \n            component=\"pre\" \n            sx={{ \n              mt: 1,\n              whiteSpace: 'pre-wrap',\n              wordBreak: 'break-word',\n              color: 'text.secondary',\n              fontFamily: 'monospace',\n              fontSize: '0.75rem',\n              opacity: 0.7\n            }}\n          >\n            {error.stack}\n          </Typography>\n        )}\n      </Box>\n      <Button \n        variant=\"contained\" \n        onClick={resetErrorBoundary || (() => window.location.reload())}\n        sx={{ mt: 3 }}\n      >\n        \n      </Button>\n    </Box>\n  );\n};\n\n\nconst PublicPages = () => {\n  const location = useLocation();\n  const { isAuthenticated } = useContext(AuthContext);\n  const path = location.pathname;\n\n  let PublicPage;\n  if (path === '/rules') {\n    PublicPage = RulesPage;\n  } else if (path === '/privacy-policy') {\n    PublicPage = PrivacyPolicyPage;\n  } else if (path === '/terms-of-service') {\n    PublicPage = TermsOfServicePage;\n  } else if (path === '/about') {\n    return <AboutPage />;\n  } else if (path === '/cookies') {\n    PublicPage = CookiePage;\n  }\n\n  const content = (\n    <Box>\n      <PublicPage />\n    </Box>\n  );\n\n  return isAuthenticated ? (\n    <MainLayout>\n      {content}\n    </MainLayout>\n  ) : content;\n};\n\n\nconst AppRoutes = () => {\n  const { user, isAuthenticated, loading, checkAuth, error, setUser } = useContext(AuthContext);\n  const location = useLocation();\n  const theme = useTheme();\n  \n  \n  const background = location.state && location.state.background;\n  \n  \n  const [isPending, startTransition] = useTransition();\n  \n  \n  useEffect(() => {\n    \n    \n    const isResetPasswordWithToken = location.pathname === '/reset-password' && \n                                   (location.search.includes('token=') || \n                                    window.location.hash.includes('/reset-password?token='));\n    \n    const isAuthPage = ['/login', '/register', '/register/profile', '/confirm-email', '/auth_elem', '/about', '/forgot-password'].some(\n      path => location.pathname.startsWith(path)\n    ) || location.pathname.startsWith('/reset-password');\n    \n    \n    console.log('Current path:', location.pathname, \n                'Reset password with token:', isResetPasswordWithToken,\n                'Search params:', location.search,\n                'Hash:', window.location.hash);\n    \n    const hasSavedLoginError = !!localStorage.getItem('login_error');\n    const authSuccessFlag = localStorage.getItem('auth_success') === 'true';\n    \n    \n    if (authSuccessFlag && location.pathname === '/') {\n      console.log('   ,  ');\n      localStorage.removeItem('auth_success');\n      \n      startTransition(() => {\n        checkAuth(true);\n      });\n      return;\n    }\n    \n    if (!isAuthPage && !isResetPasswordWithToken && !error && !hasSavedLoginError) {\n      console.log('    ...');\n      const initAuth = async () => {\n        \n        startTransition(() => {\n          checkAuth(true);\n        });\n      };\n      \n      initAuth();\n    } else if (isAuthPage || isResetPasswordWithToken) {\n      console.log('     :', location.pathname, isResetPasswordWithToken ? '(   )' : '');\n    } else if (error) {\n      console.log('   -  :', error);\n    } else if (hasSavedLoginError) {\n      console.log('   -    ');\n    }\n    \n  }, [location.pathname, location.search, window.location.hash]); \n  \n  \n  \n  const currentPath = location.pathname;\n  const isLoginPage = currentPath === '/login';\n  const isRegisterPage = currentPath === '/register';\n  const isPasswordRecoveryPage = currentPath === '/forgot-password' || currentPath === '/reset-password';\n  const isElementAuthPage = currentPath.startsWith('/auth_elem') || currentPath === '/element-auth';\n  \n  \n  \n  if (isLoginPage || isRegisterPage || isPasswordRecoveryPage) {\n    return (\n      <Box sx={{ minHeight: '100vh', background: theme.palette.background.default, display: 'flex', flexDirection: 'column' }}>\n        <Suspense fallback={<SuspenseFallback />}>\n          <Routes location={location}>\n            <Route path=\"/login\" element={\n              isAuthenticated ? (\n                <Navigate to=\"/\" replace />\n              ) : (\n                <Login />\n              )\n            } />\n            <Route path=\"/register\" element={\n              isAuthenticated ? (\n                <Navigate to=\"/\" replace />\n              ) : (\n                <Register setUser={setUser} />\n              )\n            } />\n            <Route path=\"/forgot-password\" element={<ForgotPassword />} />\n            <Route path=\"/reset-password\" element={<ResetPassword />} />\n            <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n          </Routes>\n        </Suspense>\n      </Box>\n    );\n  }\n  if (isElementAuthPage) {\n    return (\n      <Box sx={{ minHeight: '100vh', background: theme.palette.background.default, display: 'flex', flexDirection: 'column' }}>\n        <Routes location={location}>\n          <Route path=\"/element-auth\" element={<ElementAuth />} />\n          <Route path=\"/auth_elem/:token\" element={<ElementAuth />} />\n          <Route path=\"/auth_elem/direct/:token\" element={<ElementAuth />} />\n          <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n        </Routes>\n      </Box>\n    );\n  }\n  \n  \n  return (\n    <MainLayout>\n      <PageTransition>\n        <Routes location={background || location}>\n          <Route path=\"/register/profile\" element={<RegisterProfile setUser={setUser} />} />\n          <Route path=\"/register/channel\" element={<RegisterChannel />} />\n          <Route path=\"/confirm-email/:token\" element={<EmailConfirmation />} />                    \n          <Route path=\"/\" element={\n            loading ? (\n              <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n                <CircularProgress />\n              </Box>\n            ) : isAuthenticated ? (\n              <MainPage />\n            ) : (\n              <Navigate to=\"/login\" replace state={{ from: location.pathname }} />\n            )\n          } />\n          <Route path=\"/feed\" element={<Navigate to=\"/\" replace />} />\n          <Route path=\"/main\" element={<Navigate to=\"/\" replace />} />                  \n          <Route path=\"/post/:postId\" element={<PostDetailPage />} />\n          <Route path=\"/profile\" element={<ProfilePage />} />\n          <Route path=\"/profile/:username\" element={<ProfilePage />} />\n          <Route path=\"/profile/:username/followers\" element={isAuthenticated ? <SubscriptionsPage tabIndex={0} /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/profile/:username/following\" element={isAuthenticated ? <SubscriptionsPage tabIndex={1} /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/subscriptions\" element={isAuthenticated ? <SubscriptionsPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/settings\" element={isAuthenticated ? <SettingsPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/notifications\" element={isAuthenticated ? <NotificationsPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/search\" element={isAuthenticated ? <SearchPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/music\" element={isAuthenticated ? <MusicPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/music/:section\" element={isAuthenticated ? <MusicPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/music/track/:trackId\" element={isAuthenticated ? <MusicPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/artist/:artistParam\" element={isAuthenticated ? <ArtistPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/messenger\" element={isAuthenticated ? <MessengerPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/messenger/join/:inviteCode\" element={isAuthenticated ? <JoinGroupChat /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/bugs\" element={<BugReportPage />} />\n          <Route path=\"/leaderboard\" element={<RequireAuth><LeaderboardPage /></RequireAuth>} />          \n          <Route path=\"/share-preview-test\" element={isAuthenticated ? <SharePreviewTest /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/more\" element={isAuthenticated ? <MorePage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/admin\" element={isAuthenticated ? <AdminPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/moderator\" element={isAuthenticated ? <ModeratorPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/badge-shop\" element={isAuthenticated ? <BadgeShopPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/username-auction\" element={isAuthenticated ? <UsernameAuctionPage /> : <Navigate to=\"/login\" replace />} />         \n          <Route path=\"/minigames\" element={isAuthenticated ? <MiniGamesPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/minigames/cups\" element={isAuthenticated ? <CupsGamePage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/minigames/lucky-number\" element={isAuthenticated ? <LuckyNumberGame /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/minigames/clicker\" element={isAuthenticated ? <ClickerPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/minigames/blackjack\" element={isAuthenticated ? <BlackjackPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/minigames/roulette\" element={isAuthenticated ? <RouletteGame /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/balance\" element={isAuthenticated ? <BalancePage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/api-docs\" element={isAuthenticated ? <SimpleApiDocsPage /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/sub-planes\" element={isAuthenticated ? <SubPlanes /> : <Navigate to=\"/login\" replace />} />\n          <Route path=\"/channels\" element={<RequireAuth><ChannelsPage /></RequireAuth>} />\n          <Route path=\"/updates\" element={<UpdatesPage />} />\n          <Route path=\"/test-notifications\" element={<TestNotifications />} />\n          <Route path=\"/cookies\" element={<PublicPages />} />\n          <Route path=\"/badge/:badgeId\" element={<Navigate to=\"/badge-shop\" replace state={{ openBadgeId: (location.pathname.match(/\\/badge\\/(\\d+)/)?.[1] || null) }} />} />\n          <Route path=\"*\" element={<NotFound />} />\n        </Routes>                \n        {background && (\n          <Routes>\n            <Route \n              path=\"/post/:postId\" \n              element={<PostDetailPage isOverlay={true} />} \n            />\n          </Routes>\n        )}\n      </PageTransition>\n      <AppBottomNavigation user={user} />\n    </MainLayout>\n  );\n};\nconst MemoizedAppRoutes = React.memo(AppRoutes);\nconst preloadMusicImages = () => { \n  if (process.env.NODE_ENV === 'development') {\n    return;\n  }\n\n  const basePaths = [\n    '/static/uploads/system',\n    '/uploads/system'\n  ];\n  \n  const imageFiles = [\n    'like_playlist.jpg',\n    'all_tracks.jpg',\n    'random_tracks.jpg',\n    'album_placeholder.jpg',\n    'playlist_placeholder.jpg'\n  ];  \n  basePaths.forEach(basePath => {\n    imageFiles.forEach(file => {\n      const path = `${basePath}/${file}`;\n      const img = new Image();\n      img.src = path;\n      img.onerror = () => {\n        console.warn(`Image not found: ${path}. Using gradient placeholder.`);\n      };\n    });\n  });\n};\nconst DefaultSEO = () => {\n  \n  const currentUrl = typeof window !== 'undefined' \n    ? window.location.href\n    : 'https://k-connect.ru';\n    \n  \n  const getPageType = () => {\n    if (typeof window !== 'undefined') {\n      const path = window.location.pathname;\n      if (path.includes('/post/')) return 'article';\n      if (path.includes('/profile/')) return 'profile';\n      if (path.includes('/music/')) return 'music';\n    }\n    return 'website';\n  };\n  \n  return (\n    <SEO \n      title=\"-\" \n      description=\"- -         ,  ,    .\"\n      image=\"/icon-512.png\"\n      url={currentUrl}\n      type={getPageType()}\n      meta={{\n        keywords: \" , -, , , , \",\n        viewport: \"width=device-width, initial-scale=1, maximum-scale=5\"\n      }}\n    />\n  );\n};\nconst SessionProvider = ({ children }) => {\n  const [sessionActive, setSessionActive] = useState(true);\n  const [sessionExpired, setSessionExpired] = useState(false);\n  const sessionStartTime = useRef(Date.now());\n  const lastFetchTime = useRef(null);\n  const broadcastChannel = useRef(null);\n  const SESSION_TIMEOUT = 60 * 60 * 1000;\n  const MIN_UPDATE_INTERVAL = 15000;\n\n  useEffect(() => {\n    if (typeof BroadcastChannel !== 'undefined') {\n      try {\n        broadcastChannel.current = new BroadcastChannel('k_connect_app_channel');\n        \n        broadcastChannel.current.onmessage = (event) => {\n          const { type, data, timestamp } = event.data;\n          \n          if (type === 'session_refresh') {\n            sessionStartTime.current = timestamp;\n            setSessionActive(true);\n            setSessionExpired(false);\n          } else if (type === 'last_fetch_update' && timestamp > (lastFetchTime.current || 0)) {\n            lastFetchTime.current = timestamp;\n          }\n        };\n      } catch (error) {\n        console.error('BroadcastChannel initialization error:', error);\n      }\n    }    \n    return () => {\n      if (broadcastChannel.current) {\n        try {\n          broadcastChannel.current.close();\n        } catch (error) {\n          console.error('Error closing BroadcastChannel:', error);\n        }\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    const checkSessionExpiration = () => {\n      const currentTime = Date.now();\n      const sessionDuration = currentTime - sessionStartTime.current;\n      \n      if (sessionDuration >= SESSION_TIMEOUT && !sessionExpired) {\n        setSessionExpired(true);\n        setSessionActive(false);\n      }\n    };    \n    const expirationInterval = setInterval(checkSessionExpiration, 60000);    \n    return () => clearInterval(expirationInterval);\n  }, [sessionExpired]);\n\n  const broadcastUpdate = (type, data) => {\n    if (broadcastChannel.current) {\n      try {\n        broadcastChannel.current.postMessage({\n          type,\n          data,\n          timestamp: Date.now()\n        });\n      } catch (error) {\n        console.error('Error broadcasting update:', error);\n      }\n    }\n  };\n  const checkSessionStatus = () => {\n    if (sessionExpired) return false;\n    \n    const currentTime = Date.now();\n    if (lastFetchTime.current && (currentTime - lastFetchTime.current) < MIN_UPDATE_INTERVAL) {\n      return false;\n    }\n    \n    lastFetchTime.current = currentTime;\n    broadcastUpdate('last_fetch_update', null);\n    \n    return true;\n  };\n\n  const refreshSession = () => {\n    const currentTime = Date.now();\n    sessionStartTime.current = currentTime;\n    setSessionActive(true);\n    setSessionExpired(false);\n    broadcastUpdate('session_refresh', { newStartTime: currentTime });\n  };\n\n  const contextValue = {\n    sessionActive,\n    sessionExpired,\n    lastFetchTime: lastFetchTime.current,\n    broadcastUpdate,\n    checkSessionStatus,\n    refreshSession\n  };\n\n  useEffect(() => {\n    setSessionContext({\n      checkSessionStatus,\n      sessionActive,\n      sessionExpired,\n      lastFetchTime: lastFetchTime.current,\n      refreshSession\n    });\n  }, [sessionActive, sessionExpired]);\n\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        const currentTime = Date.now();\n        lastFetchTime.current = currentTime;\n        broadcastUpdate('last_fetch_update', null);\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    \n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n\n  return (\n    <SessionContext.Provider value={contextValue}>\n      {children}\n    </SessionContext.Provider>\n  );\n};\n\n\nfunction App() {\n  const [isPending, startTransition] = useTransition();\n  const [themeSettings, setThemeSettings] = useState(() => {\n    \n    const getStoredValue = (key, defaultValue) => {\n      \n      const sessionValue = sessionStorage.getItem(key);\n      if (sessionValue) return sessionValue;\n      \n      \n      const localValue = localStorage.getItem(key);\n      if (localValue) return localValue;\n      \n      \n      const cookieValue = getCookie(key);\n      if (cookieValue) return cookieValue;\n      \n      \n      try {\n        const themeData = JSON.parse(localStorage.getItem('themeData') || '{}');\n        if (themeData[key]) return themeData[key];\n      } catch (e) {\n        console.warn('Error parsing theme data JSON:', e);\n      }\n      \n      return defaultValue;\n    };\n    \n    \n    const sessionTheme = sessionStorage.getItem('themeMode');\n    const localTheme = localStorage.getItem('theme') || localStorage.getItem('themeMode');\n    const cookieTheme = getCookie('themeMode') || getCookie('theme');\n    \n    \n    const savedThemeMode = sessionTheme || localTheme || cookieTheme || 'dark';\n    \n    \n    if (savedThemeMode) {\n      localStorage.setItem('theme', savedThemeMode);\n      localStorage.setItem('themeMode', savedThemeMode);\n      sessionStorage.setItem('theme', savedThemeMode);\n      sessionStorage.setItem('themeMode', savedThemeMode);\n      setCookie('theme', savedThemeMode);\n      setCookie('themeMode', savedThemeMode);\n    }\n    \n    return {\n      mode: savedThemeMode,\n      backgroundColor: getStoredValue('backgroundColor', \n                      (savedThemeMode === 'light' ? '#f5f5f5' : savedThemeMode === 'contrast' ? '#080808' : '#131313')),\n      paperColor: getStoredValue('paperColor', \n                 (savedThemeMode === 'light' ? '#ffffff' : savedThemeMode === 'contrast' ? '#101010' : '#1A1A1A')),\n      headerColor: getStoredValue('headerColor', \n                  (savedThemeMode === 'light' ? '#ffffff' : savedThemeMode === 'contrast' ? '#101010' : '#121212')),\n      bottomNavColor: getStoredValue('bottomNavColor', \n                     (savedThemeMode === 'light' ? '#ffffff' : savedThemeMode === 'contrast' ? '#101010' : '#1A1A1A')),\n      contentColor: getStoredValue('contentColor', \n                   (savedThemeMode === 'light' ? '#ffffff' : savedThemeMode === 'contrast' ? '#101010' : '#1A1A1A')),\n      primaryColor: getStoredValue('primaryColor', \n                   (savedThemeMode === 'light' ? '#8c52ff' : savedThemeMode === 'contrast' ? '#7B46E3' : '#D0BCFF')),\n      textColor: getStoredValue('textColor', \n                (savedThemeMode === 'light' ? '#121212' : '#FFFFFF')),\n    };\n  });\n  \n  \n  const recoverThemeSettings = useCallback(() => {\n    console.log('Running theme recovery check...');\n    \n    \n    const currentMode = themeSettings.mode;\n    \n    \n    const sessionTheme = sessionStorage.getItem('themeMode');\n    const localTheme = localStorage.getItem('themeMode');\n    const cookieTheme = getCookie('themeMode');\n    \n    \n    if (!sessionTheme || !localTheme || !cookieTheme) {\n      console.log('Theme storage inconsistency detected, restoring...');\n      \n      \n      saveThemeSettings('theme', currentMode);\n      saveThemeSettings('themeMode', currentMode);\n      \n      \n      Object.entries(themeSettings).forEach(([key, value]) => {\n        if (key !== 'mode' && value) {\n          saveThemeSettings(key, value);\n        }\n      });\n      \n      \n      try {\n        const themeData = {};\n        Object.entries(themeSettings).forEach(([key, value]) => {\n          if (value) {\n            themeData[key] = value;\n            if (key === 'mode') {\n              themeData['theme'] = value;\n              themeData['themeMode'] = value;\n            }\n          }\n        });\n        localStorage.setItem('themeData', JSON.stringify(themeData));\n        sessionStorage.setItem('themeData', JSON.stringify(themeData));\n      } catch (e) {\n        console.error('Error creating theme data backup:', e);\n      }\n    }\n  }, [themeSettings]);\n  \n  \n  useEffect(() => {\n    \n    recoverThemeSettings();\n    \n    \n    const recoveryInterval = setInterval(recoverThemeSettings, 30000);\n    \n    \n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        recoverThemeSettings();\n      }\n    };\n    \n    const handleFocus = () => {\n      recoverThemeSettings();\n    };\n    \n    window.addEventListener('focus', handleFocus);\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    \n    return () => {\n      clearInterval(recoveryInterval);\n      window.removeEventListener('focus', handleFocus);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [recoverThemeSettings]);\n  \n  const onAboutSubdomain = useMemo(() => isAboutSubdomain(), []);\n  const onShareSubdomain = useMemo(() => isShareSubdomain(), []);\n  \n  useEffect(() => {\n    if (onShareSubdomain) {\n\n      console.log('Share subdomain detected, user will be redirected via share.html');\n    }\n  }, [onShareSubdomain]);\n  \n  useEffect(() => {\n    preloadMusicImages();\n  }, []);\n\n  \n  const getContrastTextColor = (hexColor) => {\n    if (themeSettings.mode === 'dark' || themeSettings.mode === 'contrast') {\n      return '#FFFFFF';\n    }\n    \n    if (!hexColor || typeof hexColor !== 'string') {\n      return '#000000'; \n    }\n    \n    const color = hexColor.charAt(0) === '#' ? hexColor.substring(1) : hexColor;\n    \n    if (!/^[0-9A-Fa-f]{6}$/.test(color)) {\n      console.warn('Invalid hex color provided to getContrastTextColor:', hexColor);\n      return '#000000';\n    }\n    \n    const r = parseInt(color.substr(0, 2), 16);\n    const g = parseInt(color.substr(2, 2), 16);\n    const b = parseInt(color.substr(4, 2), 16);\n    \n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    \n    return luminance > 0.6 ? '#000000' : '#FFFFFF';\n  };\n\n  \n  const loadThemeSettings = async (forceDefault = false) => {\n    try {\n      if (forceDefault) {\n        \n        const defaultSettings = {\n          background_color: '#131313',\n          container_color: '#1A1A1A',\n          header_color: '#1A1A1A',\n          bottom_nav_color: '#1A1A1A',\n          content_color: '#1A1A1A',\n          welcome_bubble_color: '#131313',\n          avatar_border_color: '#D0BCFF'\n        };\n        applyThemeSettings(defaultSettings);\n        return;\n      }\n\n      const response = await ProfileService.getSettings();\n      if (response && response.success && response.settings) {\n        applyThemeSettings(response.settings);\n      }\n    } catch (error) {\n      console.error('Error loading theme settings:', error);\n      \n      applyThemeSettings({\n        background_color: '#131313',\n        container_color: '#1A1A1A',\n        header_color: '#1A1A1A',\n        bottom_nav_color: '#1A1A1A',\n        content_color: '#1A1A1A',\n        welcome_bubble_color: '#131313',\n        avatar_border_color: '#D0BCFF'\n      });\n    }\n  };\n\n  \n  const applyThemeSettings = (settings) => {\n    \n    const backgroundColor = settings.background_color || '#131313';\n    const containerColor = settings.container_color || '#1A1A1A';\n    const headerColor = settings.header_color || settings.container_color || '#1A1A1A';\n    const bottomNavColor = settings.bottom_nav_color || settings.container_color || '#1A1A1A';\n    const contentColor = settings.content_color || settings.container_color || '#1A1A1A';\n    const welcomeBubbleColor = settings.welcome_bubble_color || '#131313';\n    const primaryColor = settings.avatar_border_color || '#D0BCFF';\n\n    \n    const backgroundTextColor = getContrastTextColor(backgroundColor);\n    const containerTextColor = getContrastTextColor(containerColor);\n    const headerTextColor = getContrastTextColor(headerColor);\n    const contentTextColor = getContrastTextColor(contentColor);\n    const bottomNavTextColor = getContrastTextColor(bottomNavColor);\n\n    \n    updateThemeSettings({\n      backgroundColor: backgroundColor,\n      paperColor: containerColor,\n      headerColor: headerColor,\n      bottomNavColor: bottomNavColor,\n      contentColor: contentColor,\n      primaryColor: primaryColor,\n      textColor: containerTextColor,\n      headerTextColor: headerTextColor,\n      contentTextColor: contentTextColor,\n      bottomNavTextColor: bottomNavTextColor,\n      backgroundTextColor: backgroundTextColor\n    });\n    \n    \n    document.documentElement.style.setProperty('--background-color', backgroundColor);\n    document.documentElement.style.setProperty('--container-color', containerColor);\n    document.documentElement.style.setProperty('--header-color', headerColor);\n    document.documentElement.style.setProperty('--bottom-nav-color', bottomNavColor);\n    document.documentElement.style.setProperty('--content-color', contentColor);\n    document.documentElement.style.setProperty('--welcome-bubble-color', welcomeBubbleColor);\n    document.documentElement.style.setProperty('--avatar-border-color', primaryColor);\n    \n    \n    document.documentElement.style.setProperty('--background-text-color', backgroundTextColor);\n    document.documentElement.style.setProperty('--container-text-color', containerTextColor);\n    document.documentElement.style.setProperty('--header-text-color', headerTextColor);\n    document.documentElement.style.setProperty('--content-text-color', contentTextColor);\n    document.documentElement.style.setProperty('--bottom-nav-text-color', bottomNavTextColor);\n    \n    \n    document.documentElement.style.setProperty('--primary', primaryColor);\n    document.documentElement.style.setProperty('--primary-light', primaryColor);\n    document.documentElement.style.setProperty('--primary-dark', primaryColor);\n    \n    console.log('Theme settings applied:', {\n      backgroundColor, \n      containerColor, \n      headerColor, \n      bottomNavColor, \n      contentColor,\n      backgroundTextColor, \n      containerTextColor,\n      headerTextColor,\n      contentTextColor,\n      bottomNavTextColor\n    });\n  };\n  \n  \n  const authContextValue = useContext(AuthContext) || {};\n  \n  \n  useEffect(() => {\n    if (authContextValue.isAuthenticated) {\n      \n      loadThemeSettings();\n    } else if (!authContextValue.loading) {\n      \n      loadThemeSettings(true);\n    }\n  }, [authContextValue.isAuthenticated, authContextValue.loading]);\n  \n  \n  const updateThemeSettings = (newSettings) => {\n    setThemeSettings(prev => {\n      const updated = { ...prev, ...newSettings };\n      \n      \n      if (newSettings.mode) {\n        saveThemeSettings('theme', newSettings.mode);\n        saveThemeSettings('themeMode', newSettings.mode);\n      }\n      if (newSettings.backgroundColor) saveThemeSettings('backgroundColor', newSettings.backgroundColor);\n      if (newSettings.paperColor) saveThemeSettings('paperColor', newSettings.paperColor);\n      if (newSettings.headerColor) saveThemeSettings('headerColor', newSettings.headerColor);\n      if (newSettings.bottomNavColor) saveThemeSettings('bottomNavColor', newSettings.bottomNavColor);\n      if (newSettings.contentColor) saveThemeSettings('contentColor', newSettings.contentColor);\n      if (newSettings.primaryColor) saveThemeSettings('primaryColor', newSettings.primaryColor);\n      if (newSettings.textColor) saveThemeSettings('textColor', newSettings.textColor);\n      \n      return updated;\n    });\n  };\n\n  \n  const theme = useMemo(() => {\n    const themeObj = createTheme({\n      palette: {\n        mode: themeSettings.mode === 'dark' ? 'dark' : 'light',\n        primary: {\n          main: themeSettings.primaryColor || '#D0BCFF',\n          light: themeSettings.primaryColor || '#E9DDFF',\n          dark: themeSettings.primaryColor || '#B69DF8',\n        },\n        secondary: {\n          main: themeSettings.secondaryColor || '#f28c9a',\n        },\n        background: {\n          default: themeSettings.backgroundColor || '#131313',\n          paper: themeSettings.paperColor || '#1A1A1A',\n        },\n        text: {\n          primary: themeSettings.textColor || \n                  (themeSettings.mode === 'dark' ? '#FFFFFF' : '#121212'),\n          secondary: themeSettings.mode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)',\n        },\n        header: {\n          main: themeSettings.headerColor || themeSettings.paperColor || '#1A1A1A',\n          contrastText: themeSettings.headerTextColor || \n                        (themeSettings.mode === 'dark' ? '#FFFFFF' : '#121212'),\n        },\n        bottomNav: {\n          main: themeSettings.bottomNavColor || themeSettings.paperColor || '#1A1A1A',\n          contrastText: themeSettings.bottomNavTextColor || \n                        (themeSettings.mode === 'dark' ? '#FFFFFF' : '#121212'),\n        },\n        content: {\n          main: themeSettings.contentColor || themeSettings.paperColor || '#1A1A1A',\n          contrastText: themeSettings.contentTextColor || \n                        (themeSettings.mode === 'dark' ? '#FFFFFF' : '#121212'),\n        },\n      },\n      typography: {\n        fontFamily: '\"SF Pro Display\", \"Roboto\", \"Arial\", sans-serif',\n        h1: { fontSize: '2.5rem', fontWeight: 700 },\n        h2: { fontSize: '2rem', fontWeight: 700 },\n        h3: { fontSize: '1.8rem', fontWeight: 600 },\n        h4: { fontSize: '1.5rem', fontWeight: 600 },\n        h5: { fontSize: '1.2rem', fontWeight: 500 },\n        h6: { fontSize: '1rem', fontWeight: 500 },\n      },\n      shape: {\n        borderRadius: 12, \n      },\n      components: {\n        MuiButton: {\n          styleOverrides: {\n            root: {\n              borderRadius: '12px', \n              textTransform: 'none',\n              fontWeight: 500,\n            },\n          },\n        },\n        MuiCssBaseline: {\n          styleOverrides: {\n            body: {\n              lineHeight: 1,\n              backgroundColor: themeSettings.backgroundColor || '#131313',\n              color: themeSettings.mode === 'contrast' \n                ? '#FFFFFF' \n                : (themeSettings.textColor || (themeSettings.mode === 'light' ? '#121212' : '#FFFFFF')),\n              '& *': themeSettings.mode === 'contrast' \n                ? { color: 'inherit' }\n                : {},\n            },\n          },\n        },\n        MuiCard: {\n          styleOverrides: {\n            root: {\n              borderRadius: '15px', \n              overflow: 'hidden',\n              backgroundColor: themeSettings.contentColor || themeSettings.paperColor || '#1A1A1A',\n              color: themeSettings.mode === 'dark' || themeSettings.mode === 'contrast' \n                ? '#FFFFFF' \n                : themeSettings.contentTextColor || getContrastTextColor(themeSettings.contentColor || '#1A1A1A'),\n            },\n          },\n        },\n        MuiPaper: {\n          styleOverrides: {\n            root: {\n              borderRadius: '12px', \n              backgroundColor: themeSettings.paperColor || '#1A1A1A',\n              color: themeSettings.mode === 'dark' || themeSettings.mode === 'contrast' \n                ? '#FFFFFF' \n                : themeSettings.contentTextColor || getContrastTextColor(themeSettings.paperColor || '#1A1A1A'),\n            },\n          },\n        },\n        MuiAppBar: {\n          styleOverrides: {\n            root: {\n              backgroundColor: themeSettings.headerColor || themeSettings.paperColor || '#1A1A1A',\n              color: themeSettings.headerTextColor || getContrastTextColor(themeSettings.headerColor || '#1A1A1A'),\n            },\n          },\n        },\n        MuiBottomNavigation: {\n          styleOverrides: {\n            root: {\n              backgroundColor: themeSettings.bottomNavColor || themeSettings.paperColor || '#1A1A1A',\n            },\n          },\n        },\n        MuiBottomNavigationAction: {\n          styleOverrides: {\n            root: {\n              color: themeSettings.mode === 'dark' || themeSettings.mode === 'contrast' \n                ? '#FFFFFF' \n                : themeSettings.bottomNavTextColor || getContrastTextColor(themeSettings.bottomNavColor || '#1A1A1A'),\n              '&.Mui-selected': {\n                color: themeSettings.primaryColor || '#D0BCFF',\n              },\n            },\n            label: {\n              color: 'inherit',\n              '&.Mui-selected': {\n                color: 'inherit',\n              },\n            },\n            iconOnly: {\n              color: 'inherit',\n            },\n          },\n        },\n        MuiTextField: {\n          styleOverrides: {\n            root: {\n              '& .MuiOutlinedInput-root': {\n                borderRadius: '10px', \n                '& fieldset': {\n                  borderColor: themeSettings.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',\n                },\n                '&:hover fieldset': {\n                  borderColor: themeSettings.mode === 'dark' ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.2)',\n                },\n                '&.Mui-focused fieldset': {\n                  borderColor: themeSettings.primaryColor || '#D0BCFF', \n                },\n              },\n              '& .MuiInputLabel-root': {\n                color: themeSettings.mode === 'dark' ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.6)',\n                '&.Mui-focused': {\n                  color: themeSettings.primaryColor || '#D0BCFF', \n                },\n              },\n            },\n          },\n        },\n      },\n    });\n    return themeObj;\n  }, [themeSettings]);\n\n  \n  const [profileBackground, setProfileBackgroundState] = useState(null);\n  const setProfileBackground = (url) => setProfileBackgroundState(url);\n  const clearProfileBackground = () => setProfileBackgroundState(null);\n\n  useEffect(() => {\n    if (profileBackground) {\n      document.body.style.backgroundImage = `url(${profileBackground})`;\n      document.body.style.backgroundSize = 'cover';\n      document.body.style.backgroundPosition = 'center';\n      document.body.style.backgroundRepeat = 'no-repeat';\n      document.body.style.backgroundAttachment = 'scroll';\n      document.body.classList.add('profile-background-active');\n    } else {\n      document.body.style.backgroundImage = '';\n      document.body.style.backgroundSize = '';\n      document.body.style.backgroundPosition = '';\n      document.body.style.backgroundRepeat = '';\n      document.body.style.backgroundAttachment = '';\n      document.body.classList.remove('profile-background-active');\n    }\n  }, [profileBackground]);\n\n  const themeContextValue = useMemo(() => ({\n    themeSettings,\n    updateThemeSettings,\n    loadThemeSettings,\n    setProfileBackground,\n    clearProfileBackground,\n    profileBackground,\n  }), [themeSettings, profileBackground]);\n\n  \n  const location = useLocation();\n  const currentPath = location.pathname;\n  \n  \n  if (onShareSubdomain) {\n    return null;\n  }\n  \n  \n  if (onAboutSubdomain) {\n    return (\n      <ErrorBoundary FallbackComponent={ErrorFallback}>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Box sx={{ \n            display: 'flex', \n            flexDirection: 'column', \n            minHeight: '100vh',\n            bgcolor: 'background.default'\n          }}>\n            <Suspense fallback={<LoadingIndicator />}>\n              <SEO \n                title=\" K-Connect\" \n                description=\"   K-Connect -       ,  ,    .\"\n                image=\"/icon-512.png\"\n                type=\"website\"\n              />\n              <AboutPage />\n            </Suspense>\n          </Box>\n        </ThemeProvider>\n      </ErrorBoundary>\n    );\n  }\n\n  \n  useEffect(() => {\n    \n    localStorage.setItem('themeMode', themeSettings.mode);\n  }, [themeSettings.mode]);\n\n  \n  useEffect(() => {\n    const savedThemeMode = localStorage.getItem('themeMode');\n    \n    if (savedThemeMode && savedThemeMode !== themeSettings.mode) {\n      console.log('Theme mode mismatch, restoring from localStorage');\n      updateThemeSettings({ mode: savedThemeMode });\n    }\n  }, []);\n\n  useEffect(() => {\n    const handleStorageChange = (event) => {\n      if (event.key && (\n          event.key === 'theme' ||\n          event.key === 'themeMode' ||\n          event.key === 'backgroundColor' ||\n          event.key === 'paperColor' ||\n          event.key === 'headerColor' ||\n          event.key === 'bottomNavColor' ||\n          event.key === 'contentColor' ||\n          event.key === 'primaryColor' ||\n          event.key === 'textColor'\n        )) {\n        console.log(`Storage change detected for ${event.key}:`, event.newValue);\n        \n        const settingUpdate = {};\n        \n        if (event.key === 'theme' || event.key === 'themeMode') {\n          settingUpdate.mode = event.newValue;\n        } else {\n          const stateKey = event.key.charAt(0).toLowerCase() + event.key.slice(1);\n          settingUpdate[stateKey] = event.newValue;\n        }\n        \n        setThemeSettings(prev => ({\n          ...prev,\n          ...settingUpdate\n        }));\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    \n    const handlePageFocus = () => {\n      const sessionTheme = sessionStorage.getItem('themeMode');\n      \n      if (!sessionTheme && localStorage.getItem('themeMode')) {\n        const modeFromLocal = localStorage.getItem('themeMode');\n        sessionStorage.setItem('themeMode', modeFromLocal);\n        sessionStorage.setItem('theme', modeFromLocal);\n        \n        ['backgroundColor', 'paperColor', 'headerColor', 'bottomNavColor', \n         'contentColor', 'primaryColor', 'textColor'].forEach(key => {\n          const value = localStorage.getItem(key);\n          if (value) {\n            sessionStorage.setItem(key, value);\n          }\n        });\n        \n        updateThemeSettings({ mode: modeFromLocal });\n      }\n    };\n    \n    window.addEventListener('focus', handlePageFocus);\n    \n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('focus', handlePageFocus);\n    };\n  }, []);\n\n  useEffect(() => {\n    const applyThemeToDocument = () => {\n      const mode = sessionStorage.getItem('themeMode') || localStorage.getItem('themeMode') || getCookie('themeMode') || 'dark';\n      document.documentElement.setAttribute('data-theme', mode);\n      document.documentElement.classList.add(`theme-${mode}`);\n      \n      \n      document.querySelector('html').setAttribute('data-theme', mode);\n      \n      \n      let metaTheme = document.querySelector('meta[name=\"theme-color\"]');\n      if (!metaTheme) {\n        metaTheme = document.createElement('meta');\n        metaTheme.setAttribute('name', 'theme-color');\n        document.head.appendChild(metaTheme);\n      }\n      \n      \n      if (mode === 'light') {\n        metaTheme.setAttribute('content', '#ffffff');\n      } else if (mode === 'contrast') {\n        metaTheme.setAttribute('content', '#080808');\n      } else {\n        metaTheme.setAttribute('content', '#131313');\n      }\n      \n      const themeVars = {\n        backgroundColor: sessionStorage.getItem('backgroundColor') || localStorage.getItem('backgroundColor') || getCookie('backgroundColor'),\n        paperColor: sessionStorage.getItem('paperColor') || localStorage.getItem('paperColor') || getCookie('paperColor'),\n        headerColor: sessionStorage.getItem('headerColor') || localStorage.getItem('headerColor') || getCookie('headerColor'),\n        bottomNavColor: sessionStorage.getItem('bottomNavColor') || localStorage.getItem('bottomNavColor') || getCookie('bottomNavColor'),\n        contentColor: sessionStorage.getItem('contentColor') || localStorage.getItem('contentColor') || getCookie('contentColor'),\n        primaryColor: sessionStorage.getItem('primaryColor') || localStorage.getItem('primaryColor') || getCookie('primaryColor'),\n        textColor: sessionStorage.getItem('textColor') || localStorage.getItem('textColor') || getCookie('textColor')\n      };\n      \n      Object.entries(themeVars).forEach(([key, value]) => {\n        if (value) {\n          const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n          document.documentElement.style.setProperty(`--${cssKey}`, value);\n        }\n      });\n      \n      \n      try {\n        const themeData = JSON.parse(localStorage.getItem('themeData') || sessionStorage.getItem('themeData') || '{}');\n        Object.entries(themeData).forEach(([key, value]) => {\n          if (value && key !== 'mode' && key !== 'theme' && key !== 'themeMode') {\n            const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n            document.documentElement.style.setProperty(`--${cssKey}`, value);\n          }\n        });\n      } catch (e) {\n        console.warn('Error applying theme data from JSON backup:', e);\n      }\n    };\n    \n    applyThemeToDocument();\n    \n    if (document.readyState === 'complete') {\n      applyThemeToDocument();\n    } else {\n      window.addEventListener('load', applyThemeToDocument);\n      return () => window.removeEventListener('load', applyThemeToDocument);\n    }\n  }, []);\n\n  return (\n    <HelmetProvider>\n      <AuthProvider>\n        <ThemeSettingsContext.Provider value={themeContextValue}>\n          <ThemeProvider theme={theme}>\n            <CssBaseline />\n            {themeSettings.mode === 'contrast' && (\n              <style dangerouslySetInnerHTML={{\n                __html: `\n                  .MuiListItemText-primary, \n                  .MuiListItemText-secondary,\n                  .MuiTypography-root,\n                  .MuiInputBase-input,\n                  .MuiInputLabel-root,\n                  .MuiFormHelperText-root,\n                  .MuiMenuItem-root,\n                  .MuiButton-root,\n                  .MuiLink-root:not(a),\n                  .MuiChip-label,\n                  .MuiTab-root,\n                  .MuiTableCell-root,\n                  [class*=\"css-\"],\n                  /* Additional text selectors */\n                  span:not(.MuiIcon-root):not(.material-icons),\n                  p,\n                  h1, h2, h3, h4, h5, h6,\n                  label,\n                  div:not(.MuiAvatar-root):not(.MuiSwitch-thumb):not(.MuiSwitch-track):not([role=\"progressbar\"]) {\n                    color: #FFFFFF !important;\n                  }\n                  \n                  .MuiChip-root.status-online *,\n                  .MuiChip-root[color=\"success\"] *,\n                  .MuiChip-root[color=\"error\"] *,\n                  .MuiChip-root[color=\"warning\"] *,\n                  .MuiChip-root[color=\"info\"] *,\n                  a.MuiLink-root,\n                  .MuiButton-containedPrimary,\n                  .Mui-selected,\n                  .MuiSwitch-thumb,\n                  .MuiSwitch-track,\n                  .MuiIcon-root,\n                  .material-icons,\n                  svg,\n                  .MuiAvatar-root *,\n                  img,\n                  [role=\"progressbar\"] * {\n                    color: inherit !important;\n                  }\n                `\n              }}/>\n            )}\n            <SessionProvider>\n              <MusicProvider>\n                <PostDetailProvider>\n                  <ErrorBoundary FallbackComponent={ErrorFallback}>\n                    <Box sx={{ \n                      display: 'flex', \n                      flexDirection: 'column', \n                      minHeight: '100vh',\n                      bgcolor: 'background.default'\n                    }}>\n                      <Suspense fallback={<LoadingIndicator />}>\n                        <DefaultSEO />\n                        <Routes>\n                          <Route path=\"/rules\" element={<PublicPages />} />\n                          <Route path=\"/privacy-policy\" element={<PublicPages />} />\n                          <Route path=\"/terms-of-service\" element={<PublicPages />} />\n                          <Route path=\"/about\" element={<PublicPages />} />\n                          <Route path=\"/cookies\" element={<PublicPages />} />\n                          <Route path=\"*\" element={<AppRoutes />} />\n                        </Routes>\n                        <MusicPlayerCore />\n                      </Suspense>\n                    </Box>\n                  </ErrorBoundary>\n                </PostDetailProvider>\n              </MusicProvider>\n            </SessionProvider>\n            {/* <CookieBanner /> */}\n          </ThemeProvider>\n        </ThemeSettingsContext.Provider>\n      </AuthProvider>\n    </HelmetProvider>\n  );\n}\n\nexport default App;\n\nexport const useSession = () => {\n  const context = useContext(SessionContext);\n  if (!context) {\n    throw new Error('useSession  SessionProvider    ');\n  }\n  return context;\n};\n\nconst setCookie = (name, value, days = 365) => {\n  try {\n    const expires = new Date();\n    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);\n    document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Lax`;\n  } catch (error) {\n    console.error(`   cookie ${name}:`, error);\n  }\n};\n\nconst getCookie = (name) => {\n  try {\n    const nameEQ = name + \"=\";\n    const ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n  } catch (error) {\n    console.error(`   cookie ${name}:`, error);\n  }\n  return null;\n};\n\nconst saveThemeSettings = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n    \n    sessionStorage.setItem(key, value);\n    \n    setCookie(key, value, 365);\n    \n    if (key === 'themeMode' || key === 'theme') {\n      document.documentElement.setAttribute('data-theme', value);\n    } else {\n      const cssVarKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n      document.documentElement.style.setProperty(`--${cssVarKey}`, value);\n    }\n    \n    try {\n      const currentThemeData = JSON.parse(localStorage.getItem('themeData') || '{}');\n      currentThemeData[key] = value;\n      localStorage.setItem('themeData', JSON.stringify(currentThemeData));\n      sessionStorage.setItem('themeData', JSON.stringify(currentThemeData));\n    } catch (e) {\n      console.error('Error saving theme data JSON:', e);\n    }\n  } catch (error) {\n    console.error(`Error saving theme setting ${key}:`, error);\n  }\n};\n","import axios from 'axios';\n\n\nconst requestCache = {\n  cache: new Map(),\n  \n\n  get(key) {\n    const item = this.cache.get(key);\n    if (!item) return null;\n    \n\n    if (item.expiry && item.expiry < Date.now()) {\n      this.cache.delete(key);\n      return null;\n    }\n    \n    return item.data;\n  },\n  \n\n  set(key, data, ttlSeconds = 15) {\n    const expiry = ttlSeconds > 0 ? Date.now() + (ttlSeconds * 1000) : null;\n    this.cache.set(key, { data, expiry });\n  },\n  \n\n  generateKey(config) {\n    const { url, method, params, data } = config;\n    return `${method}:${url}:${JSON.stringify(params || {})}:${JSON.stringify(data || {})}`;\n  },\n  \n\n  clear() {\n    this.cache.clear();\n  },\n  \n\n  clearByUrlPrefix(urlPrefix) {\n    for (const [key] of this.cache.entries()) {\n      const [method, url] = key.split(':');\n      if (url && url.startsWith(urlPrefix)) {\n        this.cache.delete(key);\n      }\n    }\n  },\n  \n\n  clearPostsCache() {\n    const prefixesToClear = [\n      '/api/posts',\n      '/api/feed',\n      '/api/profile',\n      '/api/profile/posts',\n      '/api/profile/wall',\n      '/api/profile/pinned_post',\n      '/api/users',\n      '/api/reposts',\n      '/api/stories'\n    ];\n    \n    for (const prefix of prefixesToClear) {\n      this.clearByUrlPrefix(prefix);\n    }\n  }\n};\n\n\nconst loadingManager = {\n  requests: new Map(),\n  \n  startRequest(url) {\n    const count = this.requests.get(url) || 0;\n    this.requests.set(url, count + 1);\n    this.updateGlobalState();\n  },\n  \n  finishRequest(url) {\n    const count = this.requests.get(url) || 1;\n    if (count > 1) {\n      this.requests.set(url, count - 1);\n    } else {\n      this.requests.delete(url);\n    }\n    this.updateGlobalState();\n  },\n  \n  updateGlobalState() {\n\n    const isLoading = this.requests.size > 0;\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new CustomEvent('api-loading-changed', { \n        detail: { isLoading, activeRequests: this.getActiveRequests() } \n      }));\n    }\n  },\n  \n  getActiveRequests() {\n    return Array.from(this.requests.keys());\n  }\n};\n\n\nconst MAX_RETRIES = 2;\nconst RETRY_DELAY = 1000;\n\n\nconst instance = axios.create({\n  baseURL: 'https://k-connect.ru',\n  withCredentials: true,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  }\n});\n\naxios.defaults.withCredentials = true;\n\n\nconst STATE_CHANGING_PATTERNS = [\n  { method: 'post', urlPattern: '/api/posts/create' },\n  { method: 'put', urlPattern: '/api/posts' },\n  { method: 'post', urlPattern: '/api/post/new' },\n  { method: 'delete', urlPattern: '/api/posts/' },\n  { method: 'post', urlPattern: '/api/posts/delete/' },\n  { method: 'post', urlPattern: '/api/posts/*/like' },\n  { method: 'post', urlPattern: '/api/posts/*/dislike' },\n  { method: 'post', urlPattern: '/api/comments/create' },\n  { method: 'post', urlPattern: '/api/comments/*/like' },\n  { method: 'post', urlPattern: '/api/posts/*/edit' },\n];\n\n\ninstance.interceptors.request.use(\n  (config) => {\n    config.requestId = Math.random().toString(36).substring(2, 9);\n    \n    if (config.method === 'get' && config.cache !== false) {\n      // Disable caching for all post-related requests\n      if (config.url && (\n        config.url.includes('/api/posts') ||\n        config.url.includes('/api/feed') ||\n        config.url.includes('/api/profile/posts') ||\n        config.url.includes('/api/profile/wall') ||\n        config.url.includes('/api/profile/pinned_post')\n      )) {\n        config.cache = false;\n        return config;\n      }\n\n      const cacheKey = requestCache.generateKey(config);\n      const cachedData = requestCache.get(cacheKey);\n      \n      const forceRefresh = config.forceRefresh === true;\n      \n      if (cachedData && !forceRefresh) {\n        const source = axios.CancelToken.source();\n        setTimeout(() => {\n          source.cancel(JSON.stringify({\n            status: 200,\n            data: cachedData,\n            fromCache: true\n          }));\n        }, 0);\n        \n        config.cancelToken = source.token;\n        return config;\n      }\n      \n      config._cacheKey = cacheKey;\n    }\n    \n    if (config.method !== 'get') {\n      const url = config.url || '';\n      for (const pattern of STATE_CHANGING_PATTERNS) {\n        if (config.method === pattern.method && \n            (url.includes(pattern.urlPattern) || url.match(new RegExp(pattern.urlPattern.replace('*', '.*'))))) {\n\n          config._invalidatesCache = true;\n          break;\n        }\n      }\n    }\n    \n    const url = config.url?.split('?')[0] || 'unknown';\n    loadingManager.startRequest(url);\n    \n\n    if (process.env.NODE_ENV !== 'production') {\n      console.log(` API Request [${config.requestId}]:`, {\n        method: config.method,\n        url: config.url,\n        data: config.data,\n        params: config.params\n      });\n    }\n    \n    return config;\n  },\n  (error) => {\n    console.error(' Request configuration error:', error);\n    return Promise.reject(error);\n  }\n);\n\n\ninstance.interceptors.response.use(\n  (response) => {\n\n    const url = response.config.url?.split('?')[0] || 'unknown';\n    loadingManager.finishRequest(url);\n    \n\n    if (response.config._invalidatesCache) {\n\n\n      requestCache.clearPostsCache();\n      \n\n      if (typeof window !== 'undefined') {\n        window.dispatchEvent(new CustomEvent('data-updated', { \n          detail: { url: response.config.url, method: response.config.method } \n        }));\n      }\n    }\n    \n\n    if (response.config.method === 'get' && \n        response.config._cacheKey && \n        response.status === 200) {\n      \n\n\n\n\n      requestCache.set(response.config._cacheKey, response.data, 15);\n    }\n    \n\n    if (process.env.NODE_ENV !== 'production') {\n      console.log(` API Response [${response.config.requestId}]:`, {\n        status: response.status,\n        url: response.config.url,\n        data: response.data\n      });\n    }\n    \n    return response;\n  },\n  async (error) => {\n\n    if (axios.isCancel(error) && error.message) {\n      try {\n        const response = JSON.parse(error.message);\n        if (response.fromCache) {\n          return { \n            ...response,\n            status: 200, \n            statusText: 'OK', \n            headers: {},\n            config: error.config,\n            fromCache: true\n          };\n        }\n      } catch (e) {\n\n      }\n    }\n    \n    let config = error.config;\n    \n\n    if (config && config.url) {\n      const url = config.url?.split('?')[0] || 'unknown';\n      loadingManager.finishRequest(url);\n    }\n    \n\n    if (process.env.NODE_ENV !== 'production') {\n      console.error(` API Error [${config?.requestId || 'unknown'}]:`, {\n        message: error.message,\n        status: error.response?.status,\n        url: config?.url,\n        method: config?.method,\n        data: error.response?.data\n      });\n    }\n    \n\n    if (error.response) {\n      \n      if (error.response.status === 401) {\n        window.dispatchEvent(new CustomEvent('auth-error', { \n          detail: { \n            message: \" \", \n            shortMessage: \" \",\n            notificationType: \"error\",\n            animationType: \"pill\" \n          } \n        }));\n      }\n      \n      \n      if (error.response.status === 429) {\n        window.dispatchEvent(new CustomEvent('rate-limit-error', { \n          detail: { \n            message: \"  \",\n            shortMessage: \"\",\n            notificationType: \"warning\",\n            animationType: \"bounce\", \n            retryAfter: error.response.headers['retry-after'] \n          } \n        }));\n      }\n      \n      \n      if ([500, 502, 503, 504].includes(error.response.status) && \n          config && !config._retryCount) {\n\n        config._retryCount = config._retryCount || 0;\n        \n\n        if (config._retryCount < MAX_RETRIES) {\n          config._retryCount++;\n          \n\n          const delay = RETRY_DELAY * Math.pow(2, config._retryCount - 1);\n          \n\n          window.dispatchEvent(new CustomEvent('api-retry', { \n            detail: { \n              url: config.url,\n              attempt: config._retryCount,\n              delay: delay,\n              message: \" \",\n              shortMessage: ` ${config._retryCount}`,\n              notificationType: \"info\",\n              animationType: \"pulse\"\n            } \n          }));\n          \n\n          await new Promise(resolve => setTimeout(resolve, delay));\n          \n          return instance(config);\n        }\n      }\n    } else if (error.request) {\n      \n      window.dispatchEvent(new CustomEvent('network-error', { \n        detail: { \n          message: \"  \", \n          shortMessage: \" \",\n          notificationType: \"error\",\n          animationType: \"drop\"\n        } \n      }));\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n\ninstance.cache = {\n  clear: requestCache.clear.bind(requestCache),\n  clearByUrlPrefix: requestCache.clearByUrlPrefix.bind(requestCache),\n  clearPostsCache: requestCache.clearPostsCache.bind(requestCache)\n};\n\n\ninstance.helpers = {\n\n  async loadData(config, onProgress, onError) {\n    try {\n      const result = await instance(config);\n      return result.data;\n    } catch (error) {\n      if (onError) {\n        onError(error);\n      } else {\n        \n        let message = '  ';\n        let shortMessage = '';\n        let notificationType = 'error';\n        let animationType = 'pill';\n        \n        if (error.response) {\n          switch(error.response.status) {\n            case 400: \n              message = ' '; \n              shortMessage = ' ';\n              break;\n            case 401: \n              message = ' '; \n              shortMessage = '';\n              break;\n            case 403: \n              message = ' '; \n              shortMessage = ' ';\n              break;\n            case 404: \n              message = '  '; \n              shortMessage = ' ';\n              break;\n            case 429: \n              message = '  '; \n              shortMessage = '';\n              notificationType = 'warning';\n              animationType = 'bounce';\n              break;\n            case 500: \n              message = ' '; \n              shortMessage = ' ';\n              break;\n          }\n        } else if (error.request) {\n          message = '   ';\n          shortMessage = ' ';\n          animationType = 'drop';\n        }\n        \n        window.dispatchEvent(new CustomEvent('show-error', { \n          detail: { \n            message, \n            shortMessage, \n            notificationType, \n            animationType \n          } \n        }));\n      }\n      throw error;\n    }\n  }\n};\n\nexport default instance; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z\"\n}), 'CheckCircle');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z\"\n}), 'Error');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z\"\n}), 'Warning');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z\"\n}), 'Info');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0\"\n}), 'WifiOff');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z\"\n}), 'Lock');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z\"\n}), 'Notifications');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z\"\n}), 'Favorite');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2\"\n}), 'ChatBubble');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z\"\n}), 'Repeat');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17 19.22H5V7h7V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-7h-2z\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 2h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V7h3V5h-3zM7 9h8v2H7zm0 3v2h8v-2h-3zm0 3h8v2H7z\"\n}, \"1\")], 'PostAdd');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16\"\n}), 'MonetizationOn');","import React, { useState, useEffect } from 'react';\nimport { Box, Typography, keyframes, alpha } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport WarningIcon from '@mui/icons-material/Warning';\nimport InfoIcon from '@mui/icons-material/Info';\nimport WifiOffIcon from '@mui/icons-material/WifiOff';\nimport LockIcon from '@mui/icons-material/Lock';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ChatBubbleIcon from '@mui/icons-material/ChatBubble';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport RepeatIcon from '@mui/icons-material/Repeat';\nimport PostAddIcon from '@mui/icons-material/PostAdd';\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn';\nimport GavelIcon from '@mui/icons-material/Gavel';\nimport MessageIcon from '@mui/icons-material/Message';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\nimport { Icon } from '@iconify/react';\nimport walletMoneyIcon from '@iconify-icons/solar/wallet-money-bold';\n\n// Keyframes animations for different notification types\nconst pillExpand = keyframes`\n  0% { width: 100px; border-radius: 50px; opacity: 0; transform: translateY(-20px) scale(0.8); }\n  20% { opacity: 1; transform: translateY(0) scale(1); }\n  80% { width: 300px; border-radius: 24px; }\n  100% { width: 300px; border-radius: 24px; }\n`;\n\nconst pillContract = keyframes`\n  0% { width: 300px; border-radius: 24px; opacity: 1; }\n  20% { width: 250px; border-radius: 30px; opacity: 0.9; }\n  80% { width: 100px; border-radius: 50px; opacity: 0.3; transform: translateY(0); }\n  100% { opacity: 0; transform: translateY(-20px) scale(0.8); }\n`;\n\nconst pulseAnimation = keyframes`\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n`;\n\nconst bounceAnimation = keyframes`\n  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\n  40% { transform: translateY(-10px); }\n  60% { transform: translateY(-5px); }\n`;\n\nconst dropAnimation = keyframes`\n  0% { transform: translateY(-50px); opacity: 0; }\n  50% { transform: translateY(10px); opacity: 1; }\n  70% { transform: translateY(-5px); }\n  100% { transform: translateY(0); opacity: 1; }\n`;\n\n// Styled components for the notification\nconst NotificationContainer = styled(Box, {\n  shouldForwardProp: (prop) => prop !== 'isVisible' && prop !== 'animationType'\n})(({ theme, isVisible, animationType }) => {\n  const animation = isVisible \n    ? `${pillExpand} 0.5s forwards`\n    : `${pillContract} 0.5s forwards`;\n  \n  const pulseAnim = `${pulseAnimation} 2s infinite`;\n  const bounceAnim = `${bounceAnimation} 2s infinite`;\n  const dropAnim = `${dropAnimation} 0.5s forwards`;\n  \n  let additionalAnimation = '';\n  if (animationType === 'pulse') additionalAnimation = pulseAnim;\n  if (animationType === 'bounce') additionalAnimation = bounceAnim;\n  if (animationType === 'drop') additionalAnimation = dropAnim;\n  \n  return {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: 'translateX(-50%)',\n    backgroundColor: 'rgba(20, 20, 22, 0.95)',\n    backdropFilter: 'blur(10px)',\n    color: 'white',\n    padding: '10px 16px',\n    borderRadius: '24px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 9999,\n    boxShadow: '0 4px 30px rgba(0, 0, 0, 0.3)',\n    animation: animation,\n    overflow: 'hidden',\n    width: '300px',\n    border: '1px solid rgba(255, 255, 255, 0.1)',\n    '& .animation-wrapper': {\n      animation: additionalAnimation,\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      minWidth: 0,\n    },\n    '& .notification-bg-icon': {\n      position: 'absolute',\n      right: 20,\n      top: '50%',\n      transform: 'translateY(-50%) rotate(-15deg)',\n      fontSize: '3rem',\n      opacity: 0.3,\n      color: theme.palette.primary.main,\n      pointerEvents: 'none',\n      filter: 'blur(2px)',\n      '& svg': {\n        filter: `drop-shadow(0 0 8px ${alpha(theme.palette.primary.main, 0.6)})`,\n      }\n    }\n  };\n});\n\nconst IconContainer = styled(Box)(({ theme, notificationType }) => {\n  const colors = {\n    success: '#4caf50',\n    error: '#ff5252',\n    warning: '#fb8c00',\n    info: '#2196f3',\n    notification: '#D0BCFF'\n  };\n  \n  return {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 12,\n    color: colors[notificationType] || colors.info,\n    '& svg': {\n      fontSize: 20\n    }\n  };\n});\n\nconst MessageContainer = styled(Box)({\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  minWidth: 0,\n  overflow: 'hidden',\n});\n\nconst getNotificationIcon = (type) => {\n  switch (type) {\n    case 'comment_like':\n    case 'reply_like':\n    case 'post_like':\n      return <FavoriteIcon sx={{ fontSize: '3rem' }} />;\n    case 'comment':\n    case 'reply':\n      return <ChatBubbleIcon sx={{ fontSize: '3rem' }} />;\n    case 'follow':\n      return <PersonAddIcon sx={{ fontSize: '3rem' }} />;\n    case 'repost':\n      return <RepeatIcon sx={{ fontSize: '3rem' }} />;\n    case 'wall_post':\n      return <PostAddIcon sx={{ fontSize: '3rem' }} />;\n    case 'points_transfer':\n      return <Icon icon={walletMoneyIcon} width=\"3rem\" height=\"3rem\" />;\n    case 'badge_purchase':\n    case 'username_auction_bid':\n    case 'username_bid_accepted':\n    case 'username_auction_outbid':\n    case 'username_auction_sold':\n    case 'username_auction_won':\n    case 'username_auction_cancelled':\n    case 'username_auction_bid_increased':\n    case 'auction_win':\n    case 'auction_sold':\n    case 'auction_refund':\n    case 'new_auction_bid':\n      return <MonetizationOnIcon sx={{ fontSize: '3rem' }} />;\n    case 'moderation':\n    case 'ban':\n    case 'unban':\n    case 'warning':\n      return <GavelIcon sx={{ fontSize: '3rem' }} />;\n    case 'mention':\n      return <MessageIcon sx={{ fontSize: '3rem' }} />;\n    case 'medal':\n      return <EmojiEventsIcon sx={{ fontSize: '3rem' }} />;\n    default:\n      return <NotificationsIcon sx={{ fontSize: '3rem' }} />;\n  }\n};\n\n/**\n * Dynamic Island style notification component\n */\nconst DynamicIslandNotification = ({ \n  open = false,\n  message = \"\",\n  shortMessage = \"\",\n  notificationType = \"info\",\n  animationType = \"pill\",\n  autoHideDuration = 3000,\n  onClose = () => {},\n  icon = null,\n  notificationData = null\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  \n  // Handle visibility with animation timing\n  useEffect(() => {\n    if (open) {\n      setIsVisible(true);\n      \n      // Auto hide after duration\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n        \n        // Additional delay to allow exit animation to complete\n        setTimeout(() => {\n          onClose();\n        }, 500);\n      }, autoHideDuration);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [open, autoHideDuration, onClose]);\n  \n  // Select the right icon based on notification type\n  const getIcon = () => {\n    if (icon) return icon;\n    \n    switch (notificationType) {\n      case 'success':\n        return <CheckCircleIcon />;\n      case 'error':\n        return notificationType === 'network' ? <WifiOffIcon /> : <ErrorIcon />;\n      case 'warning':\n        return <WarningIcon />;\n      case 'auth':\n        return <LockIcon />;\n      case 'notification':\n        return <NotificationsIcon />;\n      case 'info':\n      default:\n        return <InfoIcon />;\n    }\n  };\n  \n  // Bail out if not open\n  if (!open && !isVisible) return null;\n  \n  return (\n    <NotificationContainer isVisible={isVisible} animationType={animationType}>\n      <div className=\"animation-wrapper\">\n        <IconContainer notificationType={notificationType}>\n          {getIcon()}\n        </IconContainer>\n        \n        {isVisible && (\n          <MessageContainer>\n            <Typography \n              variant=\"subtitle2\" \n              sx={{ \n                fontWeight: 'bold',\n                whiteSpace: 'nowrap',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis'\n              }}\n            >\n              {shortMessage || message}\n            </Typography>\n            {shortMessage && message && shortMessage !== message && (\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  opacity: 0.7,\n                  whiteSpace: 'nowrap',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis'\n                }}\n              >\n                {message}\n              </Typography>\n            )}\n          </MessageContainer>\n        )}\n      </div>\n      <Box className=\"notification-bg-icon\">\n        {notificationData ? getNotificationIcon(notificationData.type) : getNotificationIcon('default')}\n      </Box>\n    </NotificationContainer>\n  );\n};\n\nexport default DynamicIslandNotification; "],"file":"assets/index.CdVNWeFt.js"}