<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover" />

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <meta name="theme-color" content="#1E1E1E" />
    <meta name="description" content="К-Коннект - социальная сеть для молодежи и творческих людей" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="К-Коннект" lang="ru" />
    
    <meta property="og:title" content="К-Коннект" />
    <meta property="og:description" content="К-Коннект - социальная сеть для молодежи и творческих людей" />
    <meta property="og:image" content="/icon-512.png" />
    <meta property="og:url" content="https://k-connect.ru" />
    <meta property="og:type" content="website" />
    
    <link rel="apple-touch-icon" href="/icon-180.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152.png" />
    <link rel="apple-touch-icon" sizes="167x167" href="/icon-167.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="/icon-512.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="К-Коннект" lang="ru" />
    
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-touch-fullscreen" content="yes" />

    <title>К-Коннект</title>
    <link rel="stylesheet" href="/fonts.css">

    <style>
      body {
        touch-action: pan-x pan-y;
        -webkit-touch-callout: none;
        text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
      }

      input, textarea, select {
        font-size: 16px !important;
        touch-action: manipulation;
      }
      
      p, h1, h2, h3, h4, h5, h6, span, div, article, section {
        -webkit-user-select: text;
        -moz-user-select: text;
        -ms-user-select: text;
        user-select: text;
      }
      
      button, a, input[type="button"], .no-select {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
          
      /* Оптимизация для анимаций текстов в плеере */
      .lyrics-container {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      
      .lyrics-line {
        will-change: transform, opacity, filter;
        transform-style: preserve-3d;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }
      
      /* Ускорение анимаций на мощных устройствах */
      @media (prefers-reduced-motion: no-preference) {
        .lyrics-line {
          transition-timing-function: cubic-bezier(0.25, 0.8, 0.25, 1);
        }
      }
      
      /* Уменьшение анимаций для пользователей с предпочтением */
      @media (prefers-reduced-motion: reduce) {
        .lyrics-line {
          animation-duration: 0.2s !important;
          transition-duration: 0.2s !important;
        }
      }
    </style>
    
    <script>
      document.addEventListener('touchmove', function(event) {
        if (event.touches.length > 1) {
          event.preventDefault();
        }
      }, { passive: false });
      
      let lastTap = 0;
      document.addEventListener('touchend', function(event) {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0) {
          event.preventDefault();
        }
        lastTap = currentTime;
      });
      
      // Prevent zoom on input focus
      document.addEventListener('focus', function(e) {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
          // Prevent iOS zoom
          document.body.style.touchAction = 'manipulation';
          document.documentElement.style.touchAction = 'manipulation';
        }
      }, true);
    </script>

  </head>
  <body>
    <noscript>Для работы К-Коннект необходим JavaScript</noscript>
    <div id="root"></div>
    <script type="module" src="/src/index.js"></script>

    <div id="fullscreen-player-portal"></div>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/custom-sw.js')
            .then(function(registration) {
              console.log('Воркер зареган йоу:', registration);
            })
            .catch(function(error) {
              console.log('воркер помер:', error);
            });
        });
      }
    </script>
    

  </body>
</html>
