/**
 * Сервис для управления данными об обновлениях системы
 */

const updates = [
  {
    version: '3.0.1pre-release',
    date: '05.08.2025',
    title: 'Обновление 3.0.1pre-release',
    updates: ['Приватный профиль', 'Оптимизация', 'Новые темы'],
  },
  {
    version: '3.0.0-pre',
    date: '29.07.2025',
    title: 'Обновление 3.0.0 Pre-Release',
    updates: [
      'Новая система тикетов',
      'Новая система модерации',
      'Новая система жалоб',
      'Новая система Т-Модератора',
      'Новая система MCoin - отдельная валюта для покупок',
      'Система ключей MCoin для пополнения баланса',
      'Модал покупки декораций за MCoin (199 MCoin)',
      'Модал покупки подписок за MCoin (99/199/399 MCoin)',
      'Улучшенное отображение транзакций MCoin в истории',
      'Интеграция MCoin в модераторскую панель',
      'Система транзакций MCoin с типами и описаниями',
      'Безопасная система списания и начисления MCoin',
      'Поддержка всех типов декораций в интерфейсе',
      'Модальные окна с табами для подписок и декораций',
      'Система проверки доступности подписок для покупки'
    ],
    fixes: [
      'Исправлена обработка пустых item_path в декорациях',
      'Устранены ошибки отображения изображений декораций',
      'Исправлена логика покупки подписок (только повышение уровня)',
      'Улучшена обработка транзакций MCoin в истории',
      'Исправлены дублирующиеся описания в транзакциях',
      'Устранены ошибки с путями изображений (split by ";")',
      'Исправлена обработка фонов декораций в лидерборде',
      'Улучшена совместимость с различными типами фонов',
      'Исправлены ошибки отображения в SearchPage и DecorationMenu',
      'Устранены проблемы с пустыми строками в item_path'
    ]
  },
  {
    version: '2.9.9',
    date: '28.07.2025',
    title: 'Обновление 2.9.9',
    updates: [
      'Новая система тем: две тёмные темы — с блюром и без',
      'Удалены экспериментальные функции удаления блюра',
      'Новая модалка — уже используется в настройках и аукционе',
      'Обновлён раздел аукциона юзернеймов',
      'Мгновенное обновление данных в аукционе при действиях',
      'Поддержка всех типов уведомлений',
      'Dynamic-уведомления автоматически помечаются как прочитанные',
      'Оптимизация айтемов и компонентов интерфейса',
      'Рефакторинг компонента Post.js: вынесены стили, утилиты и обработчики в отдельные модули',
      'Модульная архитектура Post: созданы файлы для стилей, утилит, хуков и обработчиков',
      'Улучшена читаемость и поддерживаемость кода Post компонента',
      'Конвертация мелких компонентов Post в TypeScript (.js → .tsx)',
      'Создание универсального меню для замены BlurredMenu',
      'Рефакторинг модальных окон Post: использование UniversalModal',
      'Создание ModalButtonContainer для единообразного стиля кнопок'
    ],
    fixes: [
      'Исправлена проблема с timezone в функции isPostEditable',
      'Устранены ошибки типизации в конвертированных компонентах',
      'Исправлены стили модальных окон для корректного отображения на мобильных устройствах',
      'Исправлена критическая ошибка с undefined post.id в API запросах',
      'Добавлены проверки post.id во всех функциях, работающих с API',
      'Предотвращены ошибки 405 Method Not Allowed из-за неправильных URL'
    ]
  },
  {
    version: '2.9.8',
    date: '25.07.2025',
    title: 'Обновление 2.9.8',
    updates: ['Позиции айтемов', 'Оптимизация'],
    fixes: ['Исправлена ошибка при настройке айтемов'],
  },
  {
    version: '2.9.7',
    date: '20.07.2025',
    title: 'Обновление 2.9.7',
    updates: ['Бейдж-Шоп(TypeScript)', 'Новые Табы'],
    fixes: ['Исправлена ошибка при Регистрации'],
  },
  {
    version: '2.9.6',
    date: '12.07.2025',
    title: 'Обновление 2.9.6',
    updates: [
      'Оптимизация',
      'Реферальная программа',
      'Новые Настройки',
      'Инвентарь(TypeScript)',
    ],
    fixes: [
      'Проведен рефакторинг кода для повышения стабильности и скорости работы.',
      'Удалены ненужные файлы и очистка консоли от лишних сообщений.',
      'Улучшена обработка ошибок и загрузка данных в приложении.',
      'Обновлены компоненты для более надежной работы авторизации и стикеров.',
      'Исправлена ошибка при Регистрации',
      'Теперь действия не приводят к перезагрузке страницы',
    ],
  },
  {
    version: '2.9.5',
    date: '10.07.2025',
    title: 'Обновление 2.9.5',
    updates: ['Оптимизация', 'Улучшенные Бейджи', 'Перепись на K-UI'],
    fixes: ['Поддержка Typescript'],
  },
  {
    version: '2.9.4',
    date: '06.07.2025',
    title: 'Обновление 2.9.4',
    updates: [
      'Оптимизация',
      'Изменение дизайна профиля',
      'Команды CTRL + J',
      'Исправлен онлайн статус пользователей',
      'Обновлен профиль пользователя',
      'Удалены медали из профиля',
      "Новый блок в разделе 'Инфо",
    ],
    fixes: [
      'Исправлена ошибка отображения онлайн статуса',
      'Корректная работа с часовыми поясами (МСК/UTC)',
      'Улучшена точность определения активности пользователей',
    ],
  },
  {
    version: '2.9.3',
    date: '04.07.2025',
    title: 'Обновление 2.9.3',
    updates: ['Стикеры', 'Обновлен мессенджер', 'Звук сообщений'],
    fixes: ['Новый сокет', 'Стабильность сокета'],
  },
  {
    version: '2.9.2',
    date: '30.06.2025',
    title: 'Обновление 2.9.2',
    updates: [
      'Совместимость с старыми Браузерами',
      'Обновлен плеер',
      'Синхронизация текста',
      'Исправлена сортировка лайкнутых треков',
      'Треки теперь отображаются по дате добавления в лайки',
      "Улучшена навигация в разделе 'Мои любимые'",
    ],
    fixes: [
      'Исправлена ошибка сортировки в API лайкнутых треков',
      'Устранена проблема с неправильным порядком треков в любимых',
      "Исправлена кнопка 'Назад' на странице лайкнутых треков",
    ],
  },
  {
    version: '2.9.1',
    date: '29.06.2025',
    title: 'Обновление 2.9.1',
    updates: [
      'Новые плееры',
      'Исправлена работа плеера музыки',
      'Плеер больше не теряет плейлист при переключении треков',
      'Улучшена навигация в плейлистах',
      'Добавлены индикаторы играющего трека в модалках',
      'Синхронизация тем между устройствами',
      'Упрощена система настроек темы',
    ],
    fixes: [
      'Исправлена навигация между треками в плейлистах',
      'Исправлена работа с треками артистов',
      'Плеер теперь запоминает контекст воспроизведения',
      'Исправлено перезаписывание настроек темы',
      'Устранены конфликты между локальными и серверными настройками',
    ],
  },
  {
    version: '2.9',
    date: '25.06.2025',
    title: 'Обновление 2.9',
    updates: ['Добавлены Пачки', 'Фоны айтемов', 'Новый плеер', 'Оптимизация'],
  },
  {
    version: '2.8',
    date: '01.06.2025',
    title: 'Обновление 2.8',
    updates: [
      'Добавлены Пачки',
      'Добавлены инвентарь',
      'Встретили Лето',
      'Оптимизация',
      'Закрепление постов',
      'Шторка уведомлений',
      'Новый вид меню',
      'Поисковик',
      'Любовные связи',
      'Декорации',
      'Темы,Обои,Фичи',
      'Паки',
      'Маркетплейс',
    ],
    fixes: [
      'Ошибки Аукцион-API',
      'Исправлены ошибки в бекенде',
      'Добавлена Доп защита от спама запросов',
      'Множество исправлений о которых уже не возможно вспомнить',
    ],
  },
  {
    version: '2.7',
    date: '13.05.2025',
    title: 'Обновление 2.7',
    updates: [
      'Добавлен мессенджер',
      'Добавлены плейлисты',
      'Модальные окна для плейлистов',
      'Очередь плейлистов покругу',
      'Новый вид профиля',
      'Репосты',
    ],
    fixes: [
      'Прогрузка плейлистов',
      'Работа с плейлистами в мобильной версии',
      'Обновление системы Аукциона юзернеймов',
    ],
  },
  {
    version: '2.6',
    date: '08.05.2025',
    title: 'Обновление 2.6',
    updates: [
      'Начало улучшений Бэкэнда',
      'Сессии длятся 30 дней',
      'Добавлены друзья',
      'Статусы для каналов',
      'Новый Плеер Музыки',
      'Карточки музыкантов',
    ],
    fixes: [
      'Ошибки при нагрузке на сервер',
      'Выкидывание из аккаунтов',
      'Исправлен аукцион',
      'Исправлены ошибки в плеере',
    ],
  },
  {
    version: '2.5',
    date: '05.05.2025',
    title: 'Обновление 2.5',
    updates: [
      'Синхронизация между вкладками с использованием BroadcastChannel API',
      'Улучшенная производительность и отзывчивость интерфейса',
      'Добавлен аукцион юзернеймов',
      'Улучшен просмотр изображений',
      'История владения юзернеймами',
      'История транзакций по играм',
      'Блекджек',
    ],
    fixes: [
      'Исправлена ошибка с множественными запросами к серверу',
      'Устранены проблемы с отображением в мобильных браузерах',
      'Исправлена синхронизация данных при использовании нескольких устройств',
    ],
  },
  {
    version: '2.4',
    date: '01.04.2025',
    title: 'Обновление 2.0 - 2.4',
    updates: [
      'Полный перенос на React',
      'Улучшенная производительность и отзывчивость интерфейса',
      'Переписан полностью бэкенд на работу с React',
      'Добавлены новые мини-игры',
      'Баланс, переводы, оплаты',
      'Магазин Бейджиков',
      'Планы подписок',
    ],
    fixes: [
      'Исправлены ошибки в бекенде',
      'Добавлена защита от спама запросов',
      'Добавлена документация по API (устаревшая на момент 08.05.2025)',
      'Множество исправлений о которых уже не возможно вспомнить',
    ],
  },
];

const UpdateService = {
  /**
   * Получение последнего обновления
   * @returns {Object} Данные о последнем обновлении
   */
  getLatestUpdate: () => {
    return updates[0];
  },

  /**
   * Получение всех обновлений
   * @returns {Array} Массив с данными обо всех обновлениях
   */
  getAllUpdates: () => {
    return updates;
  },

  /**
   * Получение обновления по версии
   * @param {string} version - Версия обновления
   * @returns {Object|null} Данные об обновлении или null, если не найдено
   */
  getUpdateByVersion: version => {
    return updates.find(update => update.version === version) || null;
  },

  /**
   * Получение обновлений за определенный период
   * @param {number} count - Количество последних обновлений
   * @returns {Array} Массив с данными о последних обновлениях
   */
  getRecentUpdates: (count = 3) => {
    return updates.slice(0, count);
  },
};

export default UpdateService;
